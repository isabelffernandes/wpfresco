jQuery(document).ready(function(V){var W=TvrMT.TvrCom,x=TvrMT.MTF,m=TvrMT.MTdetached,s=TvrMT.detachedWin,G=TvrMT.mod.MTace,v=TvrMT.mod.MTint,C=TvrMT.mod.MTloop,K=TvrMT.mod.MTdd,J=TvrMT.mod.MTsave,e=TvrMT.mod.MTsass,p=TvrMT.mod.MTgrid,S=(TvrMT.mod.MTtransform,TvrMT.mod.MTwidget),t=TvrMT.data.dyn.pref,r=parseInt(t.allow_scss),a=TvrMT.data.dyn.client_scss,o=r&&!a,n=V("body").width();TvrMT.TvrUi={cssFilters:TvrMT.data.prog.CSSFilters,cssProps:TvrMT.data.prog.CSSProps,gatheredCSS:TvrMT.data.prog.gatheredCSS,templates:TvrMT.data.templates,blog_details:TvrMT.data.dyn.blog_details,TVR_DEV_MODE:TVR_DEV_MODE,scss_enabled:r,client_scss:a,server_scss:o,pref:TvrMT.data.dyn.pref,uiData:TvrMT.data.dyn.ui,sass:!1,jsuVersion:7,jsuEvents:{js_css_compilation:3,synced_code_gui:4,imp_only_sh_and_grad_fix:5,property_value_structure:6,separate_css_units:7},sRules:CSSUtilities,reinitRules:!0,tooMuchCSS:!1,tmp:{},uiUrl:V("#ui-url").attr("rel"),pluginUrl:V("#plugin-url").attr("rel"),adminUrl:V("#admin-url").attr("rel"),microUrl:V("#micro-url").attr("rel"),cssMin:V("#css-min").attr("rel"),cssStub:V("#css-stub").attr("rel"),totalSecs:parseInt(V("#total-sec-count").text()),TvrSugCSS:{},highlightEnabled:!1,colorPickerDragging:!1,progStatus:[],intelli:!1,awaitingIFrame:!0,placeholderFrame:!0,compProps:{},grid:{container:!1,items:[]},intelliCompProps:{},nodeCSS:{},intellinodeCSS:{},mixedElKey:0,update_gf_url:!1,g_url:"",comboScrollTopPos:0,pageOrPostID:!1,numSug:100,numRecent:6,numSampled:15,numMiniTiles:12,numSavedTiles:56,numSiteTiles:56,maxSelsPerFolder:41,proGroups:{flexbox:1,grid:1,animation:1,transition:1,transform:1},samplingProps:["font_family","font_size","line_height","color","padding_top","padding_right","padding_bottom","padding_left","margin_top","margin_right","margin_bottom","margin_left","row_gap","column_gap","border_width","border_radius"],gridTrackProps:["grid-template-rows","grid-template-columns","grid-auto-rows","grid-auto-columns"],propAliases:TvrMT.data.prog.propAliases,cssFuncAliases:TvrMT.data.prog.cssFuncAliases,domChanged:{},mutationObserver:!1,stat:{win:window,doc:document,head:document.head,$doc:V(document),body:V("body"),tvr:V("#tvr"),vis:V("#visual-view"),styleComponents:V("#style-components"),nav:V("#tvr-nav"),mainMenu:V("#tvr-main-menu"),top:V("#v-top-controls"),code:V("#hand-css-area"),codeInner:V("#tvr-inner-code"),grid:V("#grid-control-wrap"),inlineEditor:V("#inline-editor"),adaptableEditor:V("#adaptable-editor"),view:V("#display-css-code-dialog"),res:V("#responsive-bar"),css_icons:V("#css-group-icons"),slider:V("#v-mq-slider"),opts:V("#tvr-options"),front:V("#v-frontend-wrap"),frontInner:V("#v-frontend"),wiz:V("#advanced-wizard"),wizFolder:V("#wizard_folder"),selNaming:V("#advanced-wizard"),breadcrumbs:V("#full-breadcrumbs"),sliderDragbar:V("#mtss-dragbar"),actStyles:V("#actual-styles"),tools:V("#v-left-controls-wrap"),toolsMenu:V("#v-left-controls"),rightStuff:V("#right-stuff-wrap"),iframe:V("#viframe"),iframeDoc:!1,dialogs:V("#dialogs"),cssUnitGrid:V("#css-units-grid"),scss_compile_notes:V("#scss-error-notes"),scss_import_compile_notes:V("#scss-import-error-notes"),scss_error_file:V("#scss-error-file"),widthTest:V("#tvr-width-input"),changeUrlInputWrap:V("#previewPath").parent()},tOut:6e4,hi:{section:"folder-icon tvr-icon",selector:"selector-icon tvr-icon",tab:"edit-media-queries lg-icon"},baseFontSize:16,browser:V("#user-browser").attr("rel"),meta:{},inputWaitingObj:{},timer:{typing:0,quickTarget:0,deferredTarget:0,prog:[]},jumpTo:!1,something_wrong:!1,debugCount:0,wasOpen:!1,leftMenu:!!V("#v-left-controls").hasClass("show"),dataLoading:!1,intelliAfterLoad:!1,ajaxUrl:V("#wpAjaxUrl").attr("rel"),toolbarHeight:0,frameHeight:0,frameWidth:0,previewWidth:0,rulerVal:0,prev:!1,fullWidth:n,resSliderWidth:0,tabsWidth:0,sortableMenuDims:{},mqs:[],totalSels:parseInt(V("#total-sel-count").text()),trial:"1"!=V("#plugin-trial").attr("rel"),trialNotice:TvrLang.trial_notice,gFontTarget:Object(),startSel:!1,selsToLoad:0,totalToLoad:0,pgInFocusWiz:"font",aceTypingInterval:o?500:50,inputTypingInterval:50,beforeSaveInterval:o?300:1200,beforeAutoConvertInterval:2e3,saveInProgress:!1,pendingAutoSave:function(){return W.obj_length(B.pendingAutoSaveConfig)},pendingAutoSaveConfig:{},reSave:!1,siteUrl:V("#site-url").attr("rel"),homeUrl:V("#home-url").attr("rel"),itemAlreadyExpanded:!1,tooltipDelay:V("#tooltip_delay").attr("rel").toLowerCase(),edge_mode:parseInt(V("#edge-mode").attr("rel")),init:function(){window!=window.top&&window.parent.TvrMT&&(window.location=B.homeUrl),TvrMT.init.add_listeners()},ua_detected:function(){B.something_wrong=!1},JSerrors:[],prevJSerrors:[],catch_js_errors:function(){if(window.top.Cypress||!parseInt(B.pref.monitor_js_errors))return!1;window.onerror=function(e,t,s){B.JSerrors.push({error:e,URL:t,line:s,source:TvrLang.interface}),B.instant_show_js_error("ui")}},instantPreviewNotSass:function(){return!parseInt(B.pref.allow_scss)},instant_show_js_error:function(e){var t=B.JSerrors[0].error,s={short:t+=" (line "+B.JSerrors[0].line+")",long:"<p>"+TvrLang.js_error_site+":</p>"+B.js_error_deets(),type:"warning"};"ui"==e?J.update_full_logs(s):J.log(s)},js_error_deets:function(e){W.startT(arguments);var t="",s=e?B.prevJSerrors:B.JSerrors;if(0<s.length){for(var r in t+="<ol>",s)if(s.hasOwnProperty(r)){var a=s[r];for(var o in t+="<li>",a)if(a.hasOwnProperty(o)){var n=a[o];if("URL"==o)n='<a target="_blank" href="'+n+'">'+W.root_rel(n)+"</a>",n+=" (line "+a.line+")";else if("line"==o)continue;t+="<b>"+W.ucwords(o)+":</b> "+n+"<br />"}t+="</li>"}t+="</ol>",B.prevJSerrors=V.extend(!0,[],B.JSerrors),B.JSerrors=[]}return W.endT(arguments),t},isProGroup:function(e){var t=B.get_meta(e,"group");return B.proGroups[t.groupSlug]},isForbiddenProperty:function(e){return!(B.pref.buyer_validated||!W.isDomEl(e)||!e.hasClass("property-input")||!B.isProGroup(e))&&(e.val(""),alert(TvrLang.trial_notice),!0)},adjust_mqs_for_unit:function(e){W.startT(arguments);var t=["min","max"];for(var s in e)if(e.hasOwnProperty(s))for(var r=0;r<t.length;++r){var a=t[r];e[s][a]=parseFloat(e[s][a]),e[s][a+"_unit"]&&"px"!=e[s][a+"_unit"]&&(e[s][a]=parseFloat(e[s][a])*B.baseFontSize)}return W.endT(arguments),e},maybe_pair_class:function(e,t){var s=W.get_pseudo_class(e);if(!s)return!1;var r=s[0];if(!B.get_pseudo_config(s)[r].strip)return!1;var a="mt-"+W.convert_to_param(r);if("class"==t)return a;if("selector"==t||"full"==t){var o=new RegExp(r+"(?!.*"+r+")"),n=e.replace(o,"."+a);return"selector"==t?n:e+", "+n}},get_pseudo_config:function(e){var t={};for(var s in e)e.hasOwnProperty(s)&&(t[e[s]]={});var r=["page_specific","pseudo_elements","pseudo_classes"];for(var a in r)if(r.hasOwnProperty(a)){var o,n,i=r[a];for(var l in B.cssFilters[i].items){B.cssFilters[i].items.hasOwnProperty(l)&&(o=l.replace("::",":"),(t[l]||t[o])&&(t[n=t[o]?o:l]=V.extend(!0,{},B.cssFilters[i].items[l]),t[n].pCE=l))}}return t},psuedo_is_set:function(){var e=B.stat.tvr.attr("class"),t=["pseudo_classes","page_specific","pseudo_elements"];for(var s in t)if(t.hasOwnProperty(s)&&-1<e.indexOf(t[s]))return!0;return!1},support_sampling:function(e,t){return!0},get_property_tab_control:function(e){var t=e.replace(/_/g,"-");return W.checkObject(TvrMT.data.prog.lh,[t,"tab_control"])},pseudo_class_format:function(e){return"filter-"+e.replace(/[:\(\)]+/g,"")},get_pseudo:function(e,t){if("val"==e){var s=B.pseudo_class_format(t.pseudoCE);return V("#css-filters").find("span.quick-opts-wrap").find("ul.css-filter-list").find("li."+s).find("input").val()}},iframe_loaded:function(e){x=window.TvrMT.MTF,B.stat.fHTML=e,parseInt(B.pref.grid_highlight)&&B.stat.fHTML.addClass("grid_highlight"),"grid"===B.pref.pg_focus&&B.stat.fHTML.addClass("showGridControls"),B.detached_window_available(!0)&&m.iframe_loaded(),B.briefly_highlight_selector()},keyboard_save_action:function(e,t){B.ua_detected();var s=parseInt(B.pref.show_code_editor)?"full":"inline",r="fullSCSSCompile"===t;G.get_focus_editor().session.getMode();if("inline"==s){if(B.selInFocusID){var a=V("#"+B.selInFocusID+"-code-code-css-"+B.get_mq_focus());if(W.isDomEl(a))return J.ajax_save_settings({$editor:B.stat.adaptableEditor,noSaveDelay:!r,$property:a.find("textarea.property-input"),settings:r?{fullSCSSCompile:1}:{}}),e.preventDefault(),!1;var o={},n="All settings saved (Ctrl + S)";r&&(o.fullSCSSCompile=1,n="Full SCSS compile (Ctrl + Alt + P)"),o=J.user_action(o,{items:[n],icon:"save-interface lg-icon"}),J.ajax_save_settings({noSaveDelay:!r,settings:o})}}else G.ace_instant_save(s,G.ace_sync_details.$textarea,B.stat.adaptableEditor,!r,r);e.preventDefault()},setup_keyboard_shortcuts:function(e){var t,a,o;W.startT(arguments),function(e,r,t){function s(e,t,s){e.addEventListener?e.addEventListener(t,s,!1):e.attachEvent("on"+t,s)}function v(e){if("keypress"!=e.type)return l[e.which]?l[e.which]:o[e.which]?o[e.which]:String.fromCharCode(e.which).toLowerCase();var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function b(e,t){var s,r,a=[],o=e;for(o="+"===o?["+"]:(o=o.replace(/\+{2}/g,"+plus")).split("+"),r=0;r<o.length;++r)s=o[r],d[s]&&(s=d[s]),t&&"keypress"!=t&&c[s]&&(s=c[s],a.push("shift")),h(s)&&a.push(s);if(o=s,!(r=t)){if(!i)for(var n in i={},l)95<n&&n<112||l.hasOwnProperty(n)&&(i[l[n]]=n);r=i[o]?"keydown":"keypress"}return"keypress"==r&&a.length&&(r="keydown"),{key:s,modifiers:a,action:r}}function a(e){function i(e){e=e||{};var t,s=!1;for(t in p)e[t]?s=!0:p[t]=0;s||(m=!1)}function l(e,t,s,r,a,o){var n,i=[],l=s.type;if(!_._callbacks[e])return[];for("keyup"==l&&h(e)&&(t=[e]),n=0;n<_._callbacks[e].length;++n){var c,d=_._callbacks[e][n];!r&&d.seq&&p[d.seq]!=d.level||l!=d.action||((c="keypress"==l&&!s.metaKey&&!s.ctrlKey)||(c=d.modifiers,c=t.sort().join(",")===c.sort().join(",")),c&&(c=r&&d.seq==r&&d.level==o,(!r&&d.combo==a||c)&&_._callbacks[e].splice(n,1),i.push(d)))}return i}function c(e,t,s,r){_.stopCallback(t,t.target||t.srcElement,s,r)||!1!==e(t,s)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function t(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t,s,r=v(e);r&&("keyup"==e.type&&f===r?f=!1:_.handleKey(r,(s=[],(t=e).shiftKey&&s.push("shift"),t.altKey&&s.push("alt"),t.ctrlKey&&s.push("ctrl"),t.metaKey&&s.push("meta"),s),e))}function n(t,e,s,r){function a(e){c(s,e,t),"keyup"!==r&&(f=v(e)),setTimeout(i,10)}for(var o=p[t]=0;o<e.length;++o){var n=o+1===e.length?a:function(e){return function(){m=e,++p[t],clearTimeout(u),u=setTimeout(i,1e3)}}(r||b(e[o+1]).action);d(e[o],n,r,t,o)}}function d(e,t,s,r,a){_._directMap[e+":"+s]=t;var o=(e=e.replace(/\s+/g," ")).split(" ");1<o.length?n(e,o,t,s):(s=b(e,s),_._callbacks[s.key]=_._callbacks[s.key]||[],l(s.key,s.modifiers,{type:s.action},r,e,a),_._callbacks[s.key][r?"unshift":"push"]({callback:t,modifiers:s.modifiers,action:s.action,seq:r,level:a,combo:e}))}var _=this;if(e=e||r,!(_ instanceof a))return new a(e);_.target=e,_._callbacks={},_._directMap={};var u,p={},f=!1,g=!1,m=!1;_._handleKey=function(e,t,s){for(var r=l(e,t,s),a=0,o=!(t={}),n=0;n<r.length;++n)r[n].seq&&(a=Math.max(a,r[n].level));for(n=0;n<r.length;++n)r[n].seq?r[n].level==a&&(o=!0,t[r[n].seq]=1,c(r[n].callback,s,r[n].combo,r[n].seq)):o||c(r[n].callback,s,r[n].combo);r="keypress"==s.type&&g,s.type!=m||h(e)||r||i(t),g=o&&"keydown"==s.type},_._bindMultiple=function(e,t,s){for(var r=0;r<e.length;++r)d(e[r],t,s)},s(e,"keypress",t),s(e,"keydown",t),s(e,"keyup",t)}if(e){var i,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},c={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(t=1;t<20;++t)l[111+t]="f"+t;for(t=0;t<=9;++t)l[t+96]=t;a.prototype.bind=function(e,t,s){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,s),this},a.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},a.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},a.prototype.reset=function(){return this._callbacks={},this._directMap={},this},a.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" tvr-mousetrap ")||function e(t,s){return null!==t&&t!==r&&(t===s||e(t.parentNode,s))}(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},a.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},a.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);i=null},(a.init=function(){var e,t=a(r);for(e in t)"_"!==e.charAt(0)&&(a[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))})(),e.TvrMousetrap=a,"undefined"!=typeof module&&module.exports&&(module.exports=a),"function"==typeof define&&define.amd&&define(function(){return a})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?e:null),t=TvrMousetrap,a={},o=t.prototype.stopCallback,t.prototype.stopCallback=function(e,t,s,r){return!!this.paused||!a[s]&&!a[r]&&o.call(this,e,t,s)},t.prototype.bindGlobal=function(e,t,s){if(this.bind(e,t,s),e instanceof Array)for(t=0;t<e.length;t++)a[e[t]]=!0;else a[e]=!0},t.init(),TvrMousetrap.bindGlobal(["command+alt+b","ctrl+alt+b"],function(e){return v.keyboard_toggle_builder(),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+c","ctrl+alt+c"],function(e){return B.toggle_feature(!1,"show_code_editor"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+d","ctrl+alt+d"],function(e){return B.toggle_feature(!1,"detach_preview"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+g","ctrl+alt+g"],function(e){return B.show_dialog(B.stat.toolsMenu.find("li.item-display-css-code")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+h","ctrl+alt+h"],function(e){return B.keyboard_highlight||B.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),!(B.keyboard_highlight=1)},"keydown"),TvrMousetrap.bindGlobal(["command+alt+j","ctrl+alt+j"],function(e){return B.toggle_inline_gui(),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+l","ctrl+alt+l"],function(e){return B.toggle_feature(!1,"show_text_labels"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+n","ctrl+alt+n"],function(e){return B.toggle_preview_page_menu(B.stat.toolsMenu.find(".mt-group-heading-preview_page")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+p","ctrl+alt+p"],function(e){return B.close_dialog(),B.keyboard_save_action(e,"fullSCSSCompile"),!1},"keypress"),TvrMousetrap.bindGlobal(["command+s","ctrl+s"],function(e){return B.keyboard_save_action(e,"save"),!1}),TvrMousetrap.bindGlobal(["command+alt+t","ctrl+alt+t"],function(e){return B.toggle_feature(!1,"hover_inspect",{noSave:1}),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+,","ctrl+alt+,"],function(e){return B.quick_nav(V("#vb-focus-prev")),!1},"keypress"),TvrMousetrap.bindGlobal(["command+alt+.","ctrl+alt+."],function(e){return B.quick_nav(V("#vb-focus-next")),!1},"keypress"),V(e).keydown(function(e){var t;38!==e.which&&40!==e.which||(t=V(e.target),W.isDomEl(t)&&t.hasClass("mt-slider")&&!t.next(".combo-arrow").hasClass("on")&&S.increment_change(e,40===e.which))}),V(e).keyup(function(e){return 72==e.keyCode&&B.keyboard_highlight?(e.preventDefault(),B.feature_off(0,"mt_highlight",{fHTML:1,noSave:1,onAgain:B.el_selected?{fHTML:1,noSave:1,con:"intelli"}:0}),B.keyboard_highlight=0,!1):void(13!==e.which&&27!==e.which||(t=!(!e.target||!e.target.className)&&e.target.className)&&(s=e.target.id,r=V(e.target),a=13===e.which,r.closest("body").hasClass("tvr-visual")&&(0<=t.indexOf("selector-css-textarea")||0<=t.indexOf("selector-name-input")?(n=a?".tvr-button":".cancel",r.closest(".float-form").find(".sel-toggles").find(n).trigger("click")):0<=t.indexOf("rename-input")?(n=a?".rename-button":".cancel",r.closest(".edit-section-form").find(n).trigger("click")):"previewPath"===s&&a?(n=a?".rename-button":".cancel",r.closest(".tvr-input-wrap").find(".change-preview-url").trigger("click")):0<=t.indexOf("new-item-input")&&a?r.closest(".tvr-new-item").find(".new-item-add").trigger("click"):"wizard-name"===s||"wizard_folder"===s?(o=B.wiz_update_sel_mode?".wizard-update-cur.mt-full-label":".wizard-add.tvr-button",n=a?o:".hover-inspect-toggle",B.stat.selNaming.find(n).trigger("click")):"import_from_pack_name"!==s&&"export_pack_name"!==s||(n=a?".dialog-button":".close-dialog",r.closest(".tvr-dialog").find(n).trigger("click")))));var t,s,r,a,o,n}),W.endT(arguments)},expanded:function(e){var t;if("main_menu"==e)t=V("#tvr-main-menu");else if("quick_section"==e)t=V("#sec-in-focus");else if("quick_selector"==e)t=V("#sel-in-focus");else if("show_css_filters"==e)t=V("#show_css_filters-toggle");else if("mq"==e){var s=V("#"+B.selInFocusID);if(!W.isDomEl(s))return!1;t=s.find("span.add-mq")}return t.hasClass("on")},show_main_menu:function(e){if(W.startT(arguments),B.itemAlreadyExpanded)return!1;B.set_popdown_height(".menu-scrollable"),e.addClass("on expanded"),B.stat.vis.addClass("top_menu_showing"),W.endT(arguments)},set_popdown_height:function(e){W.startT(arguments);var t=B.stat.vis.height()-40,s=".menu-scrollable"==e?34:0;V("#main-menu-popdown").css("max-height",t).find(e).css("max-height",t-s),W.endT(arguments)},hide_main_menu:function(){W.startT(arguments),B.clean_tooltips(),B.stat.mainMenu.removeClass("on expanded"),B.open_close_all_folders("close"),B.stat.vis.removeClass("top_menu_showing"),W.endT(arguments)},quick_edit:function(e){if(W.startT(arguments),B.itemAlreadyExpanded)return!1;var t=B.get_meta(V("#"+B.selInFocusID),"selector"),s=e.hasClass("sec-in-focus")?"section":"selector";V("#main-menu-popdown").addClass("bye-for-now"),t.sectionM.addClass("hello-me");var r,a=t.sectionM.find(".menu-arrow"),o=t.selectorM.find(".edit-selector-form");a.hasClass("on")||B.toggle_folder(a,"selector"==s),e.hasClass("sec-in-focus")?(r=t.sectionM,o.hasClass("show")&&B.toggle_modify_selector(o),t.sectionM.find(".folder-icon").removeClass("sortable-icon").attr("title",""),B.set_popdown_height(".section-tag.hello-me")):(r=t.selectorM,o.hasClass("show")||B.toggle_modify_selector(o),t.sectionM.addClass("goodbye-section"),t.selectorM.addClass("hello-me"),B.set_popdown_height(".selector-tag.hello-me")),r.addClass("quick-edit-mode scrollable-area-not-live expanded"),e.addClass("on"),B.stat.vis.addClass("top_menu_showing"),W.endT(arguments)},close_quick_edit:function(){W.startT(arguments),B.clean_tooltips();var e,t,s,r,a,o=V("#main-menu-popdown"),n=o.find(".quick-edit-mode");n.hasClass("section-tag")?(t="folder",a=(s=B.get_meta(n,"section")).sectionM,(e=n.find("."+t+"-icon")).addClass("sortable-icon").attr("title",e.data("title"))):(t="selector",(r=(s=B.get_meta(n,"selector")).selectorM.find(".edit-selector-form")).hasClass("show")&&r.removeClass("show"),a=s.sectionM.add(s.selectorM)),n.removeClass("quick-edit-mode scrollable-area-not-live expanded");var i=s.sectionM.find(".menu-arrow");i.hasClass("on")&&B.toggle_folder(i),V("#current-selector").find(".on").removeClass("on"),a.removeClass("hello-me goodbye-section").css("max-height",""),o.removeClass("bye-for-now"),B.stat.vis.removeClass("top_menu_showing"),W.endT(arguments)},close_all_expanded:function(e,t,s){if(W.startT(arguments),!s){var r=e.parent();if(e.hasClass("on")||r.hasClass("quick-edit-wrap")&&r.hasClass("on")?B.itemAlreadyExpanded=!0:B.itemAlreadyExpanded=!1,(W.isDomEl(e.closest(".expanded"))||W.isDomEl(e.closest(".sp-container")))&&!e.hasClass("change-selector"))return W.endT(arguments),!1;if(e.hasClass("ui-menu-item")&&e.closest("#refine-targeting-pane")&&V("#show_css_filters-toggle").hasClass("on"))return!1}var a=B.stat.toolsMenu.find(".preview_page");B.expanded("main_menu")?B.hide_main_menu():B.expanded("quick_section")||B.expanded("quick_selector")?B.close_quick_edit():B.expanded("show_css_filters")?B.input_icon_toggle(V("#show_css_filters-toggle")):a.hasClass("expanded")&&B.toggle_preview_page_menu(a.find(".mt-group-heading")),B.colorPickerDragging||B.picker_method("hide"),W.endT(arguments)},close_tooltip:function(e,t){e.attr("title",t.text()).removeAttr("aria-describedby"),t.remove()},clean_tooltips:function(){if(W.startT(arguments),"native"==B.tooltipDelay)return!1;if("native"!=B.tooltipDelay){var e,t,s=B.stat.body.data("ui-tooltip");if(W.hasValue(s)){for(var r in s.tooltips){s.tooltips.hasOwnProperty(r)&&(e=V(s.tooltips[r].element[0]),t=V(s.tooltips[r].tooltip[0]),B.close_tooltip(e,t))}B.tt=!1,B.tt_trigger={}}}W.endT(arguments)},reset_global_vars:function(){W.startT(arguments),B.selInFocusID="",B.menuSelInFocusID="",B.curSelCSS="#no-element",B.intelli_css="#no-element",W.endT(arguments)},update_global_vars:function(e){W.startT(arguments),B.selInFocusID=e.selectorID,B.menuSelInFocusID=B.selInFocusID.replace("opts","strk"),B.curSelCSS=W.custom_escape_quotes(e.selectorM.find(".selector-css-textarea").val()),B.curSelEls=x?x.jquery_compat_sel_elements(B.curSelCSS):{},W.updateObject(B.uiData,["non_section","meta","last_viewed_selector"],B.selInFocusID),B.dontLogSelectorChange||J.silent_save("",[{trail:["non_section","meta","last_viewed_selector"],action:"replace",data:B.selInFocusID}]);var t=V("#current-selector"),s="",r="";B.is_dis(e.sectionM)&&(s+="item-disabled"),B.is_dis(e.selectorM)&&(r+="item-disabled"),V("#sec-in-focus").hasClass("on")&&(s+=" on"),V("#sel-in-focus").hasClass("on")&&(r+=" on");var a,o,n="",i={sec:TvrLang.qedit_current_folder,sel:TvrLang.qedit_current_selector};for(var l in i){i.hasOwnProperty(l)&&(a="sec"===l?i[l]:e.selectorCode,o="sec"===l?e.sectionH:e.selectorH,n+='<span id="'+l+'-in-focus" class="'+l+"-in-focus "+("sec"==l?s:r)+' quick-edit-wrap" >',n+='<span class="menu-arrow '+l+'-in-focus tvr-icon"></span>',n+='<span class="quick-menu-text '+l+'-in-focus" ',n+='title="'+W.escapeHTML(a)+'">'+W.escapeHTML(o)+"</span>",n+="</span>")}t.html(n);var c=TvrLang.update_selector+":\n"+e.sectionH+" >> "+e.selectorH+"\n";V("#wizard-update-cur").attr("title",c),W.endT(arguments)},menu_object:function(e){return V("#"+e.replace("opts","strk"))},section_slug:function(e){var t=V("#"+e);return!!W.isDomEl(t)&&B.get_meta(V("#"+e),"selector").sectionSlug},is_cur:function(e,t){if(W.hasValue(B.selInFocusID)){if("sec"==e){if(t==B.section_slug(B.selInFocusID))return!0}else if("sel"==e&&t==B.selInFocusID)return!0;return!1}},is_dis:function(e){return!!e.hasClass("item-disabled")},allowed_action:function(e,t){W.startT(arguments);var s=!1;return B.trial?("Edit Sel"==t&&W.isDomEl(e.closest(".trial-disabled"))&&(s=!0),"Add Sel"==t&&15<=B.totalSels&&(s=!0),W.endT(arguments),!s||(alert(B.trialNotice),!1)):(W.endT(arguments),!0)},load_css_ref:function(e){W.startT(arguments),B.show_dialog(e),W.endT(arguments)},show_google_fonts_field:function(e){e.is(":visible")?B.show_dialog(e.find(".g-font")):e.show("fast",function(){B.adjust_scroll_buttons(B.get_pg_meta(),"style")})},hide_google_fonts_field:function(e,t){B.gFontTarget.val("").prop("val",""),t.hide("fast",function(){B.adjust_scroll_buttons(B.get_pg_meta(),"style")})},insert_google_font:function(e){B.close_dialog(),B.gFontTarget.val(e).focus(),B.post_edit(B.gFontTarget),J.ajax_save_settings({$property:B.gFontTarget})},launch_img_uploader:function(r){wp.media.editor.send.attachment=function(e,t){var s=e.size?t.sizes[e.size].url:t.url;B.update_bg_image(r,s)},wp.media.editor.open("wpMediaFakePostID")},update_bg_image:function(e,t){var s=B.get_meta(e,"property").property.find(".property-input");t=-1<t.indexOf(B.siteUrl)&&!parseInt(B.pref.abs_image_paths)?W.root_rel(t,B.siteUrl):t,s.val(t),B.adjust_comp_span(s,"after"),W.scroll_input_end(s),J.ajax_save_settings({$property:s})},clear_bg_image:function(e){W.startT(arguments),B.update_bg_image(e,""),W.endT(arguments)},get_animation_name:function(e){return e.groupTab.find("input.property-input").val()},refresh_event_binding:function(){x&&x.stat.win.MT_Events_Manager&&x.stat.win.MT_Events_Manager.refresh_event_binding()},user_play:function(e,t,s,r){var a=e.animationConfig;x&&a.flashCSSRules&&a.animationName&&x.trigger_animation(a,r)},mt_scroll:{style:{offsets:[],rightPositions:[],rightPosIndex:-1},responsive:{offsets:[],rightPositions:[],rightPosIndex:-1},gridcolumns:{offsets:[],rightPositions:[],rightPosIndex:-1},gridrows:{offsets:[],rightPositions:[],rightPosIndex:-1}},scroll_row:function(e){var t,s,r=e.data("type");if("style"===r||"gridcolumns"===r||"gridrows"===r){var a=B.get_pg_meta();if(!a)return!1;s="style"===r?(t=a.groupTab,a.groupTab.find(".pg-inner")):(t=a.group.find(".tab-control-"+B.pref.grid_focus+"."+r).find(".mt-variable-line")).find(".mt-vl-inner")}else"responsive"===r&&(t=B.stat.res.find(".query-tabs-wrap"),s=B.stat.res.find(".query-tabs"));if(s){var o=B.get_row_excess(t,s,r);if(!o)return!1;var n,i=t.width(),l=Math.abs(parseInt(s.css("marginLeft")));if(e.hasClass("mt-scroll-left"))n=B.mt_scroll[r].rightPositions[B.mt_scroll[r].rightPosIndex-1],W.isDefined(n)?(B.mt_scroll[r].rightPositions.splice(B.mt_scroll[r].rightPosIndex,1),B.mt_scroll[r].rightPosIndex--):(n=0,B.mt_scroll[r].rightPositions=[],B.mt_scroll[r].rightPosIndex=-1);else{for(var c=l+i,d=o<c?o:c,_=B.mt_scroll[r].offsets,u=0;u<_.length;u++){if(d<_[u]){var p=_[u-1],f=_[u],d=l<p&&c<f?p:f;break}}if(l===d)return!1;B.mt_scroll[r].rightPositions.push(d),B.mt_scroll[r].rightPosIndex++,n=d}n*=-1,s.css("marginLeft",n+"px")}},adjust_scroll_buttons:function(e,t){if(W.startT(arguments),!e&&"responsive"!==t)return!1;var s,r,a,o=!1,n=!1;switch(t){case"style":r=(s=B.get_group(e)).find(".pg-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t),o="code"===e.groupSlug||"grid"===e.groupSlug,n="grid"===e.groupSlug;break;case"responsive":s=B.stat.res.find(".query-tabs-wrap"),r=B.stat.res.find(".query-tabs"),a=B.stat.res.find("div.scroll-lr-buttons");break;case"gridcolumns":case"gridrows":r=(s=e.group.find(".tab-control-"+B.pref.grid_focus+"."+t).find(".mt-variable-line")).find(".mt-vl-inner"),a=e.selector.find("li.scroll-lr-buttons-"+t)}if(!r)return!1;B.get_row_excess(s,r,t,"checkShow")&&!o?(a.addClass("buttons-showing"),s.addClass("hor-scroll-needed"),B.mt_scroll[t].rightPositions=[]):(B.mt_scroll[t].rightPositions=[],B.mt_scroll[t].rightPosIndex=-1,r.css("marginLeft","0px"),a.removeClass("buttons-showing"),s.removeClass("hor-scroll-needed")),n&&B.adjust_grid_line_scroll_buttons(e),W.endT(arguments)},adjust_grid_line_scroll_buttons:function(e){B.adjust_scroll_buttons(e,"gridcolumns"),B.adjust_scroll_buttons(e,"gridrows")},get_row_excess:function(e,t,s,r){W.startT(arguments);var a,o=e.width(),n=0,i=[],l=e.hasClass("property-grid");return(l?t.children().filter(".tab-control-"+B.pref.grid_focus):t.children()).each(function(e){var t=V(this);t.is(":visible")&&parseInt(t.css("opacity"))&&(n+=t.outerWidth(!0),i.push(n))}),(e.hasClass("property-border")||l)&&(n/=2),0<n-o&&(n+=50),a=n-o,B.mt_scroll[s].offsets=i,W.endT(arguments),0<a&&a},input_icon_toggle:function(e,t,s){W.startT(arguments);var r,a,o,n,i,l,c,d,_,u,p,f,g,m=e,v=e.attr("data-input-type"),h=e.attr("data-input-level"),b="pgtab"===h?"group":h,y=B.title(e),w=e.hasClass("active")?"":1,T=v+"-tracker",x=!1,k={domDepth:h,maxDepth:"selector",clean:{},cleanMaxDepth:"selector"},C="disabled"===v&&"tab"===h?e.closest(".mq-tab").attr("rel"):B.get_mq_focus(),S=B.get_input_stems(C),M=S.mq,j=S.imp;if("important"===v){E="tvr_mcth[non_section][important]"+j+"["+(P=B.get_meta(e,"property")).sectionSlug+"]["+P.selectorSlug+"]["+P.groupSlug+"]["+P.propertySlug+"]";var D=W.get_name_attr_index(P.property.find("input.property-input").attr("name"));!1!==D&&(E+="["+D+"]"),k.mq_key=C,k.recurse_key=["important"],k.clean.selector=[],x=!0}else if("disabled"===v){var O,I,q,z,E,x=!0,P="tab"===(k.itemWasDisabled=h)?B.get_meta(V("#"+B.selInFocusID),"selector"):B.get_meta(e,b);"section"===h?E=(L=B.disabled_quick_edit(P.sectionM,h,P)).find("input.section-display-name").attr("name").replace("[label]","["+v+"]"):"selector"===h?(E=(L=B.disabled_quick_edit(P.selectorM,h,P)).find("input.selector-label").attr("name").replace(/\[label\]$/,"["+v+"]"),k.clean.selector=[[v]]):"tab"===h?(L=e.closest(".mq-tab"),T+="-"+C,E=M+"["+P.sectionSlug+"]["+P.selectorSlug+"][tab]["+v+"]",m=P.selectorM.find("span.edit-selector"),k.domDepth="selector",k.mq_key=C,k.onlyRecurse="all-devices"!==C,k.incRecurse=k.onlyRecurse,k.recurse_key=["m_query"],k.clean.selector=[["tab"],[v]]):"subgroup"===h||"pgtab"===h?(L=e.closest("span.quick-opts-wrap"),I=(O="pgtab"===h)&&e.data("tab-group"),q=O?"pgtab_"+v:"pg_"+v,z=O?e.data("tab-group"):P.subgroupSlug,E=M+"["+P.sectionSlug+"]["+P.selectorSlug+"]["+q+"]["+z+"]",k.domDepth="group",k.mq_key=C,k.onlyRecurse="all-devices"!==C,k.incRecurse=k.onlyRecurse,k.recurse_key=["m_query"],k.clean.selector=[[q],[z]],(r=B.maybe_add_nth_index_filter(O,I,P,e,k.clean.selector))&&(E+="["+r+"]"),h="group"):"script"===h&&(L=e.closest("div.item-row"),E="tvr_preferences[enq_js]["+W.convert_to_param(L.find(".script-name").text())+"][disabled]")}else if("chained"===v){x=!0,P=B.get_meta(e,"subgroup"),w&&(a=B.get_subgroup_or_tabgroup(P,"inputs"),i=(n=!!W.isDomEl(B.inputWaitingObj)&&B.inputWaitingObj)?n.val():"",l=W.isDefined(i),V.fn.MTreverse=[].reverse,a.MTreverse().each(function(e){var t=V(this),s=t.val();l&&t.attr("name")===n.attr("name")&&(c=n),W.isDefined(s)&&(o=t)}),o&&(d=void 0,_=(c=c||o).closest(".property-tag").find(".css_unit-tracker"),W.isDomEl(_)&&(d=c.closest(".property-tag").find(".css_unit-tracker").val()),B.sync_fields(c,P,d))),E=M+"["+P.sectionSlug+"]["+P.selectorSlug+"][pg_"+v+"]["+P.subgroupSlug+"]",k.domDepth="group",k.mq_key=C,k.recurse_key=["m_query"],k.clean.selector=[["pg_"+v],[P.subgroupSlug]]}else if("flexitem"===v||"griditem"===v){var L=e.closest("div.property-fields"),F="tvr_mcth["+(P=B.get_meta(L.find("div.sub-label"),"group")).sectionSlug+"]["+P.selectorSlug+"]";if(E=F+"[pg_"+v+"]",k.domDepth="group",k.mq_key=C,k.recurse_key=["m_query"],k.clean.selector=[["pg_"+v]],"griditem"===v){var A={};K.fill_object_from_name(A,E,w);var H=w?0:1;return K.fill_object_from_name(A,F+"[nth_item]",H),J.quick_save_data(!1,A),"griditems"!==B.get_grid_focus()&&(B.pref.grid_focus="griditems"),B.trigger_pg_icon_click("grid"),!1}}w?(u='<input class="input-toggle-tracker '+T+'" type="hidden" name="'+E+'" value="1" />',e.addClass("active"),p="add",f=e.attr("data-neg"),m.before(u),"disabled"===v&&L.addClass("item-disabled"),"show_css_filters"===h&&e.addClass("on expanded"),"flexitem"!==v&&"griditem"!==v||L.add(B.stat.grid).addClass("show-single-"+v)):(e.removeClass("active"),p="remove",f=e.attr("data-pos"),(g=m.siblings("."+T)).val(""),"disabled"===v&&L.removeClass("item-disabled"),"show_css_filters"===h&&e.removeClass("on expanded"),"flexitem"!==v&&"griditem"!==v||L.add(B.stat.grid).removeClass("show-single-"+v)),B.refresh_tt(e,f);var N=J.h_i_class(h,P),$=e.attr("class"),R=!1,U=!1;"important"===v&&($+=" lg-icon",U="i",(R=!!B.chain_is_on(P)&&P.subgroupH+" "+TvrLang.fields_sync)&&!t&&B.sync_important(P,p)),s||(k.M=P,"chained"!==v&&(k.mtData={},K.fill_object_from_name(k.mtData,E,w)),"script"===h?V.extend(!0,B.pref,k.mtData):(t&&(k.return="mtData"),"show_css_filters"!==v&&(k=K.dom_to_data(k)))),w||g.remove(),s||t||"show_css_filters"===h||(k=J.user_action(k,{items:[h],val:y,valTT:R,M:P,pathTT:"section"===h,icon:[{icon:N},{icon:$,iconC:U}]}),x&&B.editor_and_gui()&&P&&P.selector&&G.gui_to_editor(!1,P),J.ajax_save_settings({settings:k})),W.endT(arguments)},get_input_stems:function(e){var t="tvr_mcth",s="";return"all-devices"!==e&&(t+="[non_section][m_query]["+e+"]",s="[m_query]["+e+"]"),{mq:t,imp:s}},maybe_add_nth_index_filter:function(e,t,s,r,a){var o=e?s.group.find(".property-tag.tab-control-"+t).first():r.closest(".subgroup-tag").next(".property-tag");if(o.hasClass("has-variable-line"))return!1;var n=o.find("input.property-input"),i=!!W.isDomEl(n)&&W.get_name_attr_index(n.attr("name"));return!1!==i&&a.push(["value"],[i]),i},disabled_quick_edit:function(e,t,s){return"section"==t&&B.is_cur("sec",s.sectionSlug)&&(e=e.add("#sec-in-focus")),"selector"==t&&B.is_cur("sel",s.selectorID)&&(e=e.add("#sel-in-focus")),e},auto_clean:function(e,t){W.startT(arguments),W.endT(arguments)},icon:function(e){return""},title:function(e){var t=e.data("ui-tooltip-title");return t||e.attr("title")},enable_tt:function(e){W.startT(arguments),e.tooltip({position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:!1,show:{effect:"none",duration:0,delay:B.tooltipDelay},open:function(e,t){W.startT(arguments);var s=B.get_tt(t),r=B.get_tt_trigger(e,this).data("dyn-tt-root");r&&s.html(V("#"+r).attr("title"));var a=s.find(".ui-tooltip-content").html();a&&(a=W.regular_escaped_to_non_escaped(a.replace(/&amp;/g,"&").replace(/\n/g,"<br />")),s.html(a)),W.endT(arguments)},close:function(e,t){B.tt=!1,B.tt_trigger={}}}),W.endT(arguments)},get_tt:function(e){return B.tt=e.tooltip},get_tt_trigger:function(e,t){return W.startT(arguments),B.tt_trigger=V(e.originalEvent.target||e.originalEvent.srcElement).closest(V(t).tooltip("option","items")),W.endT(arguments),B.tt_trigger},refresh_tt:function(e,s,r){W.startT(arguments),e.each(function(e){var t=V(this);"native"==B.tooltipDelay||!B.tt||r&&!t.is(r)?(t.attr("title",s),r&&r.data("dyn-tt-root")&&B.update_tt(B.tt,s)):B.update_tt(B.tt,s)}),W.endT(arguments)},update_tt:function(e,t){if(!W.isDomEl(e))return!1;var s=e.find(".ui-tooltip-content");(s=W.isDomEl(s)?s:e).html(t.replace("\n","<br />")),B.tt_trigger.data("ui-tooltip-title",t)},get_all_selector_code:function(){W.startT(arguments);var e,t={};for(var s in B.uiData)if(B.uiData.hasOwnProperty(s)&&"non_section"!=s&&B.uiData.hasOwnProperty(s))for(var r in B.uiData[s]){B.uiData[s].hasOwnProperty(r)&&"this"!=r&&B.uiData[s][r]&&B.uiData[s][r].label&&(e=B.uiData[s][r].label.split("|"),t["strk-"+s+"-"+r]={fName:B.uiData[s].this.label,sName:e[0],code:e[1]})}return W.endT(arguments),t},get_dom_item:function(e,t,s,r,a,o){var n,i,l,c=a?V.extend(!0,{},e,a):e,d="menu"===s?"strk":"opts";switch(t){case"section":case"selector":case"group":n=c.trail.item;break;case"subgroup":case"property":var _=W.prop_to_cssf(e.property_key),u=W.checkObject(TvrMT.data.prog.lh,[_,"sub_slug"]),p="subgroup"===t?"subgroup":e.property_key;if("animation"===e.group_key&&(u="animation"),!u)return!1;n=c.trail.root_to_group.concat([u,p,e.recurse.mq_key])}return i="#"+d+"-"+n.join("-"),l=o?o.find(i):V(i),!!W.isDomEl(l)&&(r?{$item:l,id:i,M:B.get_meta(l,t)}:l)},get_meta:function(e,t){W.startT(arguments),B.meta={};var s,r=["stub","section","selector","group","subgroup","property"];for(var a in r){r.hasOwnProperty(a)&&r[a]==t&&(s=(e.attr("class")&&0<=e.attr("class").indexOf(t+"-tag")?e:e.closest("."+t+"-tag")).attr("id").split("-"))}var o,n,i,l,c="";for(var d in s){s.hasOwnProperty(d)&&0!=d&&6!=d&&7!=d&&(t=r[d],c+="-"+s[d],"property"==t||"subgroup"==t?(o="property"==t?c+"-"+s[6]:c+"-subgroup-"+s[6],"all"==s[6]&&(s[6]+="-devices",o+="-devices"),B.meta.tabSlug=s[6],B.meta[t]=V("#opts"+o),B.meta.pgTabControlSlug=B.meta[t].data("pgtabcontol")):B.meta[t]=V("#opts"+c),n=s[d],B.meta[t+"Slug"]=n,"section"==t?(B.meta[t+"M"]=V("#strk"+c),B.meta[t+"T"]=B.meta[t+"M"].find("input.section-tracker"),B.meta[t+"H"]=B.meta.sectionM.find(".section-display-name").val(),B.meta[t+"ID"]="opts-"+B.meta.sectionSlug,B.meta[t+"MID"]="strk-"+B.meta.sectionSlug):"selector"==t?(B.meta[t+"M"]=V("#strk"+c),i=B.meta.selectorM.find(".selector-label").val().split("|"),B.meta[t+"T"]=B.meta[t+"M"].find("input.selector-tracker"),B.meta[t+"H"]=i[0],B.meta[t+"Code"]=i[1],B.meta[t+"ID"]="opts-"+B.meta.sectionSlug+"-"+B.meta.selectorSlug,B.meta[t+"MID"]="strk-"+B.meta.sectionSlug+"-"+B.meta.selectorSlug):"group"==t?(B.meta[t+"ID"]="opts-"+B.meta.sectionSlug+"-"+B.meta.selectorSlug+"-"+B.meta.groupSlug,l=B.get_mq_focus(),B.meta[t+"Tab"]=B.meta[t].find("div.property-fields-"+l),B.meta[t+"H"]=B.stat.css_icons.find("ul.styling-option-icons").find("li.pg-icon-"+B.meta.groupSlug).attr("title"),"animation"==n||"transition"==n?(B.meta.event=B.meta[t+"Tab"].find("input.mt-event-input").first().val(),B.meta.eventKey=B.meta.event?W.convert_to_param(B.meta.event):"",B.meta.eventValue=B.meta[t+"Tab"].find("input.mt-event-value-input").first().val()):B.meta.event=B.meta.eventKey=B.meta.eventValue=""):"subgroup"==t||"property"==t&&(B.meta.subgroupH=B.meta.subgroup.find("span.subgroup-label").text(),B.meta[t+"H"]=B.meta[t].find("span.option-label").text()))}return B.meta.tabSlug||(B.meta.tabSlug=B.get_mq_focus()),B.meta.tabH=B.get_tab_name(B.meta.tabSlug),W.endT(arguments),B.meta},get_pg_meta:function(e){if(!B.selInFocusID||!B.pref.pg_focus)return!1;var t=V("#"+B.selInFocusID);if(!W.isDomEl(t))return!1;var s=e?t.find("li.group-tag-"+B.pref.pg_focus).find("group-row-"+e):t.find("li.group-tag-"+B.pref.pg_focus);return!!W.isDomEl(s)&&B.get_meta(s,"group")},colorpicker_bind:function(e,t){W.startT(arguments);V("<div></div>");var s=!1,r=t?e:e.find("input.color:not(.bound)");r.each(function(){s=!0;var e=V(this),t=e.closest(".property-tag").attr("id");e.spectrum({appendTo:B.stat.styleComponents,belongsTo:t,containerClassName:"picker-belongs-to-"+t,showAlpha:!0,showInput:!1,allowEmpty:!0,showInitial:!0,preferredFormat:"rgb",showButtons:!1,showSelectionPalette:!0,localStorageKey:"shared_palette",maxSelectionSize:9,hide:function(e){B.$pickerContainer.draggable("destroy")},show:function(e){W.startT(arguments);var t,s=B.inputWaitingObj=V(this),r=B.get_meta(s,"property"),a=".picker-belongs-to-"+r.property.attr("id"),o=B.$pickerContainer=B.stat.styleComponents.find(a);o.hasClass("ui-draggable")||o.draggable({cancel:".combo-arrow, input, .palette-tile, .sp-palette-row-initial, .ui-menu, .palette-button, .refresh-icon"}),o.hasClass("extra-fields-added")||(t='<div class="sp-mt-inputs">',t+='<input type="number" min="0" max="1" step="0.1" class="sp-input-opacity sp-input">',t+='<input type="text" class="sp-input-rgb sp-input">',t+='<input type="text" class="sp-input-hsl sp-input">',t+='<input type="text" class="sp-input-hex sp-input">',t+='<div class="tvr-input-wrap input-var-wrap"><span class="color-var-label" title="'+TvrLang.color_var_label+'">VAR</span><input type="text" class="sp-input sp-input-var combobox has-suggestions" rel="color_extra"><span class="combo-arrow combo-dots"></span><span class="mt-clear-field"></span></div>',t+="</div>",o.addClass("extra-fields-added").append(t).wrapInner("<div class='sp-wrap'>"),o.find(".sp-clear").bind("click.mt",function(e){B.clear_spectrum_inputs(r,!0)})),B.draw_palette(o);var n,i,l=o.css(["top","left"]),c=parseInt(l.top),d=parseInt(l.left),_=B.all_options_left()?{top:c+10+"px",left:"0px"}:{top:"-1px",left:d+40+"px"};o.css(_),s.val()?B.maybe_set_variable_color(s.val(),s,o.find(".sp-input-var"))||B.update_spectrum_inputs(e,s,{},!0):(n=r.property.find("span.comp-style").find("span").attr("style"))&&("transparent"!=(i=n.split("background-color:"))[1]&&"rgba(0, 0, 0, 0)"!=i[1]||(i[1]="rgba(0, 0, 0, 1)"),B.update_spectrum(i[1],s,{},!0,!0),s.val(""),r.property.find(".sp-preview-inner").css("background-color","transparent").addClass("sp-clear-display")),W.endT(arguments)},move:function(e){B.update_spectrum_inputs(e,V(this),{},!0),B.timer.typing&&clearTimeout(B.timer.typing),B.timer.typing=setTimeout(B.done_typing,10)}}).on("dragstart.spectrum",function(e,t){B.colorPickerDragging=!0}).on("dragstop.spectrum",function(e,t){B.colorPickerDragging=!1}).addClass("bound")}),s&&t&&r.spectrum("show"),W.endT(arguments)},format_autocomplete_id:function(e,t){var s=e.closest(".property-tag"),r=s.attr("id"),a=t+"-belongs-to-"+r,o=s.hasClass("tab-control-gridtemplate"),n=s.hasClass("tab-control-gridauto");return(o||n)&&(a+="-input-nth-index-"+(e.closest(".tvr-input-wrap").index()+1),o&&(a+="-input-filter-"+e.closest(".vl-item").data("input-filter"))),{containerID:a,fieldID:r}},get_related_meta:function(e,t,s){var r,a,o,n,i,l,c,d,_=e+"-belongs-to",u="picker"===e?"sp-container":"ui-autocomplete";return!s&&t.hasClass(u)?(l=t.data(_),c=t.attr("id"),d=t,s=B.get_meta(V("#"+l),"property"),o=".tvr-input-wrap",(n=c.split(/(?:-input-nth-index-|-input-filter-)/g))[1]&&(o+=":nth-child("+n[1]+")"),n[2]&&(o+=" ."+n[2]),r=s.property.find(o).find("input.property-input"),"combo"===e&&d.siblings(".sp-input-var").length&&(a=d.siblings(".sp-input-var"))):(s=s||B.get_meta(t,"property"),r="picker"===e?s.property.find("input.property-input"):t.parent().find("input.property-input"),l=(i=B.format_autocomplete_id(r,e)).fieldID,c=i.containerID,d=V("#"+c)),{$input:r,$colorVarInput:a,$container:d,containerID:c,fieldID:l,M:s}},draw_palette:function(_){var e=B.get_meta(B.inputWaitingObj,"property"),u=this.get_related_meta("picker",!1,e),t=(_=_||u.$container).find("ul.mt-picker-palette");W.isDomEl(t)?t.replaceWith(B.color_palette()):_.prepend(B.color_palette()),B.$palette=_.find("ul.mt-picker-palette"),_.find("ul.mt-picker-palette").on("click.mt-spectrum","span.full-palette-toggle, span.palette-button, span.refresh-icon, span.tile-color",function(e){var t,s,r,a,o,n,i,l,c=V(e.target),d=u.$input;c.hasClass("full-palette-toggle")?B.toggle_feature(c):c.hasClass("tile-color")?(B.$palette.find("span.tile-selected").removeClass("tile-selected"),n=c.data("color"),B.maybe_set_variable_color(n,d,_.find(".sp-input-var"))||B.update_spectrum(n,d,{},!0),t=c.data("id"),J.ajax_save_settings({context:"redrawPalette",$property:d}),s=(c=B.$palette.find("span."+t)).parent(),c.addClass("tile-selected"),a=(r=B.$palette.find("div.saved-colors-wrap")).find("span.mt-save-color"),o=r.find("span.mt-remove-color"),s.hasClass("saved-tile")?(a.removeClass("show"),o.addClass("show")):(a.addClass("show"),o.removeClass("show"))):c.hasClass("palette-button")?(i=n=_.find(".sp-input-var").val()||d.spectrum("get").toRgbString(),l=!1,c.hasClass("mt-remove-color")&&(i=!1,l=n=B.$palette.find("span.tile-selected").data("color")),K.splice_sug_val(i,l,"color","saved",{redrawPalette:1,save:!0})):c.hasClass("refresh-icon")&&K.refresh_sug_values({specific:"color",$resample:c})})},color_palette:function(){var e,t=V("#mt-picker-palette").clone().removeAttr("id"),s=t.find("li.view-full-palette"),r=B.pref.my_props.sug_values.color,a=r.recent,o=r.saved,n=r.sampled;return B.pref.full_color_palette&&(e=s.find("span.full-palette-toggle")).addClass("on").attr("title",e.data("neg")),t.find("ul.mt-picker-palette").html(V(B.color_palette_tiles("mini","recent",B.numMiniTiles-1,a)).add(s)),t.find("ul.recent-full-palette").html(B.color_palette_tiles("full","recent",B.numMiniTiles,a)),t.find("ul.saved-full-palette").html(B.color_palette_tiles("full","saved",B.numSavedTiles,o)),t.find("ul.site-full-palette").html(B.color_palette_tiles("full","site",B.numSiteTiles,n)),t},isVariableTile:function(e){var t="";return e&&(-1<e.indexOf("var(")?t="var":-1<e.indexOf("$")&&(t="$")),t},color_palette_tiles:function(e,t,s,r){for(var a="",o=0;o<s;++o){var n=r[o],i=n&&-1<n.indexOf("$")?K.get_variable_value(n,"scss"):n,l=B.pref.color_as_hex?W.maybe_to_hex(n):n,c=n?'title="'+l+'"':"",d=n?'style="background-color:'+i+'"':"",_=n?"has-color":"no-color",u=e+"-"+t+"-"+o,p=B.isVariableTile(n);a+='<li class="'+e+"-tile "+t+"-tile  palette-tile "+_+'">'+(n?'<span class="tile-color '+u+'" data-color="'+n+'" data-id="'+u+'" '+d+" "+c+">"+p+"</span>":"")+"</li>"}return a},picker_method:function(e){W.startT(arguments),W.isDomEl(B.inputWaitingObj)&&("hide"===e?B.inputWaitingObj.spectrum("hide"):"clickpick"===e&&B.get_meta(B.inputWaitingObj,"property").property.find(".sp-container").trigger("mouseup")),W.endT(arguments)},update_spectrum:function(e,t,s,r,a){W.startT(arguments);var o=tinycolor(e),n=o.toRgb();tinycolor(n).isValid()&&(t.spectrum("set",n),B.update_spectrum_inputs(o,t,s,r,a),a||B.adjust_comp_span(t,"after"),W.endT(arguments))},update_spectrum_inputs:function(e,t,s,r,a){var o;W.startT(arguments),e?(a||t.val(e.toRgbString()),(o=this.get_related_meta("picker",t).$container).find(".sp-input-hex").not(s).val(e.toHexString()),o.find(".sp-input-rgb").not(s).val(e.toRgbString()),o.find(".sp-input-hsl").not(s).val(e.toHslString()),o.find(".sp-input-opacity").not(s).val(e.toRgb().a),o.find(".sp-input-var").not(s).val(""),r&&!a&&B.maybe_sync_fields(t),W.isDomEl(s)&&s.focus(),W.endT(arguments)):t.val("")},clear_spectrum_inputs:function(e,t){W.startT(arguments);var s=e.property.find("input.color");e.property.find("input.sp-input, input.color").val("").end().find("div.sp-alpha-inner, div.sp-preview-inner").css("background-color","transparent").end().find("div.sp-preview-inner").addClass("sp-clear-display"),B.adjust_comp_span(s,"after"),t&&(B.picker_method("hide"),B.maybe_sync_fields(s)),W.endT(arguments)},update_count:function(e,t,s,r,a){W.startT(arguments),W.hasValue(a)||(a=0);var o,n,i,l,c,d=parseInt(e.attr("rel"));"add"==t?o=d+parseInt(s):"subtract"==t&&(o=d-parseInt(s)),e.attr("rel",o),"section"!=r&&(0==d&&e.after(' <span class="folder-count-wrap count-wrap">(<span class="folder-state-count state-count"></span>)</span>'),0==o?e.next("span").remove():e.next("span").find(".state-count").text(parseInt(o))),"section"==r?(n=V("#total-sec-count"),i=parseInt(n.text()),d<o?(B.totalSecs=parseInt(i+s),n.text(B.totalSecs),B.totalSels=B.totalSels+parseInt(a)):(B.totalSecs=parseInt(i-s),n.text(B.totalSecs),B.totalSels=B.totalSels-parseInt(a)),V("#total-sel-count").text(parseInt(B.totalSels))):"selector"==r&&(l=V("#total-sel-count"),c=parseInt(l.text()),B.totalSels=d<o?parseInt(c+s):parseInt(c-s),l.text(B.totalSels)),B.toggle_enabled_buttons(),W.endT(arguments)},com_data_loading:function(e,t,s){W.startT(arguments),e.find("."+t+"-row").append(V(B.templates.loaders[t]).removeAttr("id")),J.update_prog_indicator("plus",TvrLang.load_style_opt),W.endT(arguments)},com_data_finished_loading:function(e,t){W.startT(arguments),e.find("img.ajax-loader").remove(),J.update_prog_indicator("minus",t,TvrLang.load_style_opt),W.endT(arguments)},ajax_load_revisions_table:function(){W.startT(arguments),J.update_prog_indicator("plus",TvrLang.load_revisions_table),V.ajax({type:"GET",url:B.ajaxUrl,data:"mt_action=get_revisions",async:!0,timeout:B.tOut,error:function(e,t){W.startT(arguments),J.update_prog_indicator("minus",{short:TvrLang.load_revisions_table_failed,long:"<p>"+B.handle_ajax_error(e,t)+"</p>"},TvrLang.load_revisions_table),W.endT(arguments)},success:function(e){W.startT(arguments);var t=V(e).html();V("#revision-area").html(t),J.update_prog_indicator("minus",!1,TvrLang.load_revisions_table),W.endT(arguments)},complete:function(){W.startT(arguments)}}),W.endT(arguments)},update_wizard_html:function(e){W.action_after_timeout("wizard_html_expensive",3,{item:function(e){W.startT("update_wizard_html_inner");var t,s,r="";e.bindOnly||(x.dom,s=x.stat.html[0].outerHTML,t=B.custom_wizard_html_replace(),s=B.truncate_html_string(s,["noscript","script","style","path"],!1,t.pattern,t.repl),r=html_beautify(s,{html:{no_preserve_newlines:!0,max_preserve_newlines:0,indent_inner_html:!0,indent_handlebars:!0,indent_size:2,wrap_line_length:0,inline:[],extra_liners:[],unformatted:[],content_unformatted:[]}}));G.update_arbitrary_editor({context:"wizardHTML",editorID:"wizard_inspector_html",data:r,mode:"html",filterClass:"wizard_inspector_html",containerClass:".css-code-wrap",dontSetHeight:!0,readOnly:!0,fontSize:"12px",noValidation:!0,directContent:r,mirrorRender:!e.updateVisEditor,dontScrollHTML:e.dontScrollHTML});W.endT("update_wizard_html_inner")},args:[e]})},custom_wizard_html_replace:function(){var e={pattern:!1,repl:""},t=v.get_active_builder();return t&&v.get(t).runIfExists("wizardHtmlReplace",[e]),e},truncate_html_string:function(e,t,s,r,a,o){return W.startT(arguments),t&&(e=e.replace(new RegExp(K.reg.html_tag({tag:t.join("|")}),"gm"),"<$1>(MT truncated)</$1>")),s&&(e=e.replace(new RegExp(K.reg.html_att({att:s.join("|")}),"gm"),'$1="(MT truncated)"')),r&&(a=a||"",e=e.replace(r,a)),W.endT(arguments,1),e},update_wizard_html_scroll:function(e){var t=W.checkObject(G.aceIndexMap.indexes,[x.triggerElIndex,"row"]),s=!!t&&t+1;return G.go_to_line_in_editor(s,G.eds.wizard_inspector_html,e)},breadcrumb_clicked:function(e){var t=parseInt(e.data("level")),s=-1<t?x.dom.nodes[t].family.el.fullObj:x.dom.nodes[0].family.child.m[0].obj;B.dom_nav_option_used(s)},update_breadcrumbs:function(){if(x&&x.dom.nodes){var e=V("#dom-bread"),t=e.find(".drag-containment"),s=e.find(".drag-content");V.extend(!0,[],x.dom.nodes).reverse();for(var r="",a=x.dom.nodes.length-1,o=a;0<=o;o--){var n=o!=a?'<span class="bc-sep">&raquo;</span>':"";r+=n+'<span class="mt-breadcrumb'+(0===o?" active-crumb":"")+'" data-level="'+o+'">'+x.dom.nodes[o].elBcLabel+"</span>"}var i=x.dom.nodes[0].family.child;i.count&&(r+=n+'<span class="mt-breadcrumb child-crumb" data-level="-1">'+i.m[0].bcLabel+"</span>"),s.css("width","auto").html(r);var l,c=s.width(),d=e.width(),_=0,u="default",p=c;s.width(c).css("left","0"),d<c?(_="-"+(l=c-d)+"px",u="e-resize",p=d+2*l,B.stat.breadcrumbs.draggable("enable")):B.stat.breadcrumbs.draggable("disable"),t.width(p).css({left:_,cursor:u})}},update_dom_arrows:function(e){W.startT(arguments);var t=V("#selector-naming").find(".refine-target-controls");t.find("span").addClass("disabled");var s=x.dom.nodes[0].family;s.par.count&&t.find("span.tvr-parent").removeClass("disabled"),s.prev.count&&t.find("span.tvr-prev-sibling").removeClass("disabled"),s.next.count&&t.find("span.tvr-next-sibling").removeClass("disabled"),s.child.count&&t.find("span.tvr-child").removeClass("disabled"),W.endT(arguments)},switch_html_element:function(e){var t=!1,s=x.dom.nodes[0].family,r=e.attr("class");0<=r.indexOf("tvr-parent")?t=s.par.m[0].obj:0<=r.indexOf("tvr-child")?t=s.child.m[0].obj:0<=r.indexOf("tvr-prev-sibling")?t=s.prev.m[0].obj:0<=r.indexOf("tvr-next-sibling")&&(t=s.next.m[0].obj),t&&B.dom_nav_option_used(t)},dom_nav_option_used:function(e,t){t=V.extend({},{scroll:!0,selectElement:!0},t),B.redo_sug_sels("",!0),x.all_targeting_actions(e,t)},update_view_css:function(e,t,s,r){var a;W.startT(arguments),"loadNew"==s?(G.generated_css_auto_line_done={},B.server_scss&&r&&(a=r.find("#scss-line-error"),W.isDomEl(a)?(B.scss_error={line:a.data("line"),tabKey:a.data("tab")},B.stat.tvr.addClass("cur_scss_error")):(B.scss_error=!1,B.stat.tvr.removeClass("cur_scss_error"))),B.stat.view.find("div.dialog-tab-field").each(function(e){var t,s=V(this).find("div.view-file").find("a").attr("href");s?J.simple_ajax_request({url:s,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:B.update_view_css,cbfArgs:[e]}):(B.stat.view.find(".dialog-tab-"+e),t=!!B.scss_error&&B.scss_error.fullString||B.previousSCSSCompile,B.update_view_css(t,e))})):G.update_arbitrary_editor({context:"viewCSS",editorID:"generated-css-"+t,data:e,filterClass:"generated-css",readOnly:!0,directContent:e,index:t}),W.endT(arguments)},update_inspector_stylesheet:function(e,t,s){W.startT(arguments),"loadNew"==s?J.simple_ajax_request({url:t.url,plus:TvrLang.retrieve_css,minus:TvrLang.retrieve_css_failed,cbFunction:B.update_inspector_stylesheet,cbfArgs:[t]}):G.update_arbitrary_editor({context:"inspectorStylesheet",editorID:"inspect_stylesheet_preview",data:e,filterClass:"inspect_stylesheet_preview",readOnly:!0,directContent:e,containerClass:".content-main",find:t}),W.endT(arguments)},ui_reset:function(e){if(W.startT(arguments),!confirm(TvrLang.reset_settings_confirm))return!1;J.pending_auto_saves("clear");var t=B.ajaxUrl,s=TvrLang.reset_empty_folders;J.general_ajax_submission("reset",t,s,"GET","mt_action=tvr_ui_reset"),W.endT(arguments)},get_css_filter_alias:function(e,t){W.startT(arguments);var s=V("#css-filters"),r=B.pseudo_class_format(e.closest("li").data("pref_sub_key")),a=(W.isDomEl(e.closest("#fav-filters"))?s.find("span.quick-opts-wrap"):V("#fav-filters")).find("li."+r);return W.endT(arguments),"favourite_filter"!=t?a:a.find(".star-icon")},clear_css_filters:function(r){W.startT(arguments),V("#css-filters").find("ul.css-filter-list").find("li.css-filter-item").each(function(e){var t=V(this),s=r&&"page_specific"===t.data("type");t.hasClass("on")&&!s&&B.toggle_feature(t)}),W.endT(arguments)},clear_styles:function(e,t,s){if(W.startT(arguments),!confirm(TvrLang.clear_styles_confirm))return!1;var r=B.ajaxUrl,a=TvrLang.clear_styles;J.general_ajax_submission("clear",r,a,"GET","mt_action=tvr_clear_styles"),W.endT(arguments)},site_pages_previous_result:[],site_pages_cache:{},site_pages_latest_term:null,get_item_from_previous_results:function(e,t){t=t||this.site_pages_previous_result;for(var s=0;s<t.length;s++){var r=t[s];if(e===r.value)return r}return!1},filter_matching_results:function(e,t){for(var s=[],r=0;r<t.length;r++){var a=t[r],o=a?a.value+a.label+a.category:"";e&&!o.match(new RegExp(W.escapeRegExp(e),"i"))||s.push(a)}return s},prepend_recent_paths:function(e,t){for(var s=[],r=TvrMT.data.prog.combo.custom_paths,a=0;a<r.length;a++){var o=r[a],n=o===Object(o),i=n?o.label:o,l=n?o.value:o;-1<l.indexOf("ct_template")||s.push({label:i||l,value:l,category:TvrLang.recent})}return s.concat(t)},clear_recent_page_path:function(e,t){t.preventDefault();for(var s=V("#previewPath"),r=e.parent().attr("data-path"),a=TvrMT.data.prog.combo.custom_paths,o=a.length-1;0<=o;o--){var n=a[o];r===(n===Object(n)?n.value:n)&&a.splice(o,1)}s.MTautocomplete("search",s.val()),J.simple_ajax_request({type:"POST",url:B.ajaxUrl+"&update_custom_paths=1",sendData:J.serialized_data_with_single_key(JSON.stringify(a)),plus:"",minus:""})},return_page_results:function(e,t,s,r){var a;B.site_pages_previous_result=s,s=B.prepend_recent_paths(e,s),s=B.filter_matching_results(e,s),r&&(B.site_pages_cache[e]=s,9<(a=Object.keys(B.site_pages_cache)).length&&delete B.site_pages_cache[a[0]]),t(s)},get_site_pages:function(e,r){var a,t=e?e.term.toLowerCase():null;(B.site_pages_latest_term=t)?B.site_pages_cache[t]?B.return_page_results(t,r,B.site_pages_cache[t]):(B.return_page_results(t,r,B.site_pages_previous_result),(a=B.stat.changeUrlInputWrap).addClass("active"),W.action_after_timeout("site_page_search",200,{item:function(e){J.simple_ajax_request({type:"GET",url:B.ajaxUrl+"&get_site_pages=1&search_term="+t,cbFunction:function(e,t){var s=JSON.parse(e);B.return_page_results(B.site_pages_latest_term,r,s,!0),a.removeClass("active")},cbfArgs:[t]})},args:[{}]})):B.return_page_results(t,r,TvrMT.data.dyn.site_pages)},restore_rev:function(e){if(W.startT(arguments),!confirm(TvrLang.restore_settings_confirm))return!1;var t=B.ajaxUrl,s=TvrLang.restore_settings,r=e.attr("rel");J.general_ajax_submission("restore",t,s,"GET",r),W.endT(arguments)},toggle_revision_save_status:function(e){var t,s=e.add(e.closest("tr")),r=e.hasClass("revision-is-saved")?(s.removeClass("revision-is-saved"),t=0,"pos"):(s.addClass("revision-is-saved"),t=1,"neg");B.refresh_tt(e,e.data(r)),V.get(B.ajaxUrl+"&rev_save_status="+t+"&rev_id="+e.attr("rel"),function(){})},set_input_timer:function(e){e=e||B.inputTypingInterval,B.timer.typing&&clearTimeout(B.timer.typing),B.timer.typing=setTimeout(B.done_typing,e)},set_defer_save_timer:function(e,t){var s="save"+t;B.timer[s]&&clearTimeout(B.timer[s]),B.timer[s]=setTimeout(J.action_save,B.beforeSaveInterval,e)},extract_inner_styles:function(e){var t=(e=(e=W.remove_only_last_char(e,"}")).split("{"))[1]?e[1]:"";return t&&(e.shift(),t=e.join("{")),t.trim()},post_edit:function(e){W.startT(arguments),e.each(function(e){var t=V(this);B.update_input_width_and_scroll(t),B.adjust_comp_span(t,"after")}),W.endT(arguments)},adjust_event_fields:function(e){var t,s=W.convert_to_param(e.val()),r=e.closest(".field-wrap"),a=r.siblings(".event-target-field"),o=r.siblings(".event-value-field");W.hasValue(s)?(t=o,"css"!==K.event_type(s)?t=t.add(a):B.hide_property_fields(a),t.addClass("show-event-fields")):(t=o.add(a),B.hide_property_fields(t)),x.after_animation(t.first(),{type:"transition",cb:function(){B.adjust_scroll_buttons(B.get_pg_meta(),"style")}})},get_default_unit:function(e,t){return W.checkObject(B.pref,["my_props",e,"pg_props",t,"default_unit"],!0)},get_factory_default_unit:function(e,t){return e=e||W.prop_to_cssf(t),W.checkObject(TvrMT.data.prog.lh,[e,"fdu"],!0)},update_default_unit:function(e,t,s){W.updateObject(B.pref,["my_props",e,"pg_props",t,"default_unit"],s)},maybe_set_unit:function(e,t,s,r,a){if(!r)return!1;var o=void 0!==e.unit?e.unit:B.get_default_unit(t,s);if(W.isDefined(o)){r=r.trim().replace(/=(?:.+)(\(.*?\))/g,function(e){return e.replace(/ /g,"")});var n={val:r,converted:!1,calc:""};if(r.indexOf(" ")<0)n=B.do_conversion(r,o,s,0,a);else{var i,l=[],c=r.split(" ");for(var d in c){c.hasOwnProperty(d)&&(i=B.do_conversion(c[d],o,s,d,a),l[d]=i.val,i.converted&&(n.converted=!0,n.calc+=0!=d?", "+i.calc:i.calc))}n.val=l.join(" ")}return n}},do_conversion:function(e,t,s,r,a){var o={val:e,converted:!1,calc:""};return S.unitCouldBeAdded(e,t)?t&&(o.val=e+t,o.converted=!0):"="===e.charAt(0)&&(o=B.process_excel_function(e,s,r,a)),o},process_excel_function:function(e,t,s,r){var a={val:e,converted:!1,calc:""},o=e.split("(");if(!o[0]||!o[1]||o[1].indexOf(")")<0)return a;var n=o[0].replace("=",""),i=o[1].replace(")","").split(",");for(var l in i)if(i.hasOwnProperty(l)&&(i[l]=i[l].trim(),!W.isDefined(i[l])))return a;var c=B.nodeCSS[0];return c?(i[1]&&(c=B.nodeCSS[i[1]-1]),B.auto_convert(i[0],n,c,t,e,s,r)):(J.log({short:"Auto-conversion could not be calculated",long:"<p>The current selector may not target any elements on the current page.</p>",type:"warning"}),a)},auto_convert:function(e,t,s,r,a,o,n){W.startT(arguments);var i,l,c,d,_,u,p,f={val:a,converted:!1,calc:""},g=r,m=!1,v=TvrMT.data.prog.autoMap;if(v[g]&&v[g][t]){if(!V.isPlainObject(v[g][t])&&!v[g][t][0])return n&&(p={short:"Auto-conversion aborted",long:"<p>"+v[g][t]+"</p>",type:"warning"},J.log(p)),W.endT(arguments),f;i=v[g][t].node,l=v[g][t].prop,V.isArray(l)&&(l=l[o]),l=l.replace(/_/g,"-"),c=parseInt(s[i][l].replace("px","")),W.hasValue(v[g][t].tip)&&(m="<p>"+v[g][t].tip+"</p>")}return"%"===t?(d=e/c*100,_=e+"px / "+c+"px * 100 = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") multiplied by 100 = <b>"+d+t+"</b>"):"em"!==t&&"rem"!==t||(l="font-size",d=e/(c="em"==t?(i="font_size"==g?"parent":"element",parseInt(s[i]["font-size"].replace("px",""))):(i="HTML base",B.baseFontSize)),_=e+"px / "+c+"px = "+parseFloat(d.toFixed(3).toString())+t,u=e+"px divided by "+c+"px ("+i+" "+l+") = <b>"+d+t+"</b>"),d&&(n&&(p={short:_,long:"<p>"+TvrLang.auto_conversion_performed+": <b>"+a+"</b><br />"+u+"<br />"+TvrLang.auto_values_rounded+"</p>",type:"info"},m&&(p.long+=m),J.log(p)),f={val:parseFloat(d.toFixed(3).toString())+t,converted:!0,calc:_}),W.endT(arguments),f},update_packs_obj:function(e){TvrMT.data.prog.combo.directories[TvrMT.data.prog.combo.directories.length]=e,TvrMT.data.prog.combo.directories.sort()},set_import_field:function(e){V("#import_from_pack_name").val(e)},handle_ajax_error:function(e,t){return 0==e.status?TvrLang.error_connection:404==e.status?TvrLang.error_404:500==e.status?TvrLang.error_500:"parsererror"==t?TvrLang.error_parser:"timeout"==t?TvrLang.error_timeout:TvrLang.error_unknown+"\n"},email_error_report:function(){W.startT(arguments),J.update_prog_indicator("plus",TvrLang.send_error);var e=B.ajaxUrl+"&mt_action=tvr_error_email",t=V("#error-report-form").serialize();V.ajax({type:"POST",url:e,data:t,timeout:B.tOut,error:function(e,t){J.update_prog_indicator("minus",{short:TvrLang.send_error_failed,long:"<p>"+B.handle_ajax_error(e,t)+"</p>"},TvrLang.send_error)},success:function(e){var t,s=V(e).html();t=null==s?{short:"Email report failed",long:"<p>Reason unknown.</p>"}:J.extract_status(V(s)),J.update_prog_indicator("minus",t,TvrLang.send_error)}}),W.endT(arguments)},show_dialog:function(e){W.startT(arguments),B.close_dialog();var r,a,t,s,o,n,i,l,c=(e=e.attr("rel")?e:e.closest("*[rel]")).attr("rel");if("not-yet"===c)return!1;V("#"+c+"-dialog").addClass("show"),"import-from-pack"==c&&(W.hasValue(e.attr("data-pack-name"))&&V("#import_from_pack_name").val(e.attr("data-pack-name")),V("#preview-import-css-0").hasClass("ace_editor")||K.update_import_css_editor("")),"export-to-pack"==c&&(r="",V("#tvr-menu").find(".section-tag").each(function(){var e=B.get_meta(V(this),"section"),t="",s="";0<parseInt(e.sectionM.find(".selector-count-state").attr("rel"))&&(t='checked="checked"',s="on"),r+='<li><input type="checkbox" name="export_sections['+e.sectionSlug+']" '+t+' /> <span class="fake-checkbox '+s+'"></span><span class="folder-icon tvr-icon"></span><span class="ef-label">'+e.sectionH+"</span></li>"}),V("#available-folders").html(r),a=V("#custom-css"),B.stat.code.find("textarea.hand-css-textarea").each(function(e){var t=V(this),s=a.find(".custom-"+t.attr("id"));W.hasValue(t.val())?W.check_fake(s):W.uncheck_fake(s)}),V("#export_to_pack").val(1),V("#export_pack_name").val(""),V("#toggle-checked-folders").find("input").prop("checked",!1).end().find(".fake-checkbox").removeClass("on")),"display-css-code"==c&&(t=V("#scss-line-error"),s=W.isDomEl(t)?B.title(t):B.title(e.find(".mt-menu-text")),o=J.user_action(J.noNewData,{items:[s],val:!1,icon:"display-css-code lg-icon"}),J.ajax_save_settings({context:"view-css",settings:o,noSaveDelay:!0})),"inspect-stylesheet"==c&&(i=(n=W.escapeRegExp(e.data("selector")))+"\\s*?{",l={url:e.data("href"),media:e.data("media"),selector:n,findSelectorParts:!0,selectorPattern:i},B.update_inspector_stylesheet(!1,l,"loadNew")),"display-revisions"==c&&B.ajax_load_revisions_table(),"manage-design-packs"==c&&B.reload_iframe(e,"manage"),"google-fonts"==c&&(B.gFontTarget=e.closest(".field-wrap").find(".property-input"),B.reload_iframe(e,"google_fonts")),"program-docs"!==c&&"get-started-tips"!==c||B.reload_iframe(e,"docs",V("#docs-url").attr("rel"),!0),W.endT(arguments)},close_dialog:function(){W.startT(arguments),B.stat.tvr.find("div.tvr-dialog").removeClass("show"),V("#export_to_pack, #new_pack").val(0),W.endT(arguments)},reload_docs_iframe:function(e){W.startT(arguments);var t="docs_iframe",s=V("#docs-url").attr("rel");W.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),W.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),W.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"));V("#"+t);window.frames[t].location=s,W.endT(arguments)},reload_iframe:function(e,t,s,r){var a=t+"_iframe",o=V("#"+a);s=s||o.attr("rel"),"docs"===t&&(W.hasValue(e.attr("data-docs-index"))&&(s+="&docs_index=1"),W.hasValue(e.attr("data-prop-group"))&&(s+="&prop_group="+e.attr("data-prop-group")),W.hasValue(e.attr("data-prop"))&&(s+="&prop="+e.attr("data-prop"))),(r||"1"!==o.attr("data-frame-loaded")||W.isDomEl(e.closest(".dialog-footer")))&&(window.frames[a].location=s,o.attr("data-frame-loaded",1))},toggle_help_info:function(e){e.next().slideToggle("fast",function(){})},scroll_to_bottom:function(e){W.startT(arguments)},toggle_multi_checkboxes:function(e){W.startT(arguments);var t=V("#available-folders, #custom-css");e.hasClass("on")?t.find("input").prop("checked",!1).end().find(".fake-checkbox").add(e).removeClass("on"):t.find("input").prop("checked",!0).end().find(".fake-checkbox").add(e).addClass("on"),W.endT(arguments)},get_dyn_meta:function(e){W.startT(arguments);var t=e.closest(".dyn-wrap");B.dyn_meta={wrap:t,slug:t.data("slug"),add_input:t.find(".new-item-input"),add_button:t.find(".new-item-add"),menu:t.find(".tvr-dyn-menu")};var s=e.closest("li.dyn-item");return W.isDomEl(s)&&(B.dyn_meta.item=s),W.endT(arguments),B.dyn_meta},dyn_add_item:function(e){W.startT(arguments);var t=B.get_dyn_meta(e),s=t.add_input.val(),r=t.wrap.data("base-key");if(r)var a={newName:r+=t.menu.find("li.dyn-item").length+1,newNameHuman:s};else if(!(a=W.new_name_checks(s,TvrLang.item)))return!1;var o=B.dom_replacements(!1,"dyn_item",V(B.templates[t.slug+"_menu_item"]),"item",a.newName,a.newNameHuman);t.menu.append(o).find("li").filter(":last").hide().fadeIn("fast",function(){t.add_input.val(""),"mqs"==t.slug&&B.toggle_edit_item(V(this).find(".edit-item"))}),W.endT(arguments)},toggle_edit_item:function(e){W.startT(arguments);var t=B.get_dyn_meta(e).item.find(".edit-item-form");t.hasClass("show")?t.removeClass("show"):t.addClass("show"),W.endT(arguments)},delete_item:function(e){W.startT(arguments),e.closest("li").fadeOut("slow",function(){V(this).remove()}),W.endT(arguments)},reveal_form_opts:function(e){W.startT(arguments);var t=e.attr("rel"),s=e.closest("li").siblings(".hidden."+t);s.hasClass("show")?s.removeClass("show"):s.addClass("show"),W.endT(arguments)},toggle_system_menu_options:function(e){W.startT(arguments);var t=(e=e.closest("li")).find(".tvr-input-wrap"),s=e.find(".mt-menu-text"),r=e.closest("ul");t.hasClass("show")?(s.text(s.data("ll")),r.removeClass("expanded"),t.removeClass("show")):(s.text(s.data("sl")),r.addClass("expanded"),t.addClass("show")),W.endT(arguments)},change_preview_url:function(e,t,s){W.startT(arguments);var r=e.closest("li"),a=parseInt(B.pref.mt_nonlog),o=r.find("input.combobox").val(),n=!!o&&W.extract_url_path(o),i=n?W.rtrim(B.homeUrl,"/")+n:"";!i&&x&&(i=x.get_current_url()),i&&i.indexOf(B.adminUrl)<0&&J.update_prog_indicator("plus",TvrLang.load_wp),B.toggle_preview_page_menu(r.closest(".preview_page").find(".mt-group-heading-preview_page"));var l,c=!a&&r.find('input[name="launch_builder"]').is(":checked");c&&((l=t?t.item:B.get_item_from_previous_results(W.extract_url_path(i))||{}).url=i,c=v.launchBuilderOnNewPage(l)),c||(i=a?(i=W.strip_page_builder_and_other_params(i),i=W.append_url_param(i,"mt_nonlog"),W.append_url_param(i,"_wpnonce",TvrMT.data.dyn.ui_config.mt_nonlog_nonce)):W.strip_url_param(i,"mt_nonlog"),v.maybeReleaseBuilderEditLockBeforeExit(i)),W.endT(arguments)},after_style_options_deleted:function(e){B.totalSels<1&&B.toolbar_adjusted()},menuOrder:{},refresh_sortable:function(){W.startT(arguments);for(var s=document.getElementById("tvr-menu"),e=s.getElementsByClassName("selector-sub"),t={scroll:!0,scrollSensitivity:50,scrollSpeed:10,onStart:function(e){var t=V(e.item);W.currentlySorting=t.hasClass("section-tag")?"section":"selector",V(s).addClass("sorting-in-progress"),B.get_dom_order({},t,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1)},onEnd:function(e){W.currentlySorting=!1,V(s).removeClass("sorting-in-progress"),B.get_dom_order({},V(e.item),B.menuOrder,!0)}},r=V.extend(!0,{},t,{group:"folders",handle:".folder-icon",onUpdate:function(e){var t=B.get_meta(V(e.item),"section"),s=t.sectionM.prev().attr("id");W.hasValue(s)?t.section.detach().insertAfter("#"+s.replace("strk","opts")):t.section.detach().prependTo("#tvr-options"),W.hasValue(B.selInFocusID)&&B.update_prev_next_sel_buttons(B.selInFocusID)}}),a=V.extend(!0,{},t,{group:"selectors",handle:".selector-sortable-icon",onMove:function(e,t){if(-1<e.related.className.indexOf("strk-sec"))return!1},onUpdate:function(e){B.mirror_move_and_log({},e)},onAdd:function(e){B.selector_received({},e)}}),o=(new Sortable(s,r),[]),n=0;n<e.length;n++)o[n]=new Sortable(e[n],a);W.endT(arguments)},get_dom_order:function(e,t,r,a,s){var o,n,i,l,c=t.closest("ul"),d=t.hasClass("section-tag")?"section":"selector",_="section"==d?["root"]:["section"],u=B.get_meta(t,d);return"selector"==d?(o=c.closest(".section-tag"),a?r.newSec=o.attr("id").replace("strk-",""):r.prevSec=u.sectionSlug,r.moved_item=u.selectorSlug):r.moved_item=u.sectionSlug,s&&!a?(n="section"==d?B.uiData:B.uiData[u.sectionSlug],r.orig_order=Object.keys(n)):c.find("> li").not(".sortable-ghost, .add-selector-list-item").each(function(e){var t=V(this),s=B.get_meta(t,d)[d+"Slug"];a?r.new_order.push(s):r.orig_order.push(s)}),a&&(r.syncRenameConfig&&(e=C.modify_main_js_object("rename",e,B.menuOrder.syncRenameConfig),r.syncRenameConfig=!1),e.moveUpdate=[],e.orderUpdate=[],e=C.modify_main_js_object("reorder",e,{callbackDepth:_,maxDepth:_[0],targetSection:u.sectionSlug,targetSelector:u.selectorSlug,menuOrder:r}),e="selector"==d?(i=B.get_meta(o,"section"),e=B.js_check_values(e,i),e=C.modify_main_js_object("update_section_css",e,{M:i,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]}),r.prevSec!==r.newSec&&(W.checkObject(B.uiData,[r.prevSec,"this","disabled"])!==W.checkObject(B.uiData,[r.newSec,"this","disabled"])&&(e=C.modify_main_js_object("group_to_css",e,{M:u,maxDepth:"group",recurse_key:["m_query"]})),l=B.get_meta(V("#strk-"+r.prevSec),"section"),e=B.js_check_values(e,l),e=C.modify_main_js_object("update_section_css",e,{M:l,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]})),J.user_action(e,{items:["selector"],val:B.title(u.selectorM.find("span.selector-sortable-icon")),M:u,pathTT:!0,icon:"move-icon lg-icon"})):(x.edit_style_nodes(u,"reorder"),J.user_action(e,{items:["section"],val:B.title(u.sectionM.find("span.folder-icon")),M:u,icon:"move-icon lg-icon"})),s||J.ajax_save_settings({settings:e})),B.menuOrder=r,e},mirror_move_and_log:function(e,t,s){W.startT(arguments),W.hasValue(B.selInFocusID)&&B.tvr_iterate_selectors_v(!1,B.selInFocusID),W.endT(arguments)},selector_received:function(e,t){W.startT(arguments);var s=V(t.item),r=B.get_meta(s,"selector"),a=B.is_cur("sel",r.selectorID);B.oM=r;var o=B.get_meta(s.closest(".section-tag"),"section");B.update_count(r.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),B.update_count(o.sectionM.find(".selector-count-state"),"add",1,"selector","");var n=W.resolve_unique_name(r.selectorH,o.sectionM,".selector-name","Moved",r.selectorMID),i=W.convert_to_param(n);return B.dom_replacements(r,"selector",r.selector.add(r.selectorM),r.sectionSlug,o.sectionSlug,o.sectionH,r.selectorSlug,i,n,r.selectorM.find(".selector-css-textarea").val()),i!==r.selectorSlug&&(B.menuOrder.syncRenameConfig={rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:r.sectionSlug,targetSelector:r.selectorSlug,new_key:i,new_label:n,new_code:r.selectorCode}),o=B.get_meta(r.selectorM,"selector"),a&&(B.update_global_vars(o),r.selector.detach().prependTo(o.section.find("ul.selector-sub"))),B.sortableLoading=!1,B.mirror_move_and_log(e,t),W.endT(arguments),o},toggle_folder:function(e,t){W.startT(arguments);var s=B.get_meta(e,"section");s.sectionM.find(".menu-arrow").hasClass("on")?B.close_folder(s,t):B.open_folder(s,t),W.endT(arguments)},open_folder:function(e,t){t||this.load_folder_menu_selectors(e),e.sectionM.addClass("is-open").find(".menu-arrow").addClass("on"),e.sectionM.find("ul.selector-sub").addClass("normal")},close_folder:function(e){this.unload_folder_menu_selectors(e),e.sectionM.removeClass("is-open").find(".menu-arrow").removeClass("on"),e.sectionM.find("ul.selector-sub").removeClass("normal")},open_close_all_folders:function(s){B.stat.mainMenu.find("span.folder-menu-arrow").each(function(){var e=V(this),t=e.hasClass("on");(t&&"close"===s||!t&&"open"===s)&&B.toggle_folder(e)})},load_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub");t.find("li:not(.add-selector-list-item)").remove(),t.append(B.load_selector(e,{items:["selectorM"]})),B.js_check_values({},B.get_meta(e.sectionM,"section"))},unload_folder_menu_selectors:function(e){var t=e.sectionM.find(".selector-sub").find("li:not(.add-selector-list-item)");B.menuSelInFocusID&&(t=t.not("#"+B.menuSelInFocusID)),t.remove()},unload_all_option_selectors:function(){W.startT(arguments),B.stat.opts.find("ul.selector-sub").find("> li:not(#"+B.selInFocusID+")").remove(),W.endT(arguments)},update_editor_refs:function(e,t,s,r,a,o){return W.startT(arguments),!1},dom_replacements:function(e,t,s,r,a,o,n,i,l,c,d){var _,u,p;return W.startT(arguments),"section"==t&&(s.find("input, textarea.property-input").each(function(e){var t=V(this);W.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]","tvr_mcth["+a+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]"))}),s.find(".section-name .name-text").text(o),s.find(".section-display-name").val(o),s.find(".rename-input").val(o),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){var e=V(this);e.attr("id",e.attr("id").replace(r,a))})),"selector"==t&&(s.find(".selector-name").attr("title",W.regular_escape_quotes(c)),s.find(".selector-name .name-text").text(l),s.find(".selector-label").val(l+"|"+c),s.find(".selector-name-input").val(l),s.find(".selector-css-textarea").val(c)),"group"==t&&(s.removeAttr("id"),s.attr("class",s.attr("class").replace("property-fields-all-devices","property-fields-"+d)),"all-devices"!=d&&s.find("input.property-input, textarea.property-input, input.disabled-tracker, input.chained-tracker, input.post-sel-css, input.post-sel-data").each(function(e){var t=V(this);t.attr("name",t.attr("name").replace("tvr_mcth","tvr_mcth[non_section][m_query]["+d+"]"))}).end().find("div.property-tag, div.subgroup-tag, pre.custom-css-pre").each(function(){var e=V(this);e.attr("id",e.attr("id").replace("-all-devices","-"+d))})),"selector"!==t&&"group"!==t||(s.find("div.sel-code-alias").text(c),s.find("input, textarea.property-input").each(function(e){var t=V(this);W.hasValue(t.attr("name"))&&t.attr("name",t.attr("name").replace("tvr_mcth["+r+"]["+n+"]","tvr_mcth["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[m_query\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][m_query][$1]["+a+"]["+i+"]").replace(/tvr_mcth\[non_section\]\[(important|view_state|display_name)\]\[([a-zA-Z0-9_]+)\]\[([a-zA-Z0-9_]+)\]/,"tvr_mcth[non_section][$1]["+a+"]["+i+"]"))}),s.find(".selector-tag, .group-tag, .subgroup-tag, .property-tag, pre.custom-css-pre").add(s).each(function(){try{var e=V(this);e.attr("id",e.attr("id").replace(r+"-"+n,a+"-"+i))}catch(e){}})),"dyn_item"==t&&(_=r,u=a,p=o,s.attr("id",s.attr("id").replace(_,u)),s.find("input, textarea").each(function(){var e=V(this);e.attr("name",e.attr("name").replace("["+_+"]","["+u+"]"))}),s.find(".script-display_name, .mquery-label").val(p),s.find(".name-text").text(p)),W.endT(arguments),s},add_section:function(e,t){W.startT(arguments);var s=!1;t||(t=TvrLang.untitled_folder,s=!0),t=W.resolve_unique_name(t,V("#tvr-menu"),".section-name");var r=B.dom_replacements(!1,"section",V(B.templates.sectionM).add(B.templates.section),"selector_section",W.convert_to_param(t),t);V("#tvr-options").append(r[1]);var a=V("#tvr-menu");a.append(r[0]);var o=a.find("li.section-tag").filter(":last"),n=B.get_meta(o,"section");o.hide().fadeIn("fast",function(){var e=V("#section-count-state");B.update_count(e,"add",1,"section"),s&&(B.toggle_rename_section(o.find("span.toggle-rename-section")),o.find("input.rename-input").select())});var i=K.dom_to_data({M:n,domDepth:"section",return:"mtData"});B.refresh_sortable();a.closest(".menu-scrollable");return W.scroll_to(V("#main-menu-popdown"),{bottom:!0}),i=J.user_action(i,{items:[t],val:B.title(e),icon:[{icon:B.hi.section},{icon:"add-icon tvr-icon"}]}),J.ajax_save_settings({settings:i}),W.endT(arguments),!0},toggle_rename_section:function(e){W.startT(arguments);var t=B.get_meta(e,"section"),s=(t=B.get_meta(e,"section")).sectionM.find(".edit-section-form"),r=t.sectionM.find(".section-name");s.hasClass("show")?(r.show(),s.removeClass("show")):(r.hide(),s.addClass("show"))},action_rename_section:function(e){W.startT(arguments);var t,s=B.get_meta(e,"section"),r=s.sectionM.find(".rename-input").val();if(W.convert_to_param(r)==s.sectionSlug)(t=[]).newName=s.sectionSlug,t.newNameHuman=r;else if(!(t=W.new_name_checks(r,"folder")))return!1;var a=s.sectionM.find("input.section-display-name").val(),o=t.newName,n=t.newNameHuman,i=s.sectionSlug,l=s.sectionM.add(s.section);x&&(l=l.add(V(x.get_style_nodes(s))));var c=B.is_cur("sec",i);B.dom_replacements(s,"section",l,i,o,n),s=B.get_meta(V("#strk-"+o),"section"),B.toggle_rename_section(s.sectionM),c&&B.update_global_vars(B.get_meta(s.section.find("li.in-focus"),"selector"));var d=C.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section"],maxDepth:"section",targetDepth:"section",targetSection:i,new_key:o,new_label:n}),_="";a!=n&&(_+=TvrLang.previous_name+": "+a+"\n",_+=TvrLang.new_name+": "+n),d=J.user_action(d,{items:["section"],val:B.title(e),M:s,valTT:_,icon:[{icon:B.hi.section},{icon:"edit-icon tvr-icon"}]}),J.ajax_save_settings({settings:d}),W.endT(arguments)},copy_section:function(e){W.startT(arguments);var t=B.get_meta(e,"section");J.log_action(t.sectionM,"copy");var s=t.sectionSlug,r=t.sectionH,a=W.resolve_unique_name(t.sectionH,V("#tvr-menu"),".section-name","Copy"),o=W.convert_to_param(a),n=!1,i=[t.sectionM[0],t.section[0]];x&&(n=x.get_style_nodes(t),i=i.concat(n));var l=B.dom_replacements(t,"section",B.proper_clone(V(i)),s,o,a);l.removeAttr("copy-in-prog").find("li.in-focus").removeClass("in-focus"),l.find("img.ajax-loader").remove(),t.sectionM.after(l[0]),t.section.after(l[1]),x&&x.insertCopiedStyleNodes(n,l);var c=V("#section-count-state"),d=t.sectionM.find("span.selector-count-state").attr("rel");B.update_count(c,"add",1,"section",d),J.unlog_action(t.sectionM,"copy"),W.hasValue(B.selInFocusID)&&B.update_prev_next_sel_buttons(B.selInFocusID);var _=C.modify_main_js_object("copy",{},{M:t,targetDepth:"section",maxDepth:"section",origSlug:s,origHuman:r,newSlug:o,newHuman:a}),_=C.reorder_after_copy(_,t.sectionM,!0);B.refresh_sortable(),_=J.user_action(_,{items:["section"],val:B.title(e),M:t,valTT:a,icon:e.attr("class")}),J.ajax_save_settings({settings:_}),W.endT(arguments)},delete_section:function(a){W.startT(arguments);var o=B.get_meta(a,"section");if(J.action_in_prog(o.sectionM,"delete")||J.action_in_prog(o.sectionM,"all-sels-loading"))return!1;if(1<W.obj_length(B.uiData[o.sectionSlug])&&!confirm(tvrsprintf(TvrLang.delete_folder_confirm,o.sectionH)))return!1;J.log_action(o.sectionM,"delete"),o.sectionM.fadeOut("fast",function(){var e=o.sectionM.find("span.selector-count-state").attr("rel");B.update_count(V("#section-count-state"),"subtract",1,"section",e);var t,s=W.hasValue(B.selInFocusID)&&B.is_cur("sec",o.sectionSlug);s&&(B.expanded("quick_section")&&B.close_quick_edit(),t=(t=B.itemScan("selector","next","getID",o.sectionSlug))||B.itemScan("selector","prev","getID",o.sectionSlug)),o.section.remove(),o.sectionM.remove(),x&&x.edit_style_nodes(o,"delete");var r=C.modify_main_js_object("delete",{},{rebuild:!0,maxDepth:"section",targetDepth:"section",targetSection:o.sectionSlug});B.after_style_options_deleted("section"),s&&t&&B.tvr_iterate_selectors_v(!1,t),t||B.update_prev_next_sel_buttons(!1),r=J.user_action(r,{items:["section"],val:B.title(a),M:o,icon:a.attr("class")}),J.ajax_save_settings({settings:r})}),W.endT(arguments)},toggle_add_selector:function(e){W.startT(arguments);var t=B.get_meta(e,"section").sectionM.find(".add-selector-form");t.hasClass("show")?B.close_add_selector(t):B.reveal_add_selector(t),W.endT(arguments)},reveal_add_selector:function(e){W.startT(arguments);var t=B.get_meta(e,"section");e.addClass("show"),t.sectionM.find(".menu-arrow").hasClass("on")||B.toggle_folder(t.sectionM),W.endT(arguments)},close_add_selector:function(e){W.startT(arguments),e.removeClass("show"),e.find("input.selector-css-textarea, input.selector-name-input").val(""),W.endT(arguments)},selector_checks_values:function(e,t,s){W.startT(arguments);var r,a=B.strip_beyoned_brace(e.val(),"name");if(""==a)return alert(TvrLang.enter_selector_name),!1;if(W.isNumeric(a))return alert("Plain numbers are not permitted as names. Please use some letters too."),!1;if(W.convert_to_param(a)==s)(r=[]).newName=s,r.newNameHuman=a;else if(!(r=W.new_name_checks(a,"selector")))return!1;return t?(r.code=t,W.endT(arguments),r):(alert(TvrLang.enter_css),!1)},show_hide_sel_custom:function(e,t){W.startT(arguments),B.analyse_sel_code(e).custom_styles?t.addClass("custom-styles"):t.removeClass("custom-styles"),W.endT(arguments)},analyse_sel_code:function(e){W.startT(arguments);var t,s=[];return 0<=e.indexOf("{")?(s.custom_styles=!0,t=e.split("{"),s.code=t[0]):(s.custom_styles=!1,s.code=e),W.endT(arguments),s},add_selector:function(e){if(W.startT(arguments),!B.allowed_action(e,"Add Sel"))return!1;var t=B.get_meta(e,"section"),s=B.selector_checks_values(t.sectionM.find(".add-selector-form .selector-name-input"),B.strip_beyoned_brace(t.sectionM.find(".add-selector-form .selector-css-textarea").val()),!1);if(!s)return!1;var r=B.dom_replacements(t,"selector",V(B.templates.selectorM).add(B.templates.selector),"selector_section",t.sectionSlug,t.sectionM.find(".name-text").text(),"selector_css",s.newName,s.newNameHuman,s.code),a=V(r[1]),o=B.pref.pg_focus;C.maybe_add_group_template(a,t.sectionSlug,s.newName,s.newNameHuman,s.code,t.tabSlug,o),B.editor_and_gui()&&"code"!==o&&C.maybe_add_group_template(a,t.sectionSlug,s.newName,s.newNameHuman,s.code,t.tabSlug,"code"),B.sidebar_showing()&&this.set_sidebar_size(B.editor_only_left(),!1),t.sectionM.find(".selector-sub").append(r[0]),t.section.find(".selector-sub").append(a),B.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),t=B.get_meta(t.section.find(".selector-tag").last(),"selector");var n=!1;B.expanded("quick_section")&&(n=!0,B.close_quick_edit());var i,l=K.dom_to_data({M:t,domDepth:"selector",clean:{selector:[["styles"],[o]]},cleanMaxDepth:"selector",skipSassCompile:!0}),l=C.run_global_scans(l,["update_indexes"]);return C.updateObjectAndSavePackage(l.savePackage,[{action:"append",trail:[t.sectionSlug,s.newName],key:"jsu",data:B.jsuVersion}]),B.tvr_iterate_selectors_v(t.selectorM),B.maybe_default_to_pg(),B.refresh_sortable(),B.close_add_selector(t.sectionM.find(".add-selector-form")),B.meta.sectionM.find(".add-selector-form").find(".selector-name-input, .selector-css-textarea").val(""),B.expanded("quick_selector")&&B.close_quick_edit(),n&&B.quick_edit(V("#sec-in-focus")),B.expanded("main_menu")&&(i=t.sectionM.find(".menu-arrow"),B.toggle_folder(i,!0),B.toggle_folder(i,!1)),G.maybe_resume_editor_focus(),l=J.user_action(l,{items:["selector"],val:B.title(e),M:t,pathTT:!0,icon:[{icon:B.hi.selector},{icon:"add-icon tvr-icon"}]}),J.ajax_save_settings({settings:l}),W.endT(arguments),!0},load_selector:function(e,t){W.startT(arguments);var s=[];if(t.items){var r=!1,a=t.pg_focus?t.pg_focus:B.pref.pg_focus,o=B.editor_and_gui()&&"code"!==a;if(t.replaceExisting){var n=this.get_code_meta(e);if(W.isDomEl(n.$property_fields)){if("code"===a)return e.selector.find(".group-tag").not(n.$group).remove(),e.selector;r=n.$property_fields.detach()}}for(var i=0;i<t.items.length;i++){var l,c,d,_,u,p,f,g,m,v=t.items[i],h="selectorM"===v?"selector":"property",b="#"+("selectorM"===v?"strk":"opts")+"-"+e.sectionSlug,y=b+"-"+e.selectorSlug,w=V(y);w.length&&!t.replaceExisting||(e.groupSlug=a,l={M:e,load:"selector",templateKey:v,maxDepth:h,callbackDepth:["selector","group","property"]},c=t.mq_key?t.mq_key:B.get_mq_focus(),"selector"===v?("all-devices"===c?l.recurse_key=["important"]:l.onlyRecurse=!0,l.mq_key=c):"selectorM"===v&&(l.incRecurse=!1),"selectorM"===v?w=K.data_to_template(e,l):"selector"===v&&(B.stat.styleComponents.html(""),(_=(d=(w=C.get_selector_data(e,c).data?K.data_to_template(e,l):B.dom_replacements(!1,"selector",V(B.templates.selector),"selector_section",e.sectionSlug,!1,"selector_css",e.selectorSlug,e.selectorH,e.selectorCode)).find(".group-tag-"+a)).find("div.property-fields-"+c)).length||(C.maybe_add_group_template(w,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,c,a),_=d.find("div.property-fields-"+c),"flexbox"!==a&&"grid"!==a||(u=C.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices"),p="flexbox"===a?"flexitem":"griditem",W.checkObject(u.data,["pg_"+p])&&(f="flexbox"===a?"flexcontainer":"generalgrid",C.flip_flex_or_grid_item_switch(_,_.find(".subgroup-control-"+f),u.levels,p),_.add(B.stat.grid).addClass("show-single-griditem"),"grid"===a&&(B.pref.grid_focus="griditems")))),"grid"===a&&(g=C.get_js_object_data([e.sectionSlug,e.selectorSlug],"all-devices").data,m=B.get_nth_focus(g),d.find(".tab-control-griditems:not(.nth-item-radios):not(.sub-label)").find("input.property-input").each(function(){var e=V(this);e.attr("name",W.replace_variable_name_attr(e.attr("name"),m))}),m&&d.find("span.grid-item-num").text(": "+m),parseInt(B.pref.grid_highlight)&&d.find(".grid-highlight").addClass("on"),parseInt(B.pref.expand_grid)&&d.find(".expand-grid").addClass("on")),o&&(r?w.find(".group-tag-code").append(r):C.maybe_add_group_template(w,e.sectionSlug,e.selectorSlug,e.selectorH,e.selectorCode,c,"code")),B.sidebar_showing()&&(d.addClass("show"),this.set_sidebar_size(B.editor_only_left(),!1)),w.addClass("in-focus")),t.replaceExisting?V("#"+t.replaceExisting).replaceWith(w):V(b).find(".selector-sub").append(w)),s[i]=w}}return W.endT(arguments),1<s.length?s:s[0]},get_sel_abs_index:function(e,t){return 0},get_nth_focus:function(e){var t;e||(t=B.getM(),e=B.uiData[t.sectionSlug][t.selectorSlug]);var s=W.checkObject(e,["nth_item"]);return!1===s?1:parseInt(s)},getM:function(){return B.get_meta(V("#"+B.selInFocusID),"selector")},toggle_modify_selector:function(e){var t=B.get_meta(e,"selector").selectorM.find(".edit-selector-form");t.hasClass("show")?(t.removeClass("show"),B.expanded("quick_selector")&&B.close_quick_edit()):t.addClass("show")},strip_beyoned_brace:function(e){return(e=e.split("{"))[0]?(e=e[0]).trim():""},action_modify_selector:function(e,t,s,r){W.startT(arguments);var a=B.get_meta(e,"selector");t=t||{};var o=B.selector_checks_values(a.selectorM.find(".selector-name-input"),B.strip_beyoned_brace(a.selectorM.find(".selector-css-textarea").val()),a.selectorSlug);if(!o)return!1;var n=a.selectorM.find(".selector-label").val().split("|"),i=n[0],l=n[1],c=a.selectorSlug,d=l!==o.code,_=o.newName,u=o.newNameHuman,p=a.sectionSlug,f=a.selectorM.add(a.selector);B.dom_replacements(a,"selector",f,p,p,a.sectionH,c,_,u,o.code);if(B.is_cur("sel",a.selectorID)&&(B.update_global_vars(B.get_meta(a.section.find("li.in-focus"),"selector")),B.expanded("quick_selector")&&B.close_quick_edit()),!B.el_selected&&B.iframe_functions_loaded()&&x.reposition_overlays({con:"reg"}),t=C.modify_main_js_object("rename",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:p,targetSelector:c,new_key:_,new_label:u,new_code:o.code,orig_code:l}),a=B.get_meta(e,"selector"),t=C.modify_main_js_object("group_to_css",t,{M:a,maxDepth:"group",recurse_key:["m_query"],triggeredFromEditor:r,selCodeChanged:d&&{oldCode:l,newCode:o.code}}),r||G.update_adaptable_editor({M:a,directContent:K.resolve_inline_editor_content(a),contentShouldChange:!0}),s){var g=B.get_meta(V("#strk-"+s),"section");if(!W.new_name_checks(u,"selector",g.sectionM))return!1;g.sectionM.find(".menu-arrow").hasClass("on")||B.open_folder(g),a.sectionM.find(".menu-arrow").hasClass("on")||B.open_folder(a),a=B.get_meta(V("#"+a.selectorMID),"selector"),t=B.get_dom_order(t,a.selectorM,{prevSec:"",newSec:"",orig_order:["this"],new_order:["this"],map:[]},!1,!0),a.selectorM.detach().appendTo(g.sectionM.find("ul.selector-sub")),a=B.selector_received({},{item:a.selectorM}),t=B.get_dom_order(t,a.selectorM,B.menuOrder,!0,!0)}var m="";return i!=u&&(m+=TvrLang.previous_name+": "+i+"\n",m+=TvrLang.new_name+": "+u),l!=o.code&&(m+=m?"\n":"",m+=TvrLang.previous_code+": "+l+"\n",m+=TvrLang.new_code+": "+o.code),B.dontLogSelectorChange||(t=J.user_action(t,{items:["selector"],val:B.title(e),M:a,valTT:m,pathTT:!0,icon:[{icon:B.hi.selector},{icon:"edit-icon tvr-icon"}]})),J.ajax_save_settings({settings:t,timerName:"modify_selector_"+p+"_"+c}),a.selectorM.find(".edit-selector-form").hasClass("show")&&B.toggle_modify_selector(a.selectorM),W.endT(arguments),!0},proper_clone:function(e){W.startT(arguments);var t=e.clone();return t.find("div.sp-replacer, div.sp-container").remove(),t.find("input.color.bound").removeClass("bound"),B.colorpicker_bind(t),W.endT(arguments),t},copy_selector:function(e){if(!B.allowed_action(e,"Add Sel"))return!1;var t=B.get_meta(e,"selector"),s=B.load_selector(t,{items:["selector"]}),r=(t=B.get_meta(s,"selector")).selectorSlug,a=t.selectorH,o=W.resolve_unique_name(t.selectorH,t.sectionM,".selector-name","Copy"),n=W.convert_to_param(o),i=B.dom_replacements(t,"selector",B.proper_clone(V([t.selectorM[0],t.selector[0]])),t.sectionSlug,t.sectionSlug,a,r,n,o,t.selectorM.find(".selector-css-textarea").val());i.removeClass("in-focus").removeAttr("copy-in-prog").find("img.ajax-loader").remove(),t.selectorM.after(i[0]),t.selector.after(i[1]),B.update_count(t.sectionM.find(".selector-count-state"),"add",1,"selector",""),W.hasValue(B.selInFocusID)&&B.update_prev_next_sel_buttons(B.selInFocusID);var l=C.modify_main_js_object("copy",{},{M:t,targetDepth:"selector",maxDepth:"selector",origSlug:r,origHuman:a,newSlug:n,newHuman:o}),l=C.reorder_after_copy(l,t.selectorM,!0);l=C.modify_main_js_object("update_section_css",l,{M:t,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});var c="#strk-"+t.sectionSlug+"-"+n;B.tvr_iterate_selectors_v(V(c),c,"copy"),l=J.user_action(l,{items:["selector"],val:B.title(e),M:t,pathTT:!0,valTT:o,icon:e.attr("class")}),J.ajax_save_settings({settings:l})},delete_selector:function(a){W.startT(arguments);var o=B.get_meta(a,"selector");if(J.action_in_prog(o.selectorM,"delete")||J.action_in_prog(o.selectorM,"data-load"))return!1;J.log_action(o.selectorM,"delete"),o.selectorM.fadeOut("fast",function(){var e,t=B.expanded("quick_selector"),s=W.hasValue(B.selInFocusID)&&B.is_cur("sel",o.selectorID);B.update_count(o.sectionM.find(".selector-count-state"),"subtract",1,"selector",""),s&&(t&&B.close_quick_edit(),e=(e=B.itemScan("selector","next","getID",o.sectionSlug,o.selectorSlug,{incCurrentSection:!0}))||B.itemScan("selector","prev","getID",o.sectionSlug,o.selectorSlug,{incCurrentSection:!0})),o.selector.remove(),o.selectorM.remove();var r=C.modify_main_js_object("delete",{},{rebuild:!0,callbackDepth:["section","selector"],maxDepth:"selector",targetDepth:"selector",targetSection:o.sectionSlug,targetSelector:o.selectorSlug}),r=C.modify_main_js_object("update_section_css",r,{M:o,maxDepth:"section",callbackDepth:["section"],recurse_key:["m_query"]});B.after_style_options_deleted("selector"),r=B.js_check_values(r,o),s&&e&&B.tvr_iterate_selectors_v(!1,e),e||B.update_prev_next_sel_buttons(!1),G.ace_sync_details={},r=J.user_action(r,{items:["selector"],val:B.title(a),M:o,pathTT:!0,icon:[{icon:B.hi.selector},{icon:a.attr("class")}]}),J.ajax_save_settings({settings:r})}),W.endT(arguments)},remove_property_group:function(e,t){W.startT(arguments);var s=e.group.find("div.property-fields-"+t);return s?(s.remove(),W.endT(arguments),!0):(W.endT(arguments),!1)},update_accordion:function(e,t){W.startT(arguments);var s,r=t.find("li.accordion-item"),a=e.parent(),o=a.hasClass("property-menu");return a.hasClass("show-content")&&(s=!0),t.find(".accordion-menu-arrow.on").removeClass("on"),r.length?r.slideUp(function(){t.find(".show-content").removeClass("show-content")}):t.find(".show-content").removeClass("show-content"),s||(o&&(B.pgInFocusWiz=a.attr("id").replace("comp-",""),W.isDomEl(x.triggerEl)&&x.getAndUpdateCompStyles(!0,!0,x.triggerEl,"obj")),a.find(".accordion-menu-arrow").addClass("on"),e.siblings("li.accordion-item").length?e.siblings("li.accordion-item").slideDown(function(){a.addClass("show-content")}):a.addClass("show-content")),W.endT(arguments),!1},trigger_pg_icon_click:function(e){e=e||B.pref.pg_focus,B.dontSavePgFocus=!0,B.stat.css_icons.find("ul.styling-option-icons").find(".pg-icon-"+e).trigger("click"),B.dontSavePgFocus=!1},pg_icon_pressed:function(e,t){W.startT(arguments);var s=V("#"+B.selInFocusID);if(!W.isDomEl(s))return!1;var r=B.get_mq_focus(),a=e.attr("rel"),o=B.get_meta(s,"selector");B.pref.pg_focus=a;var n=(o=B.ensure_selector_and_pg_loaded(o,t,r,a)).selector.find(".styling-options"),i=B.stat.css_icons.find(".styling-option-icons");B.update_tab(n,".group-tag",i,a,".pg-icon",".pg-focus"),"grid"!==a&&"transform"!==a||B.js_check_values({},o),B.after_tab_switch(o),B.editor_and_gui()&&B.maybe_adjust_side_options(),W.action_after_timeout("pg_expensive",3,{item:function(e){B.iframe_functions_loaded()&&x.get_computed_styles({data:B.curSelCSS,con:"str"}),B.refresh_comp_css()},args:[o]}),B.dontSavePgFocus||V.get(B.ajaxUrl+"&pg_focus="+a,function(){}),W.endT(arguments)},ensure_selector_and_pg_loaded:function(e,t,s,r){return t||B.load_selector(e,{items:["selector"],replaceExisting:e.selectorID,mq_key:s}).addClass("in-focus"),B.get_meta(B.get_pg_focus_obj(r),"group")},clear_data_level:function(e,t){W.startT(arguments);var s,r,a=e.attr("data-input-level"),o="pgtab"===a,n=o?"group":a,i={M:t=t||("tab"===a?B.get_meta(V("#"+B.selInFocusID),"selector"):B.get_meta(e,n)),clear:{},clean:{}},l=["styles","pie","pg_chained","pg_flexitem","pg_griditem","ast"];t.selectorSlug;switch(a){case"section":var c=t.section.find("div.property-tag");if(i.clear.section=[!1,l],1<W.obj_length(B.uiData[t.sectionSlug]))if(!confirm(tvrsprintf(TvrLang.clear_folder_confirm,t.sectionH)))return!1;break;case"selector":c=t.selector.find("div.property-tag"),i.clear.selector=[l];break;case"tab":var d=e.closest("span.mq-tab").attr("rel");c=t.selector.find("div.property-fields-"+d).find("div.property-tag"),i.mq_key=d,i.onlyRecurse="all-devices"!==d,i.clear.selector=[l];break;case"group":case"pgtab":case"subgroup":i.mq_key=t.tabSlug,"all-devices"===i.mq_key?i.recurse_key=["important"]:i.onlyRecurse=!0,i.clear.selector=[["styles"],[t.groupSlug]],"group"===a||"flexbox"===t.groupSlug?c=B.get_group(t).find("div.property-tag"):(s=o&&e.data("tab-group"),r=o?Object.keys(TvrMT.data.prog.pg_tab_props[t.groupSlug][s]):TvrMT.data.prog.subGroupKeys[t.subgroupSlug],c=B.get_subgroup_or_tabgroup(t,!1,s),i.clear.selector.push(r),B.maybe_add_nth_index_filter(o,s,t,e,i.clear.selector)),a="group"}B.clear_fields(c,e,a,t,i),i=C.modify_main_js_object("clear",i,{maxDepth:"selector",dontUpdateSavePackage:!0}),i=C.modify_main_js_object("group_to_css",i,{maxDepth:"group",recurse_key:["m_query"]}),i=C.modify_main_js_object("clean",i,{maxDepth:"selector",clean:i.clear}),i=B.js_check_values(i,t),B.editor_and_gui()&&G.gui_to_editor(!1,t),i=J.user_action(i,{items:[a],val:B.title(e),M:t,pathTT:"section"===a,icon:[{icon:J.h_i_class(a,t)},{icon:e.attr("class")}]}),J.ajax_save_settings({settings:i}),W.endT(arguments)},clear_fields:function(e,t,s,l,r){W.startT(arguments),e.each(function(){var e,t,s,r=V(this),a=r.prev(".subgroup-tag"),o=r.find("input.property-input, input.mt-supplementary-picker, textarea.property-input"),n=r.find("span.important-toggle"),i=r.hasClass("has-variable-line");o.val(""),i&&r.find(".tvr-input-wrap:not(:first-child)").remove(),o.hasClass("color")&&B.clear_spectrum_inputs(B.get_meta(r,"property"),!1),o.hasClass("mt-event-input")&&B.adjust_event_fields(o),o.hasClass("tvr-editor-hidden")&&B.is_cur("sel",l.selectorID)&&(e=B.stat.adaptableEditor,t=G.eds[e.attr("id")],e.hasClass("ace_editor")&&t&&G.set_editor_content(e,t,{M:l})),B.post_edit(o),n.hasClass("active")&&B.input_icon_toggle(n,!0,!0),!W.isDomEl(a)||(s=a.find(".chained-toggle")).hasClass("active")&&B.input_icon_toggle(s,!0,!0)}),W.endT(arguments)},update_tab:function(e,t,s,r,a,o,n){W.startT(arguments);var i,l,c,d,_=s.find(a+"-"+r);s.find(a).removeClass("active").end().find(o).val(r),_.addClass("active"),n||(e.find(t+".show").removeClass("show"),(i=e.find(t+"-"+r)).addClass("show"),".mq-tab"===a&&e.addClass("show"),".pg-icon"===a&&e.find(t+"-"+r).find(".property-fields").removeClass("show").end().find(".property-fields-"+B.get_mq_focus()).addClass("show"),".dialog-tab"===a&&"display-css-code-dialog"===B.get_dialog_focus(s).attr("id")&&(parseInt(r)!==s.find(a).length-1&&(V.get(B.ajaxUrl+"&generated_css_focus="+r,function(){}),B.pref.generated_css_focus=r),c=(l=i.find("pre").first()).attr("id"),G.generated_css_auto_line_done[c]||(d=G.get_editor(l),G.find_selector_line(d,c,{find:G.current_selector_find_config(_.data("mode"))},!1)))),W.endT(arguments)},mq_tab_pressed:function(e,t,s,r){W.startT(arguments);var a=!0,o="",n=e.attr("rel"),i=B.stat.res.find(".query-tabs");if(!r&&v.check_synced_page_builder_responsive_views(n))return!1;B.pref.mq_device_focus=n,V.get(B.ajaxUrl+"&mq_device_focus="+n,function(){});var l,c,d=W.hasValue(B.selInFocusID);d&&(l=B.get_meta(B.get_pg_focus_obj(),"group"),l=B.ensure_selector_and_pg_loaded(l,t,n,B.pref.pg_focus),a=!1,o=".property-fields",c=B.get_pg_focus_obj()),B.update_tab(c,o,i,n,".mq-tab",".device-focus",a),d&&(B.js_check_values({},l),B.after_tab_switch(l)),W.action_after_timeout("mq_expensive",3,{item:function(e){B.reset_preview_width_for_current_tab(e,!1,s),B.get_local_window_function("reset_mob_previews")()},args:[n]}),W.endT(arguments)},reset_preview_width_for_current_tab:function(e,t,s){e=e||B.get_mq_focus(),B.get_local_window_function("update_iframe_slider")(e,B.mqs[e].min,B.mqs[e].max,t,s)},get_local_window_function:function(e,t){return s=TvrMT.detachedWin,m=window.TvrMT.MTdetached,!t&&B.detached_window_available(!0)&&!!s.MTlocal&&s.MTLocalFunctionsReady?s.MTlocal[e]:window.MTlocal[e]},detached_window_available:function(e){return!(!TvrMT.detachedWin||!window.TvrMT.MTdetached)&&(s=TvrMT.detachedWin,m=window.TvrMT.MTdetached,!e||e&&B.pref.detach_preview)},after_tab_switch:function(e,t,s,r,a){var o,n,i;W.startT(arguments),"css"===e||B.pref.show_code_editor||("code"===e.groupSlug?B.stat.tvr.addClass("onlyInlineEditor"):B.stat.tvr.removeClass("onlyInlineEditor"),o=x?B.stat.tvr.add(B.stat.fHTML):B.stat.tvr,"transform"===e.groupSlug&&B.default_to_tab("transform"),"grid"===e.groupSlug?(o.addClass("showGridControls"),B.default_to_tab("grid"),n="show-single-griditem",e.group.find(".property-grid").hasClass(n)?B.stat.grid.addClass(n):B.stat.grid.removeClass(n)):o.removeClass("showGridControls"),"code"!==e.groupSlug&&!B.editor_and_gui()||B.editor_to_gui_running||G.update_adaptable_editor({M:e,directContent:K.resolve_inline_editor_content(e),mode:parseInt(B.pref.allow_scss)?"scss":"css"}),W.action_after_timeout("tab_switch_deferred",3,{item:function(e){B.maybe_scroll_image_fields(e),B.adjust_scroll_buttons(e,"style")},args:[e]})),"css"===e&&(i=r.data("code-type"),G.update_adaptable_editor({M:e,directContent:r.find("textarea").val(),mode:parseInt(B.pref.allow_scss)&&"css"===i?"scss":i})),W.endT(arguments)},open_property_dropdown:function(e){var t=V("#"+B.selInFocusID),s=e.fieldData,r=e.group;if(!W.isDomEl(t)||!s)return!1;var a=s[0].prop,o=t.find("div.field-"+r+"-"+a),n=o.hasClass("is-picker")?".property-input, .sp-preview-inner":".combo-arrow";o.find(n).trigger("click")},get_code_meta:function(e){var t=e.selector.find(".group-tag-code"),s=!!t&&t.find("div.property-fields-"+e.tabSlug);return{$group:t,$property_fields:s,$editor:B.stat.adaptableEditor,editor:G.eds["adaptable-editor"]}},js_in_focus:function(){return!(!B.stat.tvr.hasClass("show_code_editor")||"js"!=B.get_css_focus())},default_to_tab:function(e){W.startT(arguments),"mq"===e?B.mq_tab_pressed(B.stat.res.find(".mq-tab-"+B.get_mq_focus())):"css"===e?B.css_tab_pressed(B.stat.code.find(".css-tab-"+B.get_css_focus())):"wizard"===e?B.adv_tab_pressed(V("#adv-tabs").find(".adv-tab-"+B.get_wizard_focus())):"grid"!==e&&"transform"!==e||B.pg_tab_pressed(p.get_pg_fields(e).find("."+e+"-tab-"+B["get_"+e+"_focus"]()),e),W.endT(arguments)},get_mq_focus:function(){var e=B.pref.mq_device_focus;return W.hasValue(e)&&W.hasValue(B.mqs[e])||(e="all-devices"),e},get_wizard_focus:function(e){if(e&&!B.pref.wizard_expanded&&!B.pref.dock_wizard_right)return!1;var t=B.pref.adv_wizard_tab;return B.pref.dock_wizard_right?t=t||"refine-targeting":t&&"html-inspector"!=t&&"refine-targeting"!=t||(t="css-computed"),t},get_css_focus:function(){return B.pref.css_focus||"all-browsers"},get_grid_focus:function(){var e=B.pref.grid_focus;return e||"gridtemplate"},get_transform_focus:function(){var e=B.pref.transform_focus;return e||"transform"},get_dialog_tab_focus:function(e){var t=(t=(e=e||B.get_dialog_focus()).find("input.dialog-focus").val())||0;return parseInt(t)},get_dialog_focus:function(){return B.stat.dialogs.find("div.tvr-dialog.show")},get_tab_name:function(e){return V("#responsive-bar").find(".mq-tab-"+e).find(".mq-tab-txt").text()},get_pg_focus_obj:function(e){e=e||B.pref.pg_focus;var t=V("#"+B.selInFocusID+"-"+e);return!!W.isDomEl(t)&&t},get_group:function(e,t){var s=e.group.find("div.property-fields-"+e.tabSlug);return t&&(s=s.find("input.property-input")),!!W.isDomEl(s)&&s},get_pg_fields_obj:function(e,t){W.startT(arguments);var s=e.find("div.property-fields-"+t);return W.endT(arguments),!!W.isDomEl(s)&&s},get_subgroup_or_tabgroup:function(e,t,s){var r=B.get_group(e);if(!W.isDomEl(r))return!1;var a=s?"div.tab-control-"+s:"div.subgroup-"+e.subgroupSlug,o=r.find(a);return!!W.isDomEl(o)&&(t&&(o=o.find("input.property-input")),!!W.isDomEl(o)&&o)},maybe_remove_group:function(e,t){if(W.startT(arguments),e){var s=B.get_meta(e,"group");if(!B.pg_check_values(s.group,t,!1)&&!B.input_toggles_enabled(s.group,"group",t))return W.endT(arguments),B.remove_property_group(s,t)}return W.endT(arguments),!1},input_toggles_enabled:function(e,t,s){"group"==t&&(e=e.find("div.property-fields-"+s));var r=!1;return e.find("input.input-toggle-tracker").each(function(e){return!(r=!0)}),r},selector_check_disabled:function(e){W.startT(arguments);var t,s=e.selectorM.find("p.sel-toggles"),r=V("#responsive-bar").find(".query-tabs");for(var a in TvrMQsCombined){TvrMQsCombined.hasOwnProperty(a)&&(t=r.find("span.mq-tab-"+a).find(".disabled-icon"),W.isDomEl(s.find("input.disabled-tracker-"+a))?t.addClass("active").closest(".mq-tab").addClass("item-disabled"):t.removeClass("active").closest(".mq-tab").removeClass("item-disabled"))}W.endT(arguments)},pg_check_values:function(e,t,s,r){var a=B.get_meta(e,"group"),o=!1;B.get_mq_focus();return r=r||"#nothing",a.group.find("div.property-fields-"+t).find("input.property-input, textarea.property-input").not(r).each(function(e){if(W.isDefined(V(this).val()))return!(o=!0)}),o},js_check_values:function(e,t,s,r,a){W.startT(arguments);var o={incRecurse:!0,onlyRecurse:!1,mq_key:!1,M:B.get_meta(t.section?t.section:t,"section"),maxDepth:"group"};e.has_values={},e=C.modify_main_js_object("check_values",e,o),o.incRecurse=!1;var n,i=(e=C.modify_main_js_object("update_dots",e,o)).has_values;return i.current_sel_checked&&(B.update_tab_dots(i),B.update_group_dots(i),"grid"===B.pref.pg_focus&&(n={itemsWithValues:i.itemsWithValues},B.grid.isAllItems&&p.update_grid_and_radio_item_formatting("itemdots",n),B.update_pgtab_dots(i)),"transform"===B.pref.pg_focus&&B.update_pgtab_dots(i)),r&&J.silent_save(!1,e.savePackage),W.endT(arguments),e},update_tab_dots:function(e){for(var t in TvrMQsCombined){var s;TvrMQsCombined.hasOwnProperty(t)&&(s=B.item_has_styles(e,"tab",t),B.update_style_signal(B.stat.res.find(".mq-tab-"+t),s))}},update_pgtab_dots:function(e){var t=B.get_pg_meta(),s=C.get_selector_data(t,t.tabSlug).data,r=W.isDefined(s.nth_item)?s.nth_item:1;if(t){var a=t.groupSlug,o={},n=W.checkObject(e,["propsWithValues",a]);if(n)for(var i=Object.keys(n),l=0;l<i.length;l++){var c=i[l],d=B.get_property_tab_control(c);d&&("griditems"===d?W.checkObject(n,[c,"value",r]):1)&&(o[d]=1)}t.group.find("span.mt-tab").each(function(){var e=V(this),t=e.attr("rel"),s=o[t];B.update_style_signal(e,s)})}},update_group_dots:function(r,e){B.stat.css_icons.find("li.pg-icon").each(function(){var e=V(this),t=e.attr("rel"),s=B.item_has_styles(r,"group",t);B.update_style_signal(e,s)})},item_has_styles:function(e,t,s){return W.checkObject(e,[t,s])?1:""},update_style_signal:function(e,t){e&&(t?e.addClass("hasValues"):e.removeClass("hasValues"))},css_tab_pressed:function(e){W.startT(arguments);var t=B.get_css_focus(),s=e.attr("rel"),r=s!=t&&B.stat.code.find("div.mt-full-code-"+t),a=B.stat.code,o=a.find(".css-code-tabs");B.update_tab(a,".mt-full-code",o,s,".css-tab",".css-focus"),B.pref.css_focus=s;var n=B.stat.code.find("div.mt-full-code-"+s);B.after_tab_switch("css",r,t,n,s),V.get(B.ajaxUrl+"&css_focus="+s),B.toolbar_adjusted(),W.endT(arguments)},pg_tab_pressed:function(e,t,s){var r=e.closest(".property-"+t),a=r.find(".query-tabs"),o=e.attr("rel"),n="."+t+"-tab",i="."+t+"-tab-focus";B.update_tab(r,".tab-control",a,o,n,i),B.pref[t+"_focus"]=o,B.stat.tvr.attr("data-"+t+"-pgtab",o),V.get(B.ajaxUrl+"&"+t+"_focus="+o),B.refresh_comp_css(),"grid"===t&&(B.adjust_grid_line_scroll_buttons(B.get_meta(r,"group")),s&&x&&x.maybe_run_grid_control_update())},adv_tab_pressed:function(e){W.startT(arguments);var t=V("#advanced-wizard"),s=t.find(".query-tabs"),r=e.attr("rel");B.update_tab(t,".adv-area",s,r,".adv-tab",".adv-wizard-focus"),B.pref.adv_wizard_tab=r,B.maybe_update_wizard_panels(),V.get(B.ajaxUrl+"&adv_wizard_tab="+r,function(){}),W.endT(arguments)},maybe_update_wizard_panels:function(e){W.startT(arguments),e=e||{};var t,s=!!W.isDomEl(x.triggerEl,!1,x.stat.doc)&&x.triggerEl;B.intelli&&(t=B.get_wizard_focus(!0),!s||e.exclComp||e.onlyDeferred||"css-computed"!==t||x.getAndUpdateCompStyles(!0,!0,{},"obj"),!s||e.exclActual||e.onlyQuick||"css-inspector"!==t||K.update_stylesheet_rules(),!e.onlyQuick&&t&&e.forceHTMLUpdate&&(e.onlyDoHTMLScroll?B.update_wizard_html_scroll(e):B.update_wizard_html(e),s&&B.update_breadcrumbs(e))),W.endT(arguments)},dialog_tab_pressed:function(e){W.startT(arguments);var t=e.closest(".dialog-main"),s=t.find(".dialog-tabs"),r=e.attr("rel");B.update_tab(t,".dialog-tab-field",s,r,".dialog-tab",".dialog-focus"),W.endT(arguments)},combobox_clicked:function(e,t){W.startT(arguments),e.hasClass("sug-sel")?W.isDomEl(e.closest("li.in-focus"))||B.sug_css_clicked(e):(e.attr("rel"),(e.hasClass("has-arrows")||e.hasClass("cssfilter-combo"))&&B.combo_arrow_clicked(!1,e),e.hasClass("cssfilter-combo")&&B.feature_on(e)),W.endT(arguments)},combo_arrow_clicked:function(e,t){W.startT(arguments);var s="input"==(t=t||e.siblings("input")).prop("tagName").toLowerCase()?t:t.find("input");s.data("wasOpen")?B.close_combo_menu(s):B.open_combo_menu(s),s.hasClass("sug-sel")&&B.sug_css_clicked(s),W.endT(arguments)},open_combo_menu:function(e){e.MTautocomplete(),e.is(":focus")||e.focus(),e.MTautocomplete("search",""),B.combobox_focused(e)},close_combo_menu:function(e){e.MTautocomplete().MTautocomplete("close")},combobox_focused:function(e){e.hasClass("custom_css_unit")&&V("#css_unit_set").val("")},input_clear_icon_clicked:function(e,t){t=t||"";var s,r=e.siblings("input"+t),a=r.hasClass("sp-input-var")?B.get_related_meta("picker",e.closest(".sp-container")).M:B.get_meta(r,"property"),o=a.property;r.val("").focus(),o.hasClass("has-variable-line")&&(r.hasClass("vl-name-input")?B.toggle_optional_input(e.siblings(".toggle-optional-input")):(s=!1,r.closest(".tvr-input-wrap").find(".property-input").each(function(){if(""!==V(this).val().trim())return!(s=!0)}),s||B.delete_variable_field(o,r,a,!0))),B.maybe_toggle_google_fonts_field(r,""),B.run_input_updated(r)},format_combo_cat_toggle_atts:function(e){return' class="ui-toggle uit-par mt-combo-toggle toggle-sampled-items toggle-'+e+'" data-action="toggle-sampled" data-dyn-tt-root="'+e+'"data-aspect="'+e+'"'},wheelDropdown:{cssf:"",source:[],index:-1},valueChangeDropdown:function(e,t,s){var r=B.wheelDropdown.source.length-1,a=t?B.wheelDropdown.index+1:B.wheelDropdown.index-1;a<0?a=r:r<a&&(a=0);var o=B.wheelDropdown.source[a];o===Object(o)&&(o=W.isDefined(o.value)?o.value:o.label),e.val(o),B.maybe_sync_fields(e),B.wheelDropdown.index=a},cycleDrowndownValues:function(e,t,s){var r,a,o,n=W.prop_to_cssf(e.attr("rel")),i=e.val(),l=B.wheelDropdown.cssf!==n||!W.isDefined(i);l&&(a=(r=B.resolve_combobox_source(e))[1]===Object(r[1])&&"value",B.wheelDropdown.source=r,B.wheelDropdown.cssf=n,o=W.isDefined(i)?W.in_array(i,r,!1,a):!1!==W.in_array(B.compProps[n],r,!1,a)?W.in_array(B.compProps[n],r,!1,a):W.in_array(B.compProps[n],r,!1,"label"),B.wheelDropdown.index=!1!==o?parseInt(o):-1),B.valueChangeDropdown(e,0<t.deltaY,s),l&&B.adjust_comp_span(e,"after"),J.ajax_save_settings({$property:e})},lastAutocompleteResponse:[],resolve_combobox_source:function(e,t,s,r){W.startT(arguments);var a,o,n,i,l,c,d,_,u,p,f,g,m,v,h,b,y,w=e.attr("rel"),T=e.hasClass("sug-sel")?x.dom.sels.combo[w]:TvrMT.data.prog.combo[w];return"custom_paths"===w?B.get_site_pages:"css_length_units"===w?S.filter_css_units(T,e.data("prop")):(T=T||[],(e.hasClass("property-input")||e.hasClass("sp-input-var"))&&(a=B.gatheredCSS.root_cat_keys[w],o=W.prop_to_cssf(w),i=!!(n=TvrMT.data.prog.lh[o])&&B.get_default_unit(n.group,n.prop),l=B.support_sampling(w),c=[],d=[],b=[],a&&(_="color_extra"===a?"color":a,u="color_extra"===a,p=B.pref.my_props.sug_values,m=K.sort_number_unit_strings(W.uniqueArray(p[_].recent.concat(p[_].saved)),!1,w,!1,a,!1,u),f=p[a].copiedSrc,"grid_positions"!==a&&"grid_area"!==a||!W.checkObject(B.grid,["templateAreas"])||(g="grid_positions"===a?"implicit_names":"grid_areas",m=m.concat(B.grid.templateAreas[g])),v=K.sort_number_unit_strings(W.uniqueArray(m.concat(f)),!1,w),T.length&&T[0]===Object(T[0])?c=B.format_combo_suggestions(a,"suggestions",m):T=B.format_combo_suggestions(a,"suggestions",v),l&&(K.get_scss_variables("keys"),parseInt(B.pref.show_sampled_values)&&(d=B.format_combo_suggestions(a,"sampled")),B.pref.my_props.sug_variables&&parseInt(B.pref.show_sampled_variables)&&(h=K.sort_number_unit_strings(Object.keys(B.pref.my_props.sug_variables),!1,w,!0,a,i),b=B.format_combo_suggestions(a,"sampled_variables",h)))),y=[],"font_family"===w?y.push(TvrLang.google_font):"list_style_image"!==w&&"background_image"!==w&&"url"!==w||y.push("none"),(T=y.concat(c,T,b,d)).length||T.push("")),r=W.isDefined(r)?"curVal"===r?e.val():r:"",t&&e.MTautocomplete().MTautocomplete("option","source",T),s&&(e.MTautocomplete("search",r),B.maybe_combo_menu_width_change(e)),W.endT(arguments,1),T)},maybe_combo_menu_width_change:function(t){var e,s;t.hasClass("mt-slider")&&(e=t.data("customMTautocomplete"),s=V(e.menu.element),W.action_after_timeout("new_menu_width",100,{item:function(e){S.hide_slider_set(),S.show_slider_set(t)},args:[s]}))},format_combo_cat_label:function(e,t){return TvrLang[e]},format_combo_suggestions:function(e,t,s){var r=[],a=s||B.pref.my_props.sug_values[e][t],o=B.format_combo_cat_label(t,e);if(a&&a.length)for(var n,i,l,c,d,_=0;_<a.length;_++){a[_]&&(l=(i=(n=a[_])===Object(n))?n.val:n,c=i?V.extend(!0,{},n):{},d={label:l,category:o},V.extend(!0,c,d),r.push(c))}return r},add_variable_field:function(e,t){var s=e.closest(".property-tag"),r=s.find(".tvr-input-wrap").last(),a=r.find(".vl-post-line-name").find(".property-input").val(),o=r.clone(),n=o.find(".property-input");r.find(".vl-post-line-name").removeClass("show-optional-input").find(".property-input").val(""),o.find(".vl-item").removeClass("show-optional-input"),t.shiftKey||n.val(""),a&&o.find(".vl-pre-line-name").find(".property-input").val(a),o.find(".comp-style").html(""),r.after(o),o.find(".vl-main-input").find(".property-input").focus(),B.adjust_grid_line_scroll_buttons(B.get_meta(s,"group")),t.shiftKey&&J.ajax_save_settings({$property:n})},toggle_optional_input:function(e){var t=e.parent();t.hasClass("show-optional-input")?t.removeClass("show-optional-input"):(t.addClass("show-optional-input"),t.find(".property-input").focus())},delete_variable_field:function(e,t,s,r){1<e.find(".tvr-input-wrap").length&&t.closest(".tvr-input-wrap").animate({opacity:0},200,function(){V(this).remove(),r&&B.adjust_grid_line_scroll_buttons(s)})},get_combo_menu_from_input:function(e){return V(e.data("customMTautocomplete").menu.element)},combobox_item_selected:function(e,t,s,r){W.startT(arguments);var a,o,n,i,l,c,d,_=s.closest(".property-tag"),u=t.item.value;return!s.hasClass("grid-area-add")&&(s.val(u),s.hasClass("sp-input-var")?(B.run_input_updated(s),!1):(s.hasClass("bg-image-select")&&setTimeout(function(e){W.scroll_input_end(e)},30,s),s.hasClass("property-input")&&(_.hasClass("has-variable-line")&&(""===u||(a=p.parseGridTracks(u).lines)&&1<a.length&&(o=s.attr("rel"),c=B.get_meta(s,"property"),(n=s.closest(".mt-vl-inner")).find(".tvr-input-wrap").remove(),i=B.dom_replacements(!1,"group",V(TvrMT.data.templates.input_wraps[o]),"selector_section",c.sectionSlug,!1,"selector_css",c.selectorSlug,c.selectorH,c.selectorCode,c.tabSlug),n.prepend(i),C.map_property_values_to_field(o,_,u.split(" ")),l=n.find(".tvr-input-wrap").first(),s=-1<o.indexOf("template")?l.find(".vl-main-input").find(".property-input"):l.find(".property-input"))),B.adjust_comp_span(s,"after"),c=B.get_meta(s,"property"),B.maybe_toggle_google_fonts_field(s,u)||B.maybe_sync_fields(s),B.update_input_width_and_scroll(s),J.ajax_save_settings({$property:s,comboAction:r})),"css_unit_set"===s.attr("id")&&(d=s.val(),s.closest("ul").find("input.custom_css_unit").val(d)),"select"===r&&"custom_paths"===s.attr("rel")&&(s.MTautocomplete("close"),B.change_preview_url(s.siblings(".change-preview-url"),t)),"viewed_import_stylesheets"===s.attr("rel")&&(s.MTautocomplete("close"),K.update_import_css_preview(!1,{c:s.closest(".stylesheet-to-import").find(".view-import-stylesheet")},"loadNew")),s.hasClass("sug-sel")&&(s.blur(),B.sug_sel_updated(s,{con:"combo"})),s.hasClass("cssfilter-combo")&&B.pseudo_updated(s,{input:1}),void W.endT(arguments)))},maybe_toggle_google_fonts_field:function(e,t){if(e.hasClass("tvr-font-select")){var s=e.closest(".field-wrap").siblings(".tvr-font-custom");return B.gFontTarget=s.find(".property-input"),t==TvrLang.google_font?B.show_google_fonts_field(s):B.hide_google_fonts_field(e,s),!0}return!1},hide_property_fields:function(e){e.each(function(){var e=V(this),t=e.find(".property-input");t.val(""),B.adjust_comp_span(t,"after"),e.removeClass("show-event-fields")})},sug_css_clicked:function(e){W.startT(arguments);var t=e.closest("li");t.hasClass("in-focus")||(V("#code-suggestions").find("li").removeClass("hover-elsewhere in-focus"),t.addClass("in-focus"),B.sug_sel_updated(e,{con:"sug_css_clicked"})),x.reposition_overlays({con:"intelli",scroll:1}),W.endT(arguments)},toggle_preview_page_menu:function(e){var t,s,r=e.parent();r.hasClass("expanded")?r.removeClass("expanded"):(r.addClass("expanded"),B.stat.changeUrlInputWrap.find("input").focus(),s=(t=r.find("span.fake-checkbox")).hasClass("on"),v.anyBuilderIsActive()?s||W.check_fake(t):s&&W.uncheck_fake(t))},get_toggle_data:function(e,t){W.startT(arguments),e?e=e.closest(".uit-par"):"show_interface"==t?e=V("#m-logo"):"hover_inspect"==t?e=V("#hover-inspect-toggle"):"mt_highlight"==t?e=V("#toggle-highlighting"):"show_code_editor"==t?e=V("#toggle-full-code-editor"):"show_text_labels"==t?e=V("#mymtonoffswitch-show_text_labels").closest(".ui-toggle"):"dock_editor_left"==t?e=V("#mymtonoffswitch-dock_editor_left").closest(".ui-toggle"):"dock_options_left"==t?e=V("#mymtonoffswitch-dock_options_left").closest(".ui-toggle"):"detach_preview"==t?e=V("#mymtonoffswitch-detach_preview").closest(".ui-toggle"):"show_sampled_variables"!==t&&"show_sampled_values"!==t||(e=V("#"+t));var s=!1,r=!1,a=!1;"show_code_editor"==(t=t||e.data("aspect"))||"show_code_editor"==e.data("aspect")?(r=e,e=V("#toggle-full-code-editor"),s=V("#code-editor-alias")):"show_extra_actions"==t?(r=e,e=V("#show_extra_actions")):"show_sampled_variables"===t||"show_sampled_values"===t?(r=e,e=V("#"+t)):"hover_inspect"==t?(r=e,e=V("#hover-inspect-toggle")):"selname_code_synced"==t?(r=e,e=V("#selname_code_synced")):"code_manual_resize"==t?(r=e,e=V("#code_manual_resize")):"pseudo_classes"!=t&&"pseudo_elements"!=t&&"page_specific"!=t&&"favourite_filter"!=t||(a=V("#css-filters"),r=e,s=B.get_css_filter_alias(e,t));var o=e.hasClass("on")?0:1;return W.endT(arguments),{clicked:e,aspect:t,turnOn:o,alreadyOn:!o,$alias:s,$aliasTrigEl:r,$filter_scope:a}},feature_on:function(e,t,s){W.startT(arguments),s=s||{};var r=B.get_toggle_data(e,t);s.offFirst&&(B.feature_off(e,t,s.offFirst),r=B.get_toggle_data(e,t)),r.alreadyOn||B.toggle_feature(e,t,s),W.endT(arguments)},feature_off:function(e,t,s){W.startT(arguments),s=s||{},B.get_toggle_data(e,t).alreadyOn&&B.toggle_feature(e,t,s),s.onAgain&&B.feature_on(e,t,s.onAgain),W.endT(arguments)},toggle_inline_gui:function(){var e=G.eds["adaptable-editor"];e.isFocused()?(e.blur(),G.gui_shortcut_clicked()):B.editor_and_gui()?(B.picker_method("hide"),e.focus()):B.trigger_pg_icon_click("code")},toggle_feature:function(e,t,s){W.startT(arguments);var r=B.get_toggle_data(e,t);e=r.clicked,t=r.aspect,s=s||{};var a=r.turnOn,o=!!r.$filter_scope&&r.$filter_scope,n="",i=e.data("pref_sub_key");if("show_interface"===t&&B.pref.detach_preview)return!1;s.pref_sub_key=i||!1,s.tmp&&(B.tmp[t]=a?"turnedOn":"turnedOff"),s.fHTML=W.isDefined(s.fHTML)?s.fHTML:e.data("fhtml"),s.noSave=W.isDefined(s.noSave)?s.noSave:parseInt(e.data("no-save"));var l,c,d,_,u,p=s.fHTML&&B.stat.fHTML?B.stat.tvr.add(B.stat.fHTML):B.stat.tvr,f=(s.extraClass&&s.extraClass,r.$alias?e.add(r.$alias):e),g=!1;a?(p.addClass(t),B.detached_window_available()&&m.add_html_class(t),f.addClass("on"),"show_time_concurrently"==t&&(s.noSave=1,W.log_concurrent=1),o&&"favourite_filter"!=t||(g=e.data("neg")),"show_rulers"==t?B.get_local_window_function("show_rulers")():"dock_editor_left"===t||"dock_options_left"===t||"detach_preview"===t?B.toggle_layout_view(t,a):"dock_wizard_right"==t?B.move_wizard_right():"enable_beaver_builder"===t?(x&&!s.uiCorrection&&v.activate_builder("FLBuilder"),B.stat.tvr.addClass("FLBuilder_is_on")):"activate_elementor"==t?v.activate_builder("elementor",!1,B.pageOrPostID):"activate_oxygen"==t?v.activate_builder("oxygen",!1,B.pageOrPostID):"selname_code_synced"==t?B.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(B.stat.code.find("div.css-code-wrap").add(B.stat.inlineEditor).css("height",""),G.get_focus_editor().resize(),B.toolbar_adjusted()):"show_code_editor"==t?(B.pref[t]=a,B.default_to_tab("css"),this.modify_active_editors({resize:!0,updateHeight:B.horizontal_only()}),B.toolbar_adjusted()):"hover_inspect"==t?B.iframe_functions_loaded()&&x.bind_wizard_hover():"fullscreen"==t?W.enable_full_screen():"wizard_expanded"==t?(B.pref[t]=a,this.wizard_expanded()):"show_interface"==t?(B.toolbar_adjusted(),"turnedOff"==B.tmp.hover_inspect&&(B.tmp.hover_inspect=!1,B.feature_on(!1,"hover_inspect",{noSave:1}))):"mt_highlight"==t?(s.con&&x&&x.reposition_overlays(s),B.highlightEnabled=!0):o&&e.hasClass("filter-editable")?e.find("input.combobox").select():"favourite_filter"==t&&B.filter_favourited(e,s,t)):("show_time_concurrently"==t&&(s.noSave=1,W.log_concurrent=0),f.removeClass("on"),o&&o.find("ul.flist-"+t).find("li.css-filter-item.on").length||p.removeClass(t),B.detached_window_available()&&m.remove_html_class(t),o&&"favourite_filter"!=t||(g=e.data("pos")),"show_rulers"==t?B.get_local_window_function("hide_rulers")():"dock_editor_left"===t||"dock_options_left"===t||"detach_preview"===t?B.toggle_layout_view(t,a):"dock_wizard_right"===t?B.move_wizard_top():"enable_beaver_builder"===t?(x&&!s.uiCorrection&&v.get("FLBuilder").deactivate(),B.stat.tvr.removeClass("FLBuilder_is_on")):"activate_elementor"===t?v.deactivate_builder("elementor"):"activate_oxygen"===t?v.deactivate_builder("oxygen"):"selname_code_synced"==t?B.selname_code_synced(r.$aliasTrigEl,a):"code_manual_resize"==t?(c=(l=B.stat.adaptableEditor).attr("id"),(d=G.eds[c])&&B.horizontal_only()&&(_=d.session.getLength(),G.editor_update_height(d,l,16*_)),B.toolbar_adjusted()):"hover_inspect"==t?B.iframe_functions_loaded()&&x.unbind_wizard_hover():"show_code_editor"==t?(B.pref[t]=a,B.default_to_tab("mq"),this.modify_active_editors({resize:!0,updateHeight:B.horizontal_only()}),B.adjust_scroll_buttons(!1,"responsive"),B.toolbar_adjusted()):"fullscreen"==t?W.disable_full_screen():"wizard_expanded"==t?(B.pref[t]=a,this.wizard_collapsed()):"show_interface"==t?(B.toolbar_adjusted(),B.feature_off(!1,"hover_inspect",{tmp:1,noSave:1})):"mt_highlight"==t?B.highlightEnabled=!1:"favourite_filter"==t&&B.filter_un_favourited(e,s,t)),s.pref_sub_key?(B.pref[t][s.pref_sub_key]=a,n+="&pref_sub_key="+s.pref_sub_key):B.pref[t]=a,g&&B.refresh_tt(f,g,r.$aliasTrigEl),e.data("text-pos")&&(u=a?e.data("text-neg"):e.data("text-pos"),e.text(u)),o&&B.pseudo_updated(e,{toggle:1,turnOn:a}),"dock_wizard_right"!==t||a?"show_text_labels"===t?B.toolbar_adjusted():"mt_nonlog"===t?B.change_preview_url(B.stat.toolsMenu.find(".change-preview-url"),void 0,!0):"specificity_preference"===t&&x&&x.build_selector_suggestions_2():B.default_to_tab("wizard"),s.noSave||J.save_ui_toggle_update(t,a,n),W.endT(arguments)},wizard_expanded:function(){B.default_to_tab("wizard"),B.maybe_update_wizard_panels({forceHTMLUpdate:1,updateVisEditor:1})},wizard_collapsed:function(){},after_animation:function(e,t){var s="transition"===t.type?"transitionend.tvr webkitTransitionEnd.tvr oTransitionEnd.tvr otransitionend.tvr MSTransitionEnd.tvr":"oanimationend.tvr animationend.tvr webkitAnimationEnd.tvr";e.on(s,function(e){"elementorLeftPanelAdjusted"!==t.aspect||"left"!==e.originalEvent.propertyName&&"width"!==e.originalEvent.propertyName||v.builderLeftPanelAdjusted("elementor",!0)})},sidebar_size:parseInt(TvrMT.data.dyn.pref.sidebar_size),effective_sidebar_size:function(){return this.sidebar_showing()?B.sidebar_size:0},sidebar_sizes_map:{0:0,sm:200,md:300,lg:360,xl:750},sidebar_size_category:function(e){e=e||this.sidebar_size;var t=this.sidebar_sizes_map,s="0";for(var r in t)t.hasOwnProperty(r)&&e>=t[r]&&(s=r);return{key:s}},modify_active_editors:function(e){var t=B.stat.adaptableEditor,s=G.eds["adaptable-editor"];e.updateHeight&&G.editor_update_height(s,t,16*s.session.getLength()),e.resize&&(s.resize(),G.update_editor_gutter(s))},set_sidebar_size:function(e,t){var s=t||B.sidebar_size,r=this.get_sidebar_container(e);return s<360&&(s=360),!!r&&(0!=parseInt(B.stat.front.css("marginLeft"))-s&&(B.stat.front.css("marginLeft",s+"px"),this.sidebar_size_changed(s,r)),r)},get_editor_containers:function(){return{$containers:B.stat.inlineEditor}},get_sidebar_container:function(e,t){return!(B.preview_is_detached()&&!B.all_options_left()&&!t)&&{$containers:e?B.stat.inlineEditor:B.stat.opts.add(B.stat.inlineEditor),size:B.sidebar_size,effective_size:B.effective_sidebar_size()}},sidebar_size_changed:function(e,t){t.$containers.outerWidth(e);var s=this.sidebar_size_category(e);this.change_sidebar_size_class(e),B.sidebar_size=e,B.pref.sidebar_size_category=s.key,V.get(B.ajaxUrl+"&sidebar_size="+e+"&sidebar_size_category="+s.key,function(){}),this.modify_active_editors({resize:!0}),B.reset_preview_width_for_current_tab(!1,!0)},change_sidebar_size_class:function(e){var t=this.sidebar_size_category(e);return B.stat.tvr.removeClass("mts-sm mts-md mts-lg mts-xl").addClass("mts-"+t.key),t.key},horizontal_only:function(){return!B.pref.dock_editor_left&&!B.pref.dock_options_left&&!B.pref.detach_preview},flexible_field_widths:function(){return!B.pref.dock_options_left},editor_height_settable:function(){return B.horizontal_only()&&!B.pref.code_manual_resize},editor_and_gui:function(){return B.pref.detach_preview||B.pref.dock_editor_left&&!B.pref.dock_options_left},all_options_left:function(){return B.pref.dock_options_left},editor_showing_left:function(){return(B.pref.dock_editor_left||B.pref.dock_options_left)&&!B.pref.detach_preview},show_editor_gutter:function(){return!this.editor_showing_left()||"sm"!==B.pref.sidebar_size_category},editor_only_left:function(){return B.pref.dock_editor_left&&!B.pref.detach_preview&&!B.pref.dock_options_left},options_left_editor_right:function(){return B.pref.dock_options_left&&B.pref.detach_preview},preview_is_detached:function(){return B.pref.detach_preview},sidebar_showing:function(){return!B.pref.detach_preview&&(B.pref.dock_editor_left||B.pref.dock_options_left)||B.pref.detach_preview&&B.pref.dock_options_left},maybe_adjust_side_options:function(e){B.sidebar_showing()&&!B.preview_is_detached()&&this.modify_active_editors({resize:!0})},toggle_layout_view:function(e,t){var s=(B.pref[e]=t)?e:e+"_off";B.trigger_pg_icon_click(),this[s](),this.toolbar_adjusted(),B.reset_preview_width_for_current_tab(!1,!0)},reset_sidebar_dimensions:function(e){var t=this.get_sidebar_container(e,!0);t&&(t.$containers.css({width:"",height:""}),this.modify_active_editors({resize:!0,updateHeight:!B.preview_is_detached()})),B.stat.front.css("marginLeft",0),B.adjust_scroll_buttons(B.get_pg_meta(),"style")},dock_sidebar_common:function(e){var t=this.set_sidebar_size(e);t&&t.$containers.css("height","")},dock_editor_left:function(){B.all_options_left()&&B.feature_off(!1,"dock_options_left"),this.dock_sidebar_common(!0),B.trigger_pg_icon_click()},dock_editor_left_off:function(){this.reset_sidebar_dimensions(!0)},dock_options_left:function(){B.all_options_left()&&B.feature_off(!1,"dock_editor_left"),this.dock_sidebar_common(!1)},dock_options_left_off:function(){this.reset_sidebar_dimensions()},detach_preview:function(){window.frames.viframe.location=B.pluginUrl+"includes/place-holder2.html",window.name="MTroot",window.TvrMT.detachedWin=window.open("admin.php?page=tvr-microthemer-preview-wrap.php","detachedPreview"),B.all_options_left()||this.reset_sidebar_dimensions(B.editor_only_left()),this.modify_active_editors({resize:!0}),B.detached_window_available()&&m.remove_window_inactive_notice()},detach_preview_off:function(){B.editor_showing_left()?this.dock_sidebar_common(B.editor_only_left()):B.horizontal_only()&&this.modify_active_editors({resize:!0,updateHeight:!0}),B.detached_window_available()&&m.deactivate_window(),B.stat.iframeDoc=window.frames.viframe,MTlocal.maybe_load_site_preview()},retrieve_or_load_detached:function(){window.name="MTroot";var e=window.open("","detachedPreview");if(e&&e.MTdetached){if(e.opener=window,e.MTdetached.set_vars(),e.MTlocal.update_TvrMT_and_other_vars(window.TvrMT),m=window.TvrMT.MTdetached,!(x=window.TvrMT.MTF))return void e.MTlocal.maybe_load_site_preview();x.set_vars(),x.trigger_iframe_loaded(),x.unbind_wizard_hover()}else B.toggle_layout_view("detach_preview",1)},move_wizard_right:function(){B.stat.front.after(B.stat.wiz.detach());var e=G.eds.wizard_inspector_html;e&&(e.resize(),G.set_code_wrap(e,!1)),B.toolbar_adjusted()},move_wizard_top:function(){B.stat.code.after(B.stat.wiz.detach());var e=G.eds.wizard_inspector_html;e&&G.set_code_wrap(e,!0),B.toolbar_adjusted()},selname_code_synced:function(e,t){var s="selname_code_synced"==e.attr("id")?"wizard":"existing-sel",r=!!t,a="wizard"==s?V("#code-suggestions").find("li.in-focus").find(".sug-sel").val():e.closest(".float-form").find(".selector-css-textarea").val();a&&("wizard"==s?B.get_nice_name(a,!0,r):e.closest(".float-form").find("input.selector-name-input").val(B.get_nice_name(a,!1,r)))},filter_favourited:function(e,t,s){var r=e.closest("li").clone(!0,!1);r.removeAttr("title"),V("#fav-filters").append(r).hide().fadeIn("fast")},filter_un_favourited:function(e,t,s){var r=B.pseudo_class_format(e.closest("li").data("pref_sub_key"));V("#fav-filters").find("li."+r).fadeOut("fast",function(){V(this).remove()})},toggle_screen_preview:function(e){W.startT(arguments),((e=e.closest("li.mt-screen-preview")).hasClass("clicked")?B.get_local_window_function("unset_screen_preview"):B.get_local_window_function("set_screen_preview"))(e,"clicked"),W.endT(arguments)},screen_width_adjusted:function(e,t){W.startT(arguments),B.iframe_functions_loaded()&&(B.post_screen_width_adjusted(e,t),W.action_after_timeout("screen_width_adjusted",550,{item:B.post_screen_width_adjusted,args:[e,t]})),W.endT(arguments)},post_screen_width_adjusted:function(e,t){t=t||{},x.reposition_overlays({con:e,scroll:0}),x.getAndUpdateCompStyles(!1,!1),t.skip||B.maybe_update_wizard_panels(t)},map_formatted_comp:function(e,t,s,r,a,o,n,i,l){var c;if(W.startT(arguments),c=l?B.intelliCompProps:B.compProps,"straight"==s&&("var"==t?c[e[r]]=o:(0==a&&(c[e[r]]=[]),c[e[r]][a]=[],c[e[r]][a].val=o,c[e[r]][a].htmlString=n)),"array"==s){var d=-1,_=e[r];for(var u in _)_.hasOwnProperty(u)&&("var"==t?c[_[u]]=i[++d]:(0==a&&(c[_[u]]=[]),c[_[u]][a]=[],c[_[u]][a].val=i[++d],c[_[u]][a].htmlString=n))}l?B.intelliCompProps=c:B.compProps=c,W.endT(arguments)},format_exceptions:function(e,t,s,r,a,o){var n,i,l,c,d,_,u,p,f,g,m,v,h,b,y,w,T,x,k,C,S,M,j,D;if(W.startT(arguments),"var"==a?n=s:(n=s[r].val,i=s[r].htmlString),!W.hasValue(n))return!1;"font-family"==t||"display"==t||"grid-template-areas"==t||"list-style-type"==t||"border-top-left-radius"==t||"border-top-right-radius"==t||"border-bottom-right-radius"==t||"border-bottom-left-radius"==t?B.map_formatted_comp(e,a,"straight",t,r,n,i,[],o):"text-shadow"==t||"box-shadow"==t?((u=n.match(/(-?\d+px)|(rgba?\(.+\))/g))?"MSIE"!=B.browser&&(l=u[1],c=u[2],d=W.replace_decimals(u[0],1),_=u[3],"text-shadow"==t?u=[l,c,_,d]:"box-shadow"==t&&(u=[l,c,_,u[4],d,u[5]])):(u=[0,0,0,"none"],"box-shadow"==t&&(u[3]=0,u[4]="none",u[5]="")),B.map_formatted_comp(e,a,"array",t,r,n,i,u,o)):"list-style-image"==t?B.map_formatted_comp(e,a,"straight",t,r,W.basename(n),i,[],o):"background-img-full"==t?((p=[])[0]=W.extract_str("bg-image",n),(f=W.extract_str("gradient",n))?(g=/gradient\((.+)\)/.exec(f))?(m=g[1],v=W.get_all_matches(m,/rgba?\([^)]+\)/g,0),h=W.replace_all_matches(m,v,"xxx").split(", "),b="",0<=n.indexOf("webkit")&&(b="webkit-"),w=!(y="top to bottom"),-1<h[x=T=0].indexOf("deg")&&(y=e.keys[b+"gradient-angle"][h[0]],w=!0,x=1),p[1]=y,p[2]=v[T],w&&3<h.length||!w&&2<h.length?(k=h[++x].split(" "),p[3]=v[++T],p[4]=k[1],p[5]=v[++T]):(p[3]=v[++T],p[4]="0",p[5]="none")):-1<f.indexOf("svg")&&(p[1]="IE9 can't report",p[2]="IE9 can't report",p[3]="IE9 can't report",p[4]="IE9 can't report",p[5]="IE9 can't report"):(p[1]="none",p[2]="none",p[3]="none",p[4]="0",p[5]="none"),B.map_formatted_comp(e,a,"array",t,r,n,i,p,o)):"background-position"==t?(C=(D=n.split(", "))[0].split(" "),S=e.keys["background-position-x"][C[0]],M=e.keys["background-position-y"][C[1]],j=(S||C[0])+" "+(M||C[1]),B.map_formatted_comp(e,a,"straight",t,r,j,i,[],o)):"background-repeat"!=t&&"background-attachment"!=t&&"background-size"!=t&&"background-clip"!=t||(D=n.split(", "),B.map_formatted_comp(e,a,"straight",t,r,D[0],i,[],o)),W.endT(arguments)},filter_css_exceptions:function(e){var t;W.startT(arguments),t=e?B.intelliCompProps:B.compProps;var s=TvrMT.data.prog.propExc,r=0;for(var a in t)if(t.hasOwnProperty(a)){++r;var o=t[a];if(o===Object(o))for(var n in o)o.hasOwnProperty(n)&&B.format_exceptions(s,a,o,n,"obj",e);else B.format_exceptions(s,a,o,"","var",e)}return W.endT(arguments),r},refresh_comp_css:function(k){if(W.startT(arguments),!B.iframe_functions_loaded())return W.endT(arguments),!1;var e=!!k;if(k=k||V("#"+B.selInFocusID),!e&&!W.isDomEl(k))return W.endT(arguments),!1;if(B.filter_css_exceptions(!1)<1){var t=TvrLang.null_selector;return k.find(".option-value").text(t),k.find("div.field-wrap").removeClass("mixed-cp").find("span.comp-style").text(""),void W.endT(arguments)}var s="div.field-wrap:not(.tvr-editor-area)",r=B.pref.pg_focus?k.find("li.group-tag-"+B.pref.pg_focus).find(s):k.find(s),C=B.get_nth_focus();r.each(function(e){var t=V(this);if(!t.hasClass("group-label")&&!t.hasClass("sub-label")){var s=t.find(".option-label"),r=t.find(".option-value"),a=s.text(),o=t.find("span.comp-style"),n=t.find(".property-input"),i=n.val(),l=o.attr("class").split(" ")[1].replace("cprop-",""),c=l,d=s.data("prop"),_=TvrMT.data.prog.pg_tab_props.grid.griditems[d],u=TvrMT.data.prog.pg_tab_props.grid.allgriditems[d],p=u?1:C-1;B.propAliases[l]&&(l=B.propAliases[l]);var f="grid"===B.pref.pg_focus&&0<C&&B.grid.items&&B.grid.items.length&&B.grid.items[p]&&(_||u)&&(k.find(".grid-tab-griditems").hasClass("active")||k.find(".grid-tab-allgriditems").hasClass("active"))?B.grid.items[p].comp[l]:B.compProps[l],g=!1,m=t.hasClass("has-variable-line");"event"===l?f=i||("animation"===B.pref.pg_focus?"page load":"unknown"):"event-target"===l?f=i||"self":"event-value"===l&&(f=i||"not set"),B.compProps[c]=f;var v=0;if(W.isDefined(f))if(f===Object(f)){t.addClass("mixed-cp"),B.update_comp_input_overlay(t,o,"[mix]");var h=TvrLang.value_varies,b="";for(var y in f){f.hasOwnProperty(y)&&W.isDefined(f[y].val)&&(b+='<tr class="mixed-val" rel="'+v+'"><td>'+ ++v+"</td><td title='"+f[y].htmlString.replace("&#60;","<").replace("&#62;",">")+"'>"+B.colored_box(f[y].val,!0)+"</td></tr>")}t.find("table.comp-mixed-table").find("tbody").html(b)}else{h=f;t.removeClass("mixed-cp");var w,T=f;m||(f=B.truncate_displayed_comp_css(n,f)),t.hasClass("is-picker")?(g=!0,w="background-color:transparent","transparent"!=T&&"none"!=T&&(w="background-color:"+T,h=W.maybe_to_hex(T)),o.html('<span style="'+w+'"></span>')):B.update_comp_input_overlay(t,o,f)}else{h=TvrLang.style_not_applicable;"Content"==a&&(h=TvrLang.not_knowable),o.text("")}var x=g?B.trans_gradient_box(T,"computed-color-box")+h:h;r.html(x)}}),k.addClass("visible-computed"),B.flexbox_dynamic_gui(k,{compProps:B.compProps}),"grid"===B.pref.pg_focus&&(p.update_nth_radios(),B.skipGridReflow?B.skipGridReflow=!1:p.itemResising||p.update_grid_canvas()),W.endT(arguments)},update_comp_input_overlay:function(e,t,s){var r,a;e.hasClass("has-variable-line")?(r=s.split(" "),a=r.length?r:[s],t.each(function(e){V(this).html(a[e])})):t.html(s)},flexbox_dynamic_gui:function(e,t){var s,r;t.compProps["flex-direction"]&&(s=e.find("div.property-flexbox"),r=t.compProps["flex-direction"],s.removeClass("flex-direction-column flex-direction-column-reverse flex-direction-row-reverse"),W.in_array(r,["column","column-reverse","row-reverse"])&&s.addClass("flex-direction-"+r))},truncate_displayed_comp_css:function(e,t){W.startT(arguments);var s=e.width()/6;return s<t.length&&(t=t.substring(0,s)+"..."),W.endT(arguments),t},colored_box:function(e){if(!e||e.indexOf("rgb")<0||-1<e.indexOf(":"))return e;var t=W.maybe_to_hex(e),s=B.trans_gradient_box(e);return s+='<span class="colored-val">'+t+"</span>"},trans_gradient_box:function(e,t){return'<span class="'+(t=t||"colored-box")+'" style="background-image: linear-gradient(0deg, '+e+", "+e+"), url("+B.pluginUrl+'images/trans.png)"></span>'},slugs_from_id:function(e){var t=e.split("-"),s=t[1],r=t[2],a=(a=W.checkObject(B.uiData,[s,r,"label"]))?a.split("|"):[];return!!t.length&&{sectionSlug:s,selectorSlug:r,selectorH:a[0],selectorCode:a[1]}},default_to_sel:function(){W.startT(arguments);var e,t=W.checkObject(B.uiData,["non_section","meta","last_viewed_selector"]),s=!!t&&B.slugs_from_id(t);if(s&&W.checkObject(B.uiData,[s.sectionSlug,s.selectorSlug])||(s=C.modify_main_js_object("get_first_sel",{incRecurse:!1,callbackDepth:["selector"]}).slugs),!s)return!1;e=B.load_selector(s,{items:["selectorM"]}),B.tvr_iterate_selectors_v(e),W.endT(arguments)},get_manual_wrap_class:function(e){return e.hasClass("mt-vl-input")?".vl-item":".tvr-input-wrap"},adjust_comp_span:function(e,t){W.startT(arguments);var s=this.get_manual_wrap_class(e);"after"==t?e.val()?this.remove_comp_overlay(e,s):this.add_comp_overlay(e,s):"hover"==t&&e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden"),W.endT(arguments)},add_comp_overlay:function(e,t){e.closest(t).removeClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").removeClass("hidden")},remove_comp_overlay:function(e,t){e.closest(t).addClass("manual-val"),e.siblings("span.comp-style:not(.comp-for-picker)").addClass("hidden")},chain_is_on:function(e){return W.isDomEl(e.subgroup.find("input.chained-tracker"))},sync_fields:function(e,a,o){W.startT(arguments);var t=B.get_subgroup_or_tabgroup(a,"inputs"),n=e.val(),i=!1;t.not(e).not(".vl-name-input").each(function(e){var t,s,r=V(this);r.hasClass("color")?(r.hasClass("bound")||B.colorpicker_bind(r.parent()),n?B.maybe_set_variable_color(n,r,!1,!0,!1)||B.update_spectrum(n,r,{},!1):B.clear_spectrum_inputs(B.get_meta(r,"property"))):(t=r.closest(".property-tag"),r.val(n),W.isDefined(o)&&(s=B.get_meta(r,"property"),S.apply_property_unit(n,n,o,t,s.groupSlug,s.propertySlug,{writeToLabel:1,writeToInput:1,trail:C.get_property_data(s).propLevels}))),0<e&&""===n&&t.hasClass("has-variable-line")&&(B.delete_variable_field(t,r,a,!1),i=!0),B.post_edit(r)}),i&&B.adjust_grid_line_scroll_buttons(a),W.endT(arguments)},maybe_sync_fields:function(e,t){var s;W.startT(arguments),e.hasClass("autofillable")&&(s=B.get_meta(e,"property"),B.chain_is_on(s)&&B.sync_fields(e,s,t)),W.endT(arguments)},sync_important:function(e,s){W.startT(arguments),B.chain_is_on(e)&&B.get_subgroup_or_tabgroup(e).not(e.property).each(function(e){var t=V(this).find("span.important-toggle");("add"==s&&!t.hasClass("active")||"remove"==s&&t.hasClass("active"))&&B.input_icon_toggle(t,!0)}),W.endT(arguments)},bind_keydown_events:function(t){t.on("keydown.tvr",function(e){if(t.hasClass("selector-name-input")&&B.pref.selname_code_synced)return!1}).on("blur",function(){t.off("keydown.tvr")})},run_input_updated:function(e,t){var s=e.attr("class"),r=!1;if(!s)return!1;if(0<=s.indexOf("property-input")){B.inputWaitingObj=e;var a=B.get_meta(e,"property"),o=e.val();if(o&&0===o.indexOf("="))if(!B.process_excel_function(o,a.propertySlug).converted)return B.post_edit(e),!0;B.maybe_sync_fields(e),B.post_edit(e)}else if(0<=s.indexOf("selector-css-textarea"))r=!0,B.pref.selname_code_synced&&e.closest(".float-form").find(".selector-name-input").val(e.val());else if(0<=s.indexOf("sp-input")){var n=B.get_related_meta("picker",e.closest(".sp-container")),i=B.inputWaitingObj=n.$input;if(-1<s.indexOf("sp-input-opacity")){var l=e.val();if(isNaN(l)||l<0||1<l)return;var c=i.spectrum("get").toRgb();c.a=l,i.spectrum("set",c),B.update_spectrum_inputs(tinycolor(c),i,e,!0)}else-1<s.indexOf("sp-input-var")?B.maybe_set_variable_color(e.val(),i,e,!0):B.update_spectrum(e.val(),i,e,!0)}r||B.set_input_timer()},maybe_set_variable_color:function(e,t,s,r,a){a=!W.isDefined(a)||a;var o,n,i=!K.isJustColor(e,!0)&&e;return i?(-1<i.indexOf("var(")?(n=K.get_variable_name(i))&&(o=K.get_variable_value(n,"css",!0)):-1<i.indexOf("$")&&(o=K.get_variable_value(n,"scss")),o&&B.update_spectrum(o,t,{},a,!0),s&&s.val(i),t.val(i),a&&B.maybe_sync_fields(t),!0):(r&&(B.update_spectrum(e,t,{},a,!0),t.val("")),!1)},bind_input_events:function(t){W.startT(arguments),B.unbind_input_events(t),t.on("input.tvr propertychange.tvr",function(e){B.run_input_updated(t,e)}),t.on("blur",function(){B.unbind_input_events(t)}),W.endT(arguments)},unbind_input_events:function(e){e.off("input.tvr propertychange.tvr")},update_input_width_and_scroll:function(e,t,s){W.startT(arguments),B.flexible_field_widths()&&(s||B.adjust_scroll_buttons(B.get_pg_meta(),"style")),W.endT(arguments)},maybe_scroll_image_fields:function(e){"list"!==e.groupSlug&&"background"!==e.groupSlug||e.group.find(".bg-image-select").each(function(){W.scroll_input_end(V(this))})},done_typing:function(){if(B.isForbiddenProperty(B.inputWaitingObj))return!1;J.ajax_save_settings({$property:B.inputWaitingObj})},get_folders:function(){W.startT(arguments);var s=[];return V("#tvr-menu").find(".section-tag").each(function(e){var t=B.get_meta(V(this),"section");s[e]=t.sectionH}),W.endT(arguments),s},show_wizard:function(e){W.startT(arguments),B.intelli=!0,B.stat.tvr.addClass("show-wizard");var t=B.stat.toolsMenu.width()+5;B.stat.rightStuff.css("right",t+"px"),x.maybe_stop_mutation_observer(),B.screen_width_adjusted("intelli"),TvrMT.data.prog.combo.cur_folders=B.get_folders();var s,r="";r=B.wiz_update_sel_mode?B.wiz_update_sel_mode.sectionH:W.hasValue(B.selInFocusID)?B.get_meta(V("#"+B.selInFocusID),"selector").sectionH:(s=W.obj_index(0,B.uiData,"non_section"))?s.this.label:"",B.stat.wizFolder.val(r).removeClass("text-label"),W.endT(arguments)},hide_wizard:function(){W.startT(arguments),B.stat.tvr.removeClass("show-wizard"),V("#right-stuff-wrap").css("right",""),B.screen_width_adjusted("reg",{skip:1}),B.intelli=!1,V("#wizard-name").val(""),B.redo_sug_sels("",!0),B.toolbar_adjusted(void 0,!1),B.stat.tvr.removeClass("wiz_update_sel"),B.wiz_update_sel_mode=!1,x.maybe_start_mutation_observer(),W.endT(arguments)},wiz_update_sel:function(e){W.startT(arguments);var t=B.get_meta(e,"selector");B.stat.tvr.addClass("wiz_update_sel"),B.wiz_update_sel_mode=t,B.is_cur("sel",t.selectorID)||B.tvr_iterate_selectors_v(t.selectorM),B.close_all_expanded(!1,!1,!0),B.feature_on(V("#hover-inspect-toggle"),"hover_inspect"),W.endT(arguments)},human_tagname:function(e){W.startT(arguments);var t={h1:"heading 1",h2:"heading 2",h3:"heading 3",h4:"heading 4",h5:"heading 5",h6:"heading 6",p:"paragraph",br:"line break",hr:"horizontal rule",abbr:"abbreviation",b:"bold",em:"emphasis",i:"emphasis",ins:"insert",pre:"preformatted",q:"quote",sub:"subscript",sup:"superscript",optgroup:"option group",img:"image",figcaption:"figure caption",a:"link",ul:"unordered list",ol:"ordered list",li:"list item",th:"table heading",tr:"table row",td:"table data",thead:"table head",tbody:"table body",tfoot:"table foot",col:"column",colgroup:"column group"};return W.endT(arguments),t[e]?t[e]:e},human_pseudo:function(e){var t=W.pseudo_str_to_arr(e),s="";for(var r in t)t.hasOwnProperty(r)&&(s+=t[r].replace(/^:nth\-(?:child|of\-type)\((.*)\)$/,":($1)").replace(/^:nth\-last\-(?:child|of\-type)\((.*)\)$/,":L($1)").replace("link","unvisited"));return s},humanize:function(e,t,s){W.startT(arguments),(s=s||{}).keepPre=s.keepPre?e:"";var r=new RegExp("("+e+")([_a-zA-Z0-9"+e+"\\(\\)\\[\\]=\\^\\*'\"\\/\\$~-]+)","g"),a=new RegExp(e,"g");return t=t.match(r),W.endT(arguments),t=t&&t[0]?t[0].replace(a,s.keepPre):"",s.keepDashes||(t=t.replace(/[-_]+/g," ")),t.trim()},ensure_unqique_name:function(e,t,s,r){W.startT(arguments);var a=1,o="create-new"==s?B.get_all_selector_code():{};do{var n=!1,i=new RegExp(" _\\d+$"),l=e.match(i)?(1===a&&(a=2),e.replace(i," _"+a)):1<a?e+" _"+a:e,c=W.convert_to_param(l);if("folderName"==s)n=B.uiData[c];else if("folderWithSpace"==s)n=B.uiData[c]&&W.obj_length(B.uiData[c])>=B.maxSelsPerFolder;else if("import"==s)n=r.unqSels[c]&&r.unqSels[c].code!=t;else if("create-new"==s)for(var d in o)if(o.hasOwnProperty(d)&&W.convert_to_param(o[d].sName)==c){n=!0;break}a++}while(n);return W.endT(arguments),l},human_css_name:function(e){W.startT(arguments);var t=[],s=e.split(","),r=x.sel_trail(s[0]).pieces.reverse();for(var a in r)r.hasOwnProperty(a)&&(t[a]={level:0==a?"child":"parent",tagName:r[a].split(/[#:\.]/)[0],id:B.humanize("#",r[a]),class:B.humanize("\\.",r[a]),pseudo:B.human_pseudo(r[a])});var o,n,i,l=[];for(var a in t){t.hasOwnProperty(a)&&(o=i="",n=t[a],i=B.human_tagname(n.tagName),n.pseudo&&(o=""+n.pseudo),n.id?l[a]=n.id:n.class?l[a]=n.class:l[a]=i,l[a]+=o)}var c,d="";s[1]&&(d=1==(c=s.length-1)?"& "+B.human_css_name(s[1].trim()):"+"+c+" "+TvrLang.more,l.unshift(d)),W.endT(arguments);l[0];var _=d?3:2,u=[];for(var p in l)if(l.hasOwnProperty(p)){if(_<=p)break;u.push(l[p])}var f=u.reverse().join(" ");return B.ensure_unqique_name(f,e,"create-new")},get_nice_name:function(e,t,s){var r;W.startT(arguments),e=e||B.intelli_css,W.startT("capitalizeFL"),r=s?e:W.capitalizeFL(B.human_css_name(e)),W.endT("capitalizeFL");var a=V("#wizard-name");if(!t||a.is(":focus")&&!W.isTextSelected(a[0])){W.isTextSelected(a[0]);return W.endT(arguments),r}a.val(r),B.el_selected&&B.maybe_auto_select_label(),W.endT(arguments)},maybe_auto_select_label:function(e){e=e||V("#wizard-name");var t=V("#code-suggestions").find("li.in-focus").find("input.sug-sel"),s=V("#css-filters").find("input.cssfilter-combo:focus"),r=V("#wizard_inspector_html").find("textarea:focus");B.pref.selname_code_synced||t.is(":focus")||s.length||r.length||TvrMT.integrate.elementor||e.select()},clear_wizard:function(){var e;W.startT(arguments),B.feature_off(0,"mt_highlight",{fHTML:1,noSave:1}),x.triggerEl={},V("#html-computed-css").find("span.comp-prop-value").html(""),V("#wizard-name").val(""),B.redo_sug_sels(""),V("#targets-nothing").removeClass("show"),V("#selector-naming").find(".refine-target-controls").find("span").addClass("disabled"),B.stat.breadcrumbs.html(""),(B.pref.wizard_expanded||B.pref.dock_wizard_right)&&(G.eds.wizard_inspector_html&&((e=G.eds.wizard_inspector_html).gotoLine(1,0),e.scrollToLine(1,!0,!0,function(){})),B.stat.actStyles.html("")),W.endT(arguments)},pseudo_updated:function(e,c){var t,d=e.closest("li");c.input&&(t=B.get_css_filter_alias(e),W.isDomEl(t)&&((t=t.find("input.combobox")).val(e.val()),B.update_input_width_and_scroll(t,4,!0)),B.update_input_width_and_scroll(e,4,!0));var s=V("#code-suggestions");s.find("li").each(function(e){c.manual=1,c.$li=d;var t=V(this),s=t.find(".sug-sel"),r=s.attr("rel"),a=t.data("level"),o=x.apply_css_filters(s.val(),x.dom.nodes[a],x.dom,c);if(s.val(o.code),!x.dom.sels.final[e]||x.dom.sels.final[e].refKey!==r)return!0;x.dom.sels.final[e].code=o.code,s.get(0).scrollLeft=s.get(0).scrollWidth;var n=s.attr("rel");if(n&&x.dom.sels.combo[n])for(var i=0;i<x.dom.sels.combo[n].length;i++){var l=x.dom.sels.combo[n][i],o=x.apply_css_filters(l,x.dom.nodes[a],x.dom,c);x.dom.sels.combo[n][i]=o.code}});var r=s.find("li.in-focus");W.isDomEl(r)?(B.sug_sel_updated(r.find("input"),{con:"manual"}),x.set_quick_go_options(x.triggerEl)):W.isDomEl(x.triggerEl)&&x.all_targeting_actions(x.triggerEl,{})},sug_sel_updated:function(e,t){var s,r=e.closest("li"),a=t.val?t.val:e.val(),a=B.strip_beyoned_brace(a);t.editingNameField&&(W.isDomEl(e)?e.val(a):(s='<li class="code-suggestion in-focus manual-edit" data-level="0"><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap"><input type="text" class="sug-sel combobox" value="'+W.regular_escape_quotes(a)+'" /></span><span class="num-els-icon-wrap">'+B.num_els_icon("")+"</span></li>",B.redo_sug_sels(s),r=V("#code-suggestions").find("li"))),"manual"==t.con&&(V("#code-suggestions").addClass("has-manual-edit").find("li.manual-edit").removeClass("manual-edit"),r.addClass("manual-edit"));var o=x.jquery_compat_sel_elements(a),n=o.length;r.find(".num-els-icon-wrap").add(V("#selector-naming").find(".num-els-icon-wrap")).html(B.num_els_icon(n));var i,l=!!n;n&&o.each(function(){if(V(this).is(x.triggerEl))return l=!1}),l&&(i=o.first(),x.all_targeting_actions(i,{}),x.element_selected(i)),B.intelli_css=a,x.reposition_overlays({con:"intelli"}),B.update_invalid_selector_msg("#no-element"==o.selector,a,n),B.get_nice_name(a,!0,B.pref.selname_code_synced)},sug_sel_mouseenter:function(e){B.intelli_css=e.hasClass("mt-el-quick-item")?e.data("code"):e.val(),V("#code-suggestions").find("li.in-focus").addClass("hover-elsewhere"),B.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"intelli",css:B.intelli_css,scroll:0})},sug_sel_mouseleave:function(){var e=V("#code-suggestions").find("li.in-focus");W.isDomEl(e)&&(e.removeClass("hover-elsewhere"),B.intelli_css=e.find(".sug-sel").val(),B.iframe_functions_loaded()&&x.reposition_overlays({con:"intelli",scroll:0}))},update_selector_suggestions:function(){W.startT(arguments),V("#code-suggestions").find("li.in-focus").hasClass("manual-edit")||B.get_nice_name(!1,!0,B.pref.selname_code_synced);for(var e="",t=0;t<x.dom.sels.final.length;t++){var s=x.dom.sels.final[t],r='data-level="'+s.level+'"',a=s.isCombo?" combobox has-arrows":"",o=a?'data-appto="#refine-targeting-pane"':"",n=s.isCombo?" combobox-has-arrows ":"",i=a?'<span class="combo-arrow"></span>':"",l=(a&&"x_plus"==s.refKey?"<sup>+</sup>":"")?"+":"",c=a?'rel="'+s.refKey+'"':"";e+='<li class="code-suggestion" '+r+'><span class="sugsel-radio tvr-icon" title="'+TvrLang.choose_suggestion+'"></span><span class="tvr-input-wrap'+n+'"><input type="text" class="sug-sel'+a+'" value="'+W.regular_escape_quotes(s.code)+'" '+c+" "+o+" />"+i+'</span><span class="num-els-icon-wrap">'+B.num_els_icon(s.n,l)+"</span></li>"}B.redo_sug_sels(e),B.update_invalid_selector_msg(x.dom.invalidSel),W.endT(arguments)},redo_sug_sels:function(e,t){var s=V("#code-suggestions");t?s.removeClass("has-manual-edit").html(e):(s.find("li").not(".manual-edit").remove(),s.append(e));var r=s.find("li").first();r.addClass("in-focus"),V("#selector-naming").find(".wiz-name").find(".num-els-icon-wrap").html(B.num_els_icon(r.find(".num-els-icon").text())),s.find("input.sug-sel").add(V("#wizard-name")).each(function(){var e=V(this);e.get(0).scrollLeft=e.get(0).scrollWidth})},update_invalid_selector_msg:function(e,t,s){var r="",a="";for(var o in x.dom.sels.nothing){x.dom.sels.nothing.hasOwnProperty(o)&&(a+="<li>"+x.dom.sels.nothing[o].code+"</li>")}e&&(t=t||x.dom.sels.nothing[0].code,r+='<li title="'+TvrLang.invalid_sel_long+'">'+t+"</li>"),V("#targets-nothing-sels").html(a),V("#targets-nothing-invalid").html(r),W.isDefined(s)&&s<1||x.dom.sels.nothing.length||e?(V("#targets-nothing").addClass("show"),B.stat.tvr.addClass("targets_nothing")):(V("#targets-nothing").removeClass("show"),B.stat.tvr.removeClass("targets_nothing")),e?V("#nothing-invalid").addClass("show"):V("#nothing-invalid").removeClass("show"),x.dom.sels.nothing.length?V("#nothing-valid").addClass("show"):V("#nothing-valid").removeClass("show")},num_els_icon:function(e,t){t=t||"";var s=e.toString();return'<span class="num-els-icon'+(0===e?" el-targets-nothing":"")+'" title="'+(1===e?tvrsprintf(TvrLang.n_els,s):tvrsprintf(TvrLang.n_els_plural,s+t))+'">'+e+"</span>"},refresh_wizard_comp_css:function(){W.startT(arguments),B.filter_css_exceptions("intelli");var e=B.intelliCompProps=B.un_flatten_css(B.intelliCompProps),t=B.pgInFocusWiz;V("#comp-"+t).find("li.property-item").remove();var s,r,a="",o=1,n="";for(var i in e[t]){e[t].hasOwnProperty(i)&&(n=W.isOdd(o)?"row-odd":"row-even",s=i.replace(/-/g," "),(r=e[t][i])&&-1<r.toString().indexOf("rgb")&&(r=B.trans_gradient_box(r)+" "+W.maybe_to_hex(r)),a+='<li class="property-item accordion-item '+n+'">',a+='<span class="comp-prop-label">'+s+":</span> ",a+='<span class="comp-prop-value">'+r+"</span>",a+="</li>",++o)}a+='<li class="property-item accordion-item bottom-gap"></li>',V("#comp-"+t).append(a),W.endT(arguments)},un_flatten_css:function(e){W.startT(arguments);var t,s=[];for(var r in B.cssProps)if(B.cssProps.hasOwnProperty(r))for(var a in s[r]=[],B.cssProps[r]){B.cssProps[r].hasOwnProperty(a)&&("background-img-full"===(t=B.cssProps[r][a].cssf)||"extracted-gradient"===t||"google-font"===t||B.propAliases[t]||"order-grid"===t||"text-shadow"===t||"box-shadow"===t||"background-image"===t&&"gradient"===r||(s[r][t]=e[t]))}return W.endT(arguments),s},wizard_new_or_update_selector:function(e,t,s){if(W.startT(arguments),B.pref.show_code_editor){if(!B.pref.buyer_validated&&15<G.count_editor_selectors())return alert(TvrLang.trial_notice),!1;(s=s||V("#code-suggestions").find("li.in-focus .sug-sel").val())&&G.insert_code_view_selector(s)}else{var r,a=V("#wizard_folder").val();if(!W.hasValue(a)||a===TvrLang.wizard_folder)return alert(TvrLang.wizard_folder_alert),!1;s?r=B.get_nice_name(s,!1,B.pref.selname_code_synced):(r=V("#wizard-name").val(),s=V("#code-suggestions").find("li.in-focus .sug-sel").val());var o,n=W.convert_to_param(a);if(B.uiData[n]&&W.obj_length(B.uiData[n])>=B.maxSelsPerFolder&&(o=a,a=B.ensure_unqique_name(a,!1,"folderWithSpace"),n=W.convert_to_param(a),B.notifyFolderLimit={short:tvrsprintf(TvrLang.notify_folder_limit_short,B.maxSelsPerFolder-1),long:"<p>"+tvrsprintf(TvrLang.notify_folder_limit_long,a,o)+"</p>",type:"info"}),!W.isDomEl(V("#strk-"+n))&&!B.add_section(V("#new-section-add"),a))return!1;var i=B.get_meta(V("#strk-"+n),"section");if(0<=t.indexOf("wizard-add")){if(i.sectionM.find(".add-selector-form").find(".selector-name-input").val(r),i.sectionM.find(".add-selector-form").find(".selector-css-textarea").val(s),!B.add_selector(i.sectionM.find("span.add-selector")))return!1}else{var l=B.get_meta(V("#"+B.selInFocusID),"selector"),c=l.sectionSlug!==n&&n;if((c||l.selectorSlug!==W.convert_to_param(r)||l.selectorM.find(".selector-css-textarea").val()!==s)&&(l.selectorM.find(".selector-name-input").val(r),l.selectorM.find(".selector-css-textarea").val(s),!B.action_modify_selector(l.selectorM.find("span.edit-selector"),{},c)))return!1}}B.feature_off(!1,"hover_inspect",{noSave:1}),B.clear_css_filters(!0),W.endT(arguments)},ensure_backwards_compat:function(){W.startT(arguments);var e=parseInt(B.pref.manual_recompile_all_css);B.compile_non_compiled_selectors(!e),W.endT(arguments)},compile_non_compiled_selectors:function(e){B.uiData=C.filter_object_keys("clean",B.uiData,0);var t={M:{},template:"ui",no_style_node_update:!0,compile_non_compiled:!0,passNum:1,dataFormattingFixesOnly:e,onlyRun:{recurse_key:["m_query"]},onlyLoop:{recurse_key:["m_query"]}},s={section:[{item:C.ensure_folder_label,args:[!1]},{item:C.update_item_index,args:[!1]}],selector:[{item:C.update_item_index,args:[!1]},{item:C.check_jsu,args:[!1]},{item:C.check_values,args:[!1]}],group:[{item:C.check_values,args:[!1]}],property:[{item:C.update_property_values_structure,args:[!1]},{item:C.update_legacy_unit_structure,args:[!1]}]},r={section:[{item:C.update_dots,args:[!1]}],selector:[{item:C.check_jsu,args:[!e]},{item:C.update_dots,args:[!1]}],group:[{item:C.modify_item,args:["group_to_css",{dontUpdateSavePackage:e}]},{item:C.check_values,args:[!1]}]};t.maxDepth="property",t.cb=s;var a=C.run(B.uiData,t).settings;t.settings=a,t.maxDepth="group",t.cb=r,t.passNum++,a=C.run(B.uiData,t).settings;B.client_scss?a=C.run_global_scans(a,["scss_types"]):W.checkObject(B.uiData,["non_section","scss_usage"])&&delete B.uiData.non_section.scss_usage,(a=J.user_action(a,{items:["MT data structure updated"],icon:"data-structure lg-icon"})).savePackage&&a.savePackage.length&&(a.savePackage=!1,a.fullSCSSCompile=B.client_scss,J.ajax_save_settings({settings:a,serialise:!0})),parseInt(B.pref.manual_recompile_all_css)&&(B.pref.manual_recompile_all_css=0,V.get(B.ajaxUrl+"&manual_recompile_all_css=0",function(){}))},load_visual_view:function(e){if(W.startT(arguments),B.stat.body.addClass("tvr-visual"),G.init_editor_deps(),B.maybe_initiate_sass_js(),B.ensure_backwards_compat(),B.pref.detach_preview||MTlocal.maybe_load_site_preview(),B.pref.returned_ajax_msg&&!B.pref.returned_ajax_msg_seen)for(var t in B.pref.returned_ajax_msg)B.pref.returned_ajax_msg.hasOwnProperty(t)&&J.log(B.pref.returned_ajax_msg[parseInt(t)]);window.history.pushState&&parseInt(V("#clean-ui-url").attr("rel"))&&window.history.pushState(B.uiUrl,null,B.uiUrl),G.bind_editor(B.stat.inlineEditor,{filterClass:"custom-css-pre",mode:parseInt(B.pref.allow_scss)?"scss":"css",M:"css",directContent:"pending"}),p.bind_gridstack(),B.sidebar_showing()&&this.set_sidebar_size(B.editor_only_left(),!1),B.update_wizard_html({bindOnly:!0}),B.default_to_tab("mq"),B.default_to_sel(),B.toolbar_adjusted(),B.toggle_enabled_buttons(),B.pref.detach_preview&&this.retrieve_or_load_detached(),MTlocal.apply_rulers(),B.pref.show_code_editor&&B.default_to_tab("css"),B.pref.dock_wizard_right&&B.move_wizard_right(),window.launchMTUnlock&&B.show_dialog(V("#mt-renew-prompt")),B.adjust_scroll_buttons(!1,"responsive"),v.maybe_update_available_builder_name(),W.endT(arguments)},scss_div:"/*MTSCSSPART*/",sass_preloaded_files:[],sass_worker_to_mt_dir:"../../../../micro-themes/",maybe_initiate_sass_js:function(){B.client_scss&&(B.sass=new Sass,B.uiData.non_section.hand_coded_css,B.sass.options({style:Sass.style.expanded,indent:"\t"},function(){}),B.sass.importer(function(e,t){var s=e.resolved.replace("/sass/",""),r=B.check_file_exists(s,!0);r?W.in_array(r,B.sass_preloaded_files)?t({path:e.path}):J.simple_ajax_request({url:B.ajaxUrl+"&load_sass_import="+encodeURI(r),dataType:"json",plus:TvrLang.loading_sass_import,minus:TvrLang.loading_sass_import_failed,cbFunction:function(e,t){B.sass.writeFile(r,e.content,function(){B.sass_preloaded_files.push(r),t({content:e.content})})},cbfArgs:[t]}):t({error:"Import failed, no file found: "+s+". Try refreshing Microthemer if path is definitely correct."})}),B.sass.writeFile(TvrMT.data.dyn.preloaded_sass_imports,function(){B.sass_preloaded_files=Object.keys(TvrMT.data.dyn.preloaded_sass_imports),TvrMT.data.dyn.preloaded_sass_imports=null,B.sass.compile(B.uiData.non_section.hand_coded_css,function(e){})}))},parse_scss:function(e){try{return window.TvrSCSS.parse(e,{syntax:"scss"})}catch(e){}return!1},normalise_scss_type_name:function(e,t){return W.in_array(e,["variable","mixin","function"])?t.replace(/-/g,"_"):t},get_ast_child_node:function(e,t,s){for(var r=0;r<e.length;r++){var a=e[r];if(a.type===t)return s?a[s]:a}return!1},get_variable_node_data:function(e,t,s,r){var a=t.content[0].content,o=t.insideFM||r.insideFM,n=r.isRelatedType;if("property"===s.type){var i,l="";if((i=B.get_ast_child_node(s.parent.content,"value"))&&(e={value:l=i.toString()}),n&&!B.is_scss_global_var(l))return!(r.localDecs[a]=1)}else if(n&&(r.localDecs[a]||t.insideArg&&!t.insideDec))return!(r.localDecs[a]=1);return!(o&&r.onlyGlobalVars&&!B.is_scss_global_var(e.value)&&!B.is_scss_default_var(e.value))&&{name:a,value:e}},is_scss_global_var:function(e){return"string"==typeof e&&-1<e.indexOf("!global")},is_scss_default_var:function(e){return"string"==typeof e&&-1<e.indexOf("!default")},get_scss_types:function(d){var e=d.parseTree?d.parseTree:B.parse_scss(d.code);if(!e)return"parseFail";B.parseTreeDone||(B.parseTreeDone=!0);var _={},u=d.types?d.types:B.scss_types,p=!1;return e.traverse(function(e,t,s){var r=e.type,a=!1,o={value:1};("mixin"===r||s&&s.insideFM||"atrule"===r&&B.get_ast_child_node(e.content,"function"))&&(e.insideFM=1),("arguments"===r||s&&s.insideArg)&&(e.insideArg=1),("declaration"===r||s&&s.insideDec)&&(e.insideDec=1);var n,i=d.isRelatedType&&!W.in_array(r,["property","variable","extend"]);if(!W.in_array(r,u)||i)return!1;switch(r){case"atkeyword":if("import"!==(r=B.get_ast_child_node(e.content,"ident","content")))return!1;c=B.get_ast_child_node(s.content,"string","content");break;case"property":return e.parent=s,!1;case"variable":var l=B.get_variable_node_data(o,e,s,d);if(!l)return!1;c=l.name,o=l.value;break;case"function":if(c=e.content[0].content,W.in_array(c,K.css_functions))return!1;"atrule"===s.type&&(o={value:s.toString()},a={node:s,parent:s});break;case"mixin":c=B.get_ast_child_node(e.content,"ident","content"),o={value:e.toString()},a={node:e,parent:s};break;case"include":r="mixin",c=B.get_ast_child_node(e.content,"ident","content");break;case"extend":var c=B.get_ast_child_node(e.content,"selector").toString(),o={value:"extender"}}c=B.normalise_scss_type_name(r,c),W.checkObject(_,[r,c,"values"])||W.updateObject(_,[r,c,"values"],[]),_[r][c].values.push(o.value),d.isRelatedType||!a||(n=B.get_scss_types({isRelatedType:1,parseTree:a.node,types:["property","variable","extend","include","function"],localDecs:{},insideFM:1}))&&(_[r][c].related_types=n),1!==o.value&&(_[r][c].value=o.value,_[r][c].hasDeclaration=1),p=!0}),!!p&&_},maybe_merge_related_types:function(e,t){t&&(e.related_types||(e.related_types={}),e.related_types=V.extend(!0,e.related_types,t))},cross_update_related_types:function(e,t,s){for(var r=Object.keys(s),a=0;a<r.length;a++)for(var o=r[a],n=Object.keys(s[o]),i=0;i<n.length;i++){var l=n[i];W.checkObject(e,[o,l])||W.updateObject(e,[o,l],{}),B.maybe_merge_related_types(e[o][l],t)}},log_all_scss_usage:function(e,t,s,r,a){for(var o=Object.keys(s),n=0;n<o.length;n++)for(var i=o[n],l=s[i],c=Object.keys(l),d=0;d<c.length;d++){var _=c[d],u=V.extend(!0,{},s[i][_]),p=u.values,f=u.value,g=u.related_types;W.checkObject(t,[i,_,"deps"])||W.updateObject(t,[i,_,"deps"],[]),W.checkObject(t,[i,_,"values"])||W.updateObject(t,[i,_,"values"],[]);var m,v=t[i][_];p&&(v.values=v.values.concat(p)),g&&(B.maybe_merge_related_types(v,g),m={},W.updateObject(m,[i,_],{}),B.cross_update_related_types(t,m,g)),f&&(v.finalDecVal=f,v.type=f?K.checkStringValue(f):"unknown");var h={};f&&(h.hasDeclaration=1),e&&(V.extend(!0,h,{trail:r.trail.selector,mq_key:r.recurse.mq_key,sectionSlug:r.section_key,selectorSlug:r.selector_key}),v.deps.push(h));var b=u.locMeta;if(b){var y=Object.keys(b);for(k=0;k<y.length;k++){var w=y[k],T=V.extend(!0,{},b[w]),x=T.trail.join(".");W.checkObject(v,["locDone",x])||(v.deps.push(T),W.updateObject(v,["locDone",x],1),"removed"===T.action&&C.updateObjectAndSavePackage(r.settings.savePackage,[{action:"delete",trail:r.trail.item.concat(["scss_types","extend",_,"locMeta"]),key:w}]))}}}},get_raw_scss_or_selector:function(e,t){var s=t||e;return e.raw_scss?e.raw_scss:s.label.split("|")[1]+" {\n\n}\n"},tag_extended:function(e,t,s){if(!e.settings.extend)return!1;for(var r=e.settings.extend,a=Object.keys(r),o=B.uiData[e.section_key][e.selector_key],n=B.get_raw_scss_or_selector(t,o),i=0;i<a.length;i++){var l=a[i],c=r[l],d=c.action;if(B.extender_match(l,n)&&c.actions)for(var _=0;_<c.actions.length;_++){d=c.actions[_].action,e.settings.active_scss_types||(e.settings.active_scss_types={}),W.checkObject(e.settings.active_scss_types,["extend",l,"locMeta"])||W.updateObject(e.settings.active_scss_types,["extend",l,"locMeta"],{});var u=e.trail.selector.join(".");e.settings.active_scss_types.extend[l].locMeta[u]={action:d,trail:e.trail.selector,mq_key:s,sectionSlug:e.section_key,selectorSlug:e.selector_key}}}},log_all_scss_selectors:function(e,t,s){var r=e.settings.deps,a=(a=t.raw_scss)||"",o=e.trail.selector,n=e.section_key,i=B.get_selector_index_from_trail(n,o);r[s][i]={code:a,mq_key:s,sectionSlug:n,selectorSlug:e.selector_key,trail:o}},scss_types:["variable","function","mixin","include","extend","property","atkeyword"],prev_full_code_scss_types:{},compare_scss_types:function(e,t){e=e||{},t=t||{};for(var s=V.extend(!0,{},e),r=Object.keys(t),a=0;a<r.length;a++){var o=r[a],n=Object.keys(t[o]);e[o]||(s[o]={});for(var i=0;i<n.length;i++){var l=n[i],c=B.get_value_from_possible_object(W.checkObject(e,[o,l])),d=B.get_value_from_possible_object(t[o][l]);!1===c?s[o][l]={action:"added",actions:B.compare_add_remove_values(W.checkObject(e,[o,l,"values"]),W.checkObject(t,[o,l,"values"])),value:d,form:W.checkObject(h,[o,l,"hasDeclaration"])?"declaration":"instance"}:c===d&&delete s[o][l]}}for(var _=!1,u=Object.keys(s),p=0;p<u.length;p++){o=u[p],n=Object.keys(s[o]);for(var f=0;f<n.length;f++){var g,m,v,h,b,y,w,_=!0,l=n[f];"added"!==s[o][l].action&&(g=B.get_value_from_possible_object(W.checkObject(t,[o,l])),m=B.get_value_from_possible_object(W.checkObject(e,[o,l])),v=g?"changed":"removed",h=g?t:e,b=g||m,y=W.checkObject(h,[o,l,"hasDeclaration"])?"declaration":"instance",w={action:v,actions:B.compare_add_remove_values(W.checkObject(e,[o,l,"values"]),W.checkObject(t,[o,l,"values"])),value:b,form:y},"changed"==v&&(w.oldValue=m),s[o][l]=w)}}return!!_&&s},compare_add_remove_values:function(e,t){var s=[];return W.compare_array_values(t,e,"added",s),W.compare_array_values(e,t,"removed",s),!!s.length&&s},get_value_from_possible_object:function(e){return e===Object(e)?W.combine_array_values(e.values):e},get_co_dependent_types:function(e,t,s){var r,a={},o=!1,n=["extend"];if(t||n.push("variable"),e)for(var i=0;i<n.length;i++){var l=n[i],c=W.checkObject(e,[l]);c&&(a[l]=c,o=!0)}return!s||(r=B.get_extenders(s))&&(V.extend(!0,a,r),o=!0),!!o&&a},get_changed_and_co_dependents_types:function(e,t,s,r){var a=B.get_co_dependent_types(t,s,r);return!(!e&&!a)&&{changed:e,co_types:B.get_co_dependent_types(t,s,r)}},extender_match:function(e,t){var s=W.escapeRegExp(e),r=new RegExp("(?<!@extend\\s)"+s+"(?:[\\s{,]+)");return t.match(r)},get_extenders:function(e){var t=W.checkObject(B.uiData,e.split("."));if(!t)return!1;var s=W.checkObject(B.uiData,["non_section","scss_usage","extend"]);if(!s)return!1;for(var r=B.get_raw_scss_or_selector(t),a=!1,o=Object.keys(s),n={extend:{}},i=0;i<o.length;i++){var l=o[i];B.extender_match(l,r)&&(n.extend[l]={},a=!0)}return!!a&&n},cachedDeps:!1,prepare_scss_sources_obj:function(){return{sectionNodes:{},deps:B.cachedDeps?B.cachedDeps:B.prepare_dependent_sels_obj(),fullstring:"",parts:[]}},add_selective_sources:function(e,t,s){var r,a=B.get_changed_and_co_dependents_types(t.scss_types_changed,t.scss_types,t.codeEditorEdited,t.selIdentifier);s?(e.fullstring+=t.code+B.scss_div,e.parts.push(t)):(r=t.sectionIndex+t.index,e.deps[t.mq_key][r]=t);var o,n,i=W.checkObject(B.uiData,["non_section","scss_usage"]),l={selsAdded:{},relatedTypesChecked:{}},c=Object.keys(TvrMQsCombined);a&&i&&(e.deps=B.gather_dependent_selectors(e,a,i,l)),"hand_coded_css"!==t.editor_slug&&(t.scss_types||1<e.numSels)?(!(o=W.checkObject(B.uiData,["non_section","code_editors","hand_coded_css","scss_types"]))||(n=B.get_co_dependent_types(o,!1,!1))&&(e.deps=B.gather_dependent_selectors(e,{co_types:n},i,l)),B.scss_deps_to_string_parts(e,e.deps,c),B.add_full_code_scss_part(e)):B.scss_deps_to_string_parts(e,e.deps,c)},prepare_dependent_sels_obj:function(e,t){e=e||{},t=t||Object.keys(TvrMQsCombined);for(var s=0;s<t.length;s++){e[t[s]]=[]}return e},gather_dependent_selectors:function(e,t,s,r){for(var a,o=e.deps,n=Object.keys(t),i=0;i<n.length;i++){var l=n[i];if(t[l])for(var c=Object.keys(t[l]),d=0;d<c.length;d++)for(var _=c[d],u=Object.keys(t[l][_]),p=0;p<u.length;p++){var f,g=u[p],m=t[l][_][g],v="changed"===l?m:{};W.checkObject(r.relatedTypesChecked,[_,g])||(W.updateObject(r.relatedTypesChecked,[_,g],1),(f=W.checkObject(s,[_,g,"related_types"]))&&(o=B.gather_dependent_selectors(e,{related_types:f},s,r)));var h=W.checkObject(s,[_,g,"deps"]);if(h&&0<h.length)for(var b,y,w,T,x,k,C,S=h.length-1;0<=S;S--){h[S]&&(b=(a=V.extend(!0,{},h[S])).action,y=a.hasDeclaration,"changed"===l&&v.form,"co_types"===l&&"variable"===_&&!y||(T=(w=a.trail).join("."),r.selsAdded[T]||(x=W.checkObject(B.uiData,w))&&(k=B.get_selector_index_from_trail(a.sectionSlug,w),a.code=B.get_raw_scss_or_selector(x),o[a.mq_key][k]=a,r.selsAdded[T]=1,e.numSels++,(C=B.get_co_dependent_types(x.scss_types,!1,T))&&(o=B.gather_dependent_selectors(e,{co_types:C},s,r))),b&&("removed"===b?h.splice(S,1):"added"===b&&delete a.action)))}}}return o},toggle_scss_import_compile_note:function(e){"show"===e?(B.stat.scss_compile_notes.hide(),B.stat.scss_import_compile_notes.show()):(B.stat.scss_compile_notes.show(),B.stat.scss_import_compile_notes.hide())},log_client_scss_error:function(e,t,s,r){var a,o=t.file&&"stdin"!==t.file;if(e)return o?(a=B.check_file_exists(t.file.replace("/sass/",""),!0),B.sass.readFile(a,function(e){B.log_client_scss_error(!1,t,e,r)}),B.toggle_scss_import_compile_note("show"),B.stat.scss_error_file.text(a)):(B.log_client_scss_error(!1,t,B.previousSCSSCompile,r),B.toggle_scss_import_compile_note("hide")),!1;var n=TvrLang.scss_error_line,i=B.stat.view.find(".tab-field-scss_compile").attr("rel"),l=o?B.stat.scss_import_compile_notes.html():"",c=t.message.replace(r,"");B.scss_error={log:{short:TvrLang.scss_error,long:"<p>"+TvrLang.scss_error_long+'.</p><p style="font-weight: bold">'+c+".</p>"+l+'<p><span id="scss-line-error" class="link show-dialog" rel="display-css-code" data-tab="'+i+'" data-line="'+t.line+'" title="'+n+'">'+n+"</span></p>"},tabKey:i,fullString:s},J.update_full_logs(B.scss_error.log),V.extend(!0,B.scss_error,t),B.stat.tvr.addClass("cur_scss_error")},clear_client_scss_error:function(){J.clear_messages(),B.stat.tvr.removeClass("cur_scss_error"),B.scss_error=!1,B.toggle_scss_import_compile_note("hide"),B.dialog_tab_pressed(B.stat.view.find("span.dialog-tab-"+B.pref.generated_css_focus))},scssCompileNext:{},compileQueue:[],enqeueCompile:function(e){B.compileQueue.push(e)},deqeueCompile:function(){B.compileQueue.shift()},pendingCompile:function(){return!!B.compileQueue[0]&&B.compileQueue[0]},mt_compile_scss:function(r,a,o,e,n){if(B.compilingSCSS)return B.enqeueCompile([r,a,o,e,n]),!1;W.startT("prep_and_compile_scss"),W.startT("prep_scss"),B.compilingSCSS=!0;var i=r.settings,t=i.preprocessor,l=B.prepare_scss_sources_obj(),c=i.fullSCSSCompile||t.importChanged||B.fullCompileNeeded;B.fullCompileNeeded=c,l.numSels=0,c&&!B.scssCompileNext.run?(J.update_prog_indicator("plus",TvrLang.compile_scss),B.scss_compile_everything(l)):B.add_selective_sources(l,t,e),B.cachedDeps=V.extend(!0,{},l.deps),W.endT("prep_scss",1),W.startT("compile_scss"),B.sass.compile(l.fullstring,function(e){c&&J.update_prog_indicator("minus",!1,TvrLang.compile_scss),W.endT("compile_scss",1),W.endT("prep_and_compile_scss"),B.compilingSCSS=!1,W.startT("post_scss_node_update_or_error");var t=new RegExp(W.escapeRegExp(B.scss_div),"g");B.previousSCSSCompile=l.fullstring.replace(t,""),e.status&&3!==e.status?B.log_client_scss_error(!0,e,!1,t):(B.fullCompileNeeded=!1,B.scss_error&&B.clear_client_scss_error(),i=B.update_nodes_with_compiled_css(i,l,e),B.cachedDeps=!1),W.endT("post_scss_node_update_or_error"),W.endT("user_input_to_style_render",1);var s=B.pendingCompile();if(s)return B.deqeueCompile(),B.mt_compile_scss.apply(this,s),!1;J.save_or_start_timer(r,a,o,n)})},update_nodes_with_compiled_css:function(e,t,s){var r=s.text?s.text.trim():"",a=B.extract_compiled_parts(r),o="";";"===a[a.length-1]&&a.pop(),t.parts.length,a.length;for(var n=0;n<a.length;n++){var i,l,c=t.parts[n];c.isJunk||c.trail&&!W.checkObject(B.uiData,c.trail)||(i=c.compiled_css_trail?c.compiled_css_trail:c.trail.concat(["compiled_css"]),o=a[n].trim()+"\n",c.node_trail&&(o=o.replace(J.full_editor_placeholder_comment,"")),l={action:"replace",trail:i,data:o=B.apply_sass_post_css(o)},e.savePackage?C.updateObjectAndSavePackage(e.savePackage,l):W.updateObject(B.uiData,i,o,l),c.node_trail&&x&&x.update_preview_style_node(c.node_trail,o))}for(var d=Object.keys(t.sectionNodes),_=0;_<d.length;_++){var u=d[_].split("."),p=u[0],f=u[1],g=[p,f];o=C.get_section_css(!1,!1,C.get_js_object_data([f],p).data),x&&x.update_preview_style_node(g,o,C.get_media_query(p))}return e},apply_sass_post_css:function(e){var t=K.parse_css(e,!0);return t.stylesheet.rules=K.add_final_compile_data(t.stylesheet.rules),K.stringify_css(t,{opts:{},tabDepth:0,tab:""})},get_selector_index_from_trail:function(e,t){var s=B.get_section_index(e),r=2<t.length?t.slice(Math.max(t.length-2,1)):t;return s+B.get_selector_index(r)},scss_deps_to_string_parts:function(e,t,s){for(var r=0;r<s.length;r++){var a,o,n,i,l=s[r],c=t[l].filter(Boolean),d="all-devices"!==l&&c.length,_=d?"\t":"";for(var u in d&&(o="\n\n/*( "+(a=B.pref.m_queries[l]).label+" )*/\n",e.fullstring+=o+a.query+" {\n"+B.scss_div,e.parts.push({isJunk:!0})),c){c.hasOwnProperty(u)&&(n=c[u],W.checkObject(B.uiData,[n.sectionSlug,n.selectorSlug])&&(i="\n"+_+"/** "+B.get_section_name(n.sectionSlug)+" >> "+B.get_selector_name([n.sectionSlug,n.selectorSlug])+" **/\n"+_+B.scss_div,e.fullstring+=i,e.parts.push({isJunk:!0}),"all-devices"!==n.mq_key&&(n.code=n.code.replace(/\n/g,"\n\t")),e.fullstring+=n.code+B.scss_div,e.parts.push({trail:n.trail,mq_key:n.mq_key}),e.sectionNodes[n.mq_key+"."+n.sectionSlug]=1))}d&&(e.fullstring+="\n}\n"+B.scss_div,e.parts.push({isJunk:!0}))}},add_full_code_scss_part:function(e){if(!B.uiData.non_section.hand_coded_css)return!1;var t=K.get_trail_from_name("tvr_mcth[non_section][hand_coded_css_compiled]"),s=V.extend([],t),r="/*= Full Code Editor CSS ============ */\n\n"+B.scss_div;e.fullstring=B.uiData.non_section.hand_coded_css+B.scss_div+e.fullstring,e.parts.unshift({compiled_css_trail:t,node_trail:s}),e.fullstring=r+e.fullstring,e.parts.unshift({isJunk:!0})},scss_error:!1,scss_compile_everything:function(e){B.add_full_code_scss_part(e),e.deps=C.run_global_scans({},["get_all_scss"]).deps,B.scss_deps_to_string_parts(e,e.deps,Object.keys(TvrMQsCombined))},get_section_name:function(e){return W.checkObject(B.uiData,[e,"this","label"])},get_selector_name:function(e){return W.checkObject(B.uiData,e.concat(["label"])).split("|")[0]},get_section_index:function(e){return W.checkObject(B.uiData,[e,"this","index"])},get_selector_index:function(e){return W.checkObject(B.uiData,e.concat(["index"]))},check_update_scss_changes:function(e,t){var s=this.get_scss_types(t);if("parseFail"===s)return!1;var r=W.checkObject(B.uiData,t.scss_types_trail),a=B.compare_scss_types(r,s);if(a){if(0<W.obj_length(a.extend)&&(B.search_scss_extendable_selectors(e,t,a.extend,s),s=e.active_scss_types),s.extend)for(var o=Object.keys(s.extend),n=0;n<o.length;n++){var i=o[n];W.checkObject(a,["extend",i])||(s.extend[i]=r.extend[i])}C.updateObjectAndSavePackage(e.savePackage,{action:"replace",trail:t.scss_types_trail,data:s})}return a},search_scss_extendable_selectors:function(e,t,s,r){e.extend=s,e.active_scss_types=r,t.mq_key&&(e.mq_key=t.mq_key);var a=C.run_global_scans(e,["tag_extended"]);e.active_scss_types=a.active_scss_types},extract_compiled_parts:function(e){return e.split(B.scss_div).filter(Boolean)},check_file_exists:function(e,t){var s=TvrMT.data.dyn.micro_files,r=e.split("/"),a=r.length-1,o=r[a],n=[r];if(t)for(var i=(i=W.file_extension(o))&&i[1],l=W.strip_extension(o).replace("_",""),c=i?[i]:["scss","sass","css"],d=[l,"_"+l],n=[],_=0;_<c.length;_++)for(var u=0;u<d.length;u++){var p=d[u],f=c[_],g=V.extend([],r);g[a]=p+"."+f,n.push(g)}for(var m=0;m<n.length;m++){var v=n[m];if(W.checkObject(s,v))return v.join("/")}return!1},toolbar_adjusted:function(e,t,s){return W.startT(arguments),W.startT("maybe_adjust_side_options"),B.maybe_adjust_side_options("height"),W.endT("maybe_adjust_side_options"),W.endT(arguments),!1},toggle_enabled_buttons:function(){W.startT(arguments),B.totalSels<1&&(B.reset_global_vars(),V("#starter-message").removeClass("hidden"),V("#quick-nav").addClass("hidden"),B.expanded("quick_section")&&B.close_quick_edit(),V("#current-selector").text(""),B.stat.tvr.removeClass("tvr-sels-exist").addClass("tvr-no-sels")),0<B.totalSels&&(V("#starter-message").addClass("hidden"),V("#quick-nav").removeClass("hidden"),B.stat.tvr.addClass("tvr-sels-exist").removeClass("tvr-no-sels")),W.endT(arguments)},remember_page_viewed:function(e){if(W.startT(arguments),!x)return!1;var t=e||x.get_current_url();if(!t)return!1;t=W.strip_page_builder_and_other_params(t);var s,r,a=W.extract_url_path(t,B.blog_details);W.hasValue(t)&&!B.placeholderFrame&&(s=x.get_current_page_title(a,!0),V.get(B.ajaxUrl+"&mt_preview_url="+encodeURIComponent(t)+"&mt_preview_path="+encodeURIComponent(a)+"&mt_path_label="+s+"&mt_item_id="+B.pageOrPostID,function(){}),B.stat.changeUrlInputWrap.find("input").val(""),V("#back-to-frontend").attr("href",t),B.pref.preview_url=t,V("#pref-preview-url-input").val(t),(r=W.in_array(a,TvrMT.data.prog.combo.custom_paths,!1,"value"))&&TvrMT.data.prog.combo.custom_paths.splice(r,1),TvrMT.data.prog.combo.custom_paths.unshift({value:a,label:s}),TvrMT.data.prog.combo.custom_paths=TvrMT.data.prog.combo.custom_paths.slice(0,8)),W.endT(arguments)},remember_css_import_file:function(){W.startT(arguments);var e=V("#stylesheet_to_import").val();if(!W.hasValue(e))return!1;V.get(B.ajaxUrl+"&import_css_url="+encodeURI(e));var t=W.in_array(e,TvrMT.data.prog.combo.viewed_import_stylesheets);!1!==t&&TvrMT.data.prog.combo.viewed_import_stylesheets.splice(t,1),TvrMT.data.prog.combo.viewed_import_stylesheets.unshift(e),W.endT(arguments)},exclStylesheetSubStrings:{always:[{str:"wp-includes/css",unless:null},{str:"wp-includes/js"},{str:"admin-bar"},{str:"dashicons"},{str:"font-awesome"},{str:"genericons"},{str:"microthemer/css/frontend"},{str:"animate.min.css"},{str:"fonts.googleapis.com"},{str:"elementor/assets",unless:"frontend.min.css"}],FLBuilder:[{str:"bb-plugin/css"},{str:"foundation-icons"}],oxygen:[{str:"component-framework/vendor"},{str:"component-framework/toolbar"},{str:"wp-includes/js/tinymce"},{str:"jquery-ui.css"},{str:"buttons.min.css"},{str:"mediaelementplayer-legacy.min.css"},{str:"wp-mediaelement.min.css"},{str:"imgareaselect.css"},{str:"wp-includes/css/editor.min.css"}]},ignore_stylesheet:function(e,t){if(!e)return!(!t.ownerNode||"ct_svg_sets"!==t.ownerNode.className);var s=B.exclStylesheetSubStrings;for(var r in s)if(s.hasOwnProperty(r)&&("always"===r||TvrMT.integrate[r]))for(var a in s[r])if(s[r].hasOwnProperty(a)){var o=s[r][a];if(-1<e.indexOf(o.str)&&(!o.unless||e.indexOf(o.unless)<0))return!0}return!1},filter_excluded_stylesheets:function(e){for(var t=e.length-1;0<=t;t--)B.ignore_stylesheet(e[t].href,e[t])&&e.splice(t,1);return e},refresh_stylesheet_list:function(e){var t=e.siblings("input"),s=x.stat.doc.styleSheets,r=["admin-bar","dashicons","genericons","microthemer/css/frontend"],a=[];for(var o in s)if(s.hasOwnProperty(o)){var n=s[o].href,i=!1;if(n){for(var l in r)if(r.hasOwnProperty(l)&&-1<n.indexOf(r[l])){i=!0;break}i||a.push(n)}}TvrMT.data.prog.combo.viewed_import_stylesheets=V.extend(!0,[],a),t.focus().MTautocomplete().MTautocomplete("search","")},update_prev_next_sel_buttons:function(e){if(W.startT(arguments),!e)return V("#vb-focus-prev, #vb-focus-next").addClass("disabled"),!1;var t=B.slugs_from_id(e),s=V("#vb-focus-prev"),r=V("#vb-focus-next"),a=B.itemScan("selector","prev","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}),o=B.itemScan("selector","next","getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0});a?s.removeClass("disabled"):s.addClass("disabled"),o?r.removeClass("disabled"):r.addClass("disabled"),W.endT(arguments)},itemScan:function(e,t,s,r,a,o){var n=(o=o||{}).incCurrentSection?"IncCurrent":"",i=W.editArray(Object.keys(B.uiData),"non_section","remove"),i=W.editArray(i,r,t+"Items"+n);"prev"===t&&i.reverse();for(var l=0;l<i.length;l++){var c=i[l];if("section"===e)switch(s){case"getPreviousNode":var d=C.format_css_node_id([o.mq_key,c]),_=x.frontend_jquery_select("#"+d);if(W.isDomEl(_))return _;break;case"getID":return"strk-"+c}if("selector"===e){var u=W.editArray(Object.keys(B.uiData[c]),"this","remove"),u=r===c?W.editArray(u,a,t+"Items"):u;"prev"===t&&u.reverse();for(var p=0;p<u.length;p++){var f=u[p];switch(s){case"getPreviousNode":var g=C.format_css_node_id([o.mq_key,c,f]),m=x.frontend_jquery_select("#"+g);if(W.isDomEl(m))return m;break;case"getID":return"strk-"+c+"-"+f}}}}switch(s){case"getPreviousNode":return x.frontend_jquery_select("#"+C.format_css_node_id([o.mq_key]));case"getID":return!1}return!1},itemScanOld:function(e,t,s,r,a){var o=(a=a||{}).incCurrentSection?"IncCurrent":"",n=W.editArray(Object.keys(B.uiData),"non_section","remove"),n=W.editArray(n,s,e+"Items"+o);"prev"===e&&n.reverse();for(var i=0;i<n.length;i++){var l=n[i],c=W.editArray(Object.keys(B.uiData[l]),"this","remove"),c=s===l?W.editArray(c,r,e+"Items"):c;"prev"===e&&c.reverse();for(var d=0;d<c.length;d++){var _=c[d];switch(t){case"getPreviousNode":var u=C.format_css_node_id([a.mq_key,l,_]),p=x.frontend_jquery_select("#"+u);if(W.isDomEl(p))return p;break;case"getID":return"strk-"+l+"-"+_}}}switch(t){case"getPreviousNode":return x.frontend_jquery_select("#"+C.format_css_node_id([a.mq_key]));case"getID":return!1}return!1},tvr_iterate_selectors_v:function(e,t,s){W.startT(arguments),t=t||e.attr("id"),e=W.isDomEl(e,!0)?e:B.load_selector(B.slugs_from_id(t),{items:["selectorM"]}),B.stat.opts.add(B.stat.nav).find("li.in-focus").removeClass("in-focus");var r=B.get_meta(e,"selector"),a=B.load_selector(r,{items:["selector"]});(r=B.get_meta(a,"selector")).selector.add(r.selectorM).add(r.section).addClass("in-focus"),B.menuSelInFocusID!==r.selectorMID&&"copy"!==s&&V("#"+B.menuSelInFocusID).remove(),B.update_global_vars(r),B.unload_all_option_selectors(),B.update_prev_next_sel_buttons(r.selectorID),B.maybe_default_to_pg(),B.js_check_values({},r),B.selector_check_disabled(r),B.toolbar_adjusted(),B.briefly_highlight_selector(),B.startSel=!1,W.endT(arguments)},briefly_highlight_selector:function(){if(W.startT(arguments),":root"===B.curSelCSS)return!1;B.feature_on(0,"mt_highlight",{offFirst:{fHTML:1,noSave:1},fHTML:1,noSave:1,con:"reg"}),setTimeout(function(){B.feature_off(0,"mt_highlight",{fHTML:1,noSave:1})},1e3),W.endT(arguments)},iframe_functions_loaded:function(){return x},maybe_default_to_pg:function(){var e=B.pref.pg_focus,t=e?".pg-icon-"+e:".pg-icon-font";B.pg_icon_pressed(B.stat.css_icons.find(t),!0)},quick_nav:function(e){if(W.startT(arguments),e.hasClass("disabled")||!B.selInFocusID)return!1;var t=B.get_meta(V("#"+B.selInFocusID),"selector"),s="vb-focus-prev"===e.attr("id")?"prev":"next";B.tvr_iterate_selectors_v(!1,B.itemScan("selector",s,"getID",t.sectionSlug,t.selectorSlug,{incCurrentSection:!0}))}};var B=TvrMT.TvrUi;MTlocal.set_vars(),W.set_vars(),G.set_vars(),v.set_vars(),C.set_vars(),K.set_vars(),J.set_vars(),e.set_vars(),p.set_vars(),S.set_vars(),B.init()});